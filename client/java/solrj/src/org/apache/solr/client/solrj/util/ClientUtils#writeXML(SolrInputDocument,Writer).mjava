  public static void writeXML( SolrInputDocument doc, Writer writer ) throws IOException
  {
    if( doc.getBoost( null ) != null ) {
      writer.write("<doc boost=\""+doc.getBoost( null )+"\">");
    }
    else {
      writer.write("<doc>");
    }

    for( String name : doc.getFieldNames() ) {
      Float boost = doc.getBoost( name );
      for( Object o : doc.getFieldValues( name ) ) {
        writeFieldValue(writer, name, boost, o );
        // only write the boost for the first mulit-valued field
        // otherwise, the used boost is the product of all the boost values
        boost = null; 
      }
    }
    writer.write("</doc>");
  }

