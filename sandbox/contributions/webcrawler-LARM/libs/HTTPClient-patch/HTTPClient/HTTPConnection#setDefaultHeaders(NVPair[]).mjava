    /**
     * Sets the default http headers to be sent with each request. The actual
     * headers sent are determined as follows: for each header specified in
     * multiple places a value given as part of the request takes priority over
     * any default values set by this method, which in turn takes priority over
     * any built-in default values. A different way of looking at it is that we
     * start off with a list of all headers specified with the request, then add
     * any default headers set by this method which aren't already in our list,
     * and finally add any built-in headers which aren't yet in the list. There
     * is one exception to this rule: the "Content-length" header is always
     * ignored; and when posting form-data any default "Content-type" is ignored
     * in favor of the built-in "application/x-www-form-urlencoded" (however it
     * will be overriden by any content-type header specified as part of the
     * request). <P>
     *
     * Typical headers you might want to set here are "Accept" and its
     * "Accept-*" relatives, "Connection", "From", "User-Agent", etc.
     *
     * @param headers  an array of header-name/value pairs (do not give the
     *      separating ':').
     */
    public void setDefaultHeaders(NVPair[] headers)
    {
        int length = (headers == null ? 0 : headers.length);
        NVPair[] def_hdrs = new NVPair[length];

        // weed out undesired headers
        int sidx;

        // weed out undesired headers
        int didx;
        for (sidx = 0, didx = 0; sidx < length; sidx++)
        {
            if (headers[sidx] == null)
            {
                continue;
            }

            String name = headers[sidx].getName().trim();
            if (name.equalsIgnoreCase("Content-length"))
            {
                continue;
            }

            def_hdrs[didx++] = headers[sidx];
        }

        if (didx < length)
        {
            def_hdrs = Util.resizeArray(def_hdrs, didx);
        }

        synchronized (DefaultHeaders)
        {
            DefaultHeaders = def_hdrs;
        }
    }

