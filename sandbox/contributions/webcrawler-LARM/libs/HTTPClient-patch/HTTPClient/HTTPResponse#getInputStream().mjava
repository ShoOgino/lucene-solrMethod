    /**
     * Gets an input stream from which the returned data can be read. Note that
     * if <code>getData()</code> had been previously invoked it will actually
     * return a ByteArrayInputStream created from that data.
     *
     * @return                     the InputStream.
     * @exception IOException      If any exception occurs on the socket.
     * @exception ModuleException  if any module encounters an exception.
     * @see                        #getData()
     */
    public synchronized InputStream getInputStream()
        throws IOException, ModuleException
    {
        if (!initialized)
        {
            handleResponse();
        }

        if (Data == null)
        {
            return inp_stream;
        }
        else
        {
            getData();
            // ensure complete data is read
            return new ByteArrayInputStream(Data);
        }
    }

