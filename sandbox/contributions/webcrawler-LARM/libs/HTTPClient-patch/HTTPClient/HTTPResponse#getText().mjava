    /**
     * Reads all the response data into a buffer and turns it into a string
     * using the appropriate character converter. Since this uses {@link
     * #getData() getData()}, the caveats of that method apply here as well.
     *
     * @return                     the body as a String. If no data was returned
     *      then an empty string is returned.
     * @exception IOException      If any io exception occured while reading the
     *      data, or if the content is not text
     * @exception ModuleException  if any module encounters an exception.
     * @exception ParseException   if an error occured trying to parse the
     *      content-type header field
     * @see                        #getData()
     */
    public synchronized String getText()
        throws IOException, ModuleException, ParseException
    {
        String ct = getHeader("Content-Type");
        if (ct == null || !ct.toLowerCase().startsWith("text/"))
        {
            throw new IOException("Content-Type `" + ct + "' is not a text type");
        }

        String charset = Util.getParameter("charset", ct);
        if (charset == null)
        {
            charset = "ISO-8859-1";
        }

        return new String(getData(), charset);
    }

