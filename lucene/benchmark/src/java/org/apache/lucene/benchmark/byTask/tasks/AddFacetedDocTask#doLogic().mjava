  @Override
  public int doLogic() throws Exception {
    if (withFacets) {
      facetFields.addFields(doc, facets);
    }
    return super.doLogic();
  }

