  // TODO: we need BaseSuggesterTestCase?
  public void testTooLongSuggestion() throws Exception {
    Analyzer a = new MockAnalyzer(random());
    Directory tempDir = getDirectory();
    AnalyzingSuggester suggester = new AnalyzingSuggester(tempDir, "suggest", a);
    String bigString = TestUtil.randomSimpleString(random(), 30000, 30000);
    try {
      suggester.build(new InputArrayIterator(new Input[] {
            new Input(bigString, 7)}));
      fail("did not hit expected exception");
    } catch (IllegalArgumentException iae) {
      // expected
      assertTrue(iae.getMessage().contains("input automaton is too large"));
    }
    IOUtils.close(a, tempDir);
  }

