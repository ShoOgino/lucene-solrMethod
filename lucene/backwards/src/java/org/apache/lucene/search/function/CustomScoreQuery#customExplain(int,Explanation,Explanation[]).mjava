  /**
   * Explain the custom score.
   * @deprecated The doc is relative to the current reader, which is
   * unknown to CustomScoreQuery when using per-segment search (since Lucene 2.9).
   * Please override {@link #getCustomScoreProvider} and return a subclass
   * of {@link CustomScoreProvider} for the given {@link IndexReader}.
   * @see CustomScoreProvider#customExplain(int,Explanation,Explanation[])
   */
  @Deprecated
  public Explanation customExplain(int doc, Explanation subQueryExpl, Explanation valSrcExpls[]) {
    if (valSrcExpls.length == 1) {
      return customExplain(doc, subQueryExpl, valSrcExpls[0]);
    }
    if (valSrcExpls.length == 0) {
      return subQueryExpl;
    }
    float valSrcScore = 1;
    for (int i = 0; i < valSrcExpls.length; i++) {
      valSrcScore *= valSrcExpls[i].getValue();
    }
    Explanation exp = new Explanation( valSrcScore * subQueryExpl.getValue(), "custom score: product of:");
    exp.addDetail(subQueryExpl);
    for (int i = 0; i < valSrcExpls.length; i++) {
      exp.addDetail(valSrcExpls[i]);
    }
    return exp;
  }

