  @Before
  public void setUp() throws Exception {
    super.setUp();
    tree = DateRangePrefixTree.INSTANCE;
    if (randomBoolean()) {
      strategy = new NumberRangePrefixTreeStrategy(tree, "dateRange");
    } else {
      //Test the format that existed <= Lucene 5.0
      strategy = new NumberRangePrefixTreeStrategy(tree, "dateRange") {
        @Override
        protected CellToBytesRefIterator newCellToBytesRefIterator() {
          return new CellToBytesRefIterator50();
        }
      };
    }
    Calendar tmpCal = tree.newCal();
    int randomCalWindowField = randomIntBetween(Calendar.YEAR, Calendar.MILLISECOND);
    tmpCal.add(randomCalWindowField, 2_000);
    randomCalWindowMs = Math.max(2000L, tmpCal.getTimeInMillis());
  }

