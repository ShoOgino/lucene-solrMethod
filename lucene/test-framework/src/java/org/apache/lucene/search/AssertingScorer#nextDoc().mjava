  @Override
  public int nextDoc() throws IOException {
    assert state != IteratorState.FINISHED : "nextDoc() called after NO_MORE_DOCS";
    int nextDoc = in.nextDoc();
    assert nextDoc > doc : "backwards nextDoc from " + doc + " to " + nextDoc + " " + in;
    if (nextDoc == DocIdSetIterator.NO_MORE_DOCS) {
      state = IteratorState.FINISHED;
    } else {
      state = IteratorState.ITERATING;
    }
    assert in.docID() == nextDoc;
    return doc = nextDoc;
  }

