  @Override
  public SpanWeight createWeight(IndexSearcher searcher, boolean needsScores) throws IOException {
    // TODO: we are wasteful and createWeight twice in this case... use VirtualMethod?
    // we need to not wrap if the query is e.g. a Payload one that overrides this (it should really be final)
    SpanWeight weight = in.createWeight(searcher, needsScores);
    if (weight.getClass() == SpanWeight.class) {
      return super.createWeight(searcher, needsScores);
    } else {
      return weight;
    }
  }

