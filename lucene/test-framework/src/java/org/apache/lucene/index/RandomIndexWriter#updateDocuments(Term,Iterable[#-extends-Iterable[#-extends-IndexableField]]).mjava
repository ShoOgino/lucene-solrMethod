  public long updateDocuments(Term delTerm, Iterable<? extends Iterable<? extends IndexableField>> docs) throws IOException {
    LuceneTestCase.maybeChangeLiveIndexWriterConfig(r, w.getConfig());
    long seqNo;
    if (useSoftDeletes()) {
      seqNo = w.softUpdateDocuments(delTerm, docs, new NumericDocValuesField(w.getConfig().getSoftDeletesField(), 1));
    } else {
      seqNo = w.updateDocuments(delTerm, docs);
    }
    maybeFlushOrCommit();
    return seqNo;
  }

