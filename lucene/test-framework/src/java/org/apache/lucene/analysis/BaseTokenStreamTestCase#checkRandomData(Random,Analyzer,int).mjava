  // simple utility method for blasting tokenstreams with data to make sure they don't do anything crazy
  // TODO: add a MockCharStream, and use it here too, to ensure that correctOffset etc is being done by tokenizers.
  public static void checkRandomData(Random random, Analyzer a, int iterations) throws IOException {
    checkRandomData(random, a, iterations, 20);
    // now test with multiple threads
    int numThreads = _TestUtil.nextInt(random, 4, 8);
    Thread threads[] = new Thread[numThreads];
    for (int i = 0; i < threads.length; i++) {
      threads[i] = new AnalysisThread(new Random(random.nextLong()), a, iterations);
    }
    for (int i = 0; i < threads.length; i++) {
      threads[i].start();
    }
    for (int i = 0; i < threads.length; i++) {
      try {
        threads[i].join();
      } catch (InterruptedException e) {
        throw new RuntimeException(e);
      }
    }
  }

