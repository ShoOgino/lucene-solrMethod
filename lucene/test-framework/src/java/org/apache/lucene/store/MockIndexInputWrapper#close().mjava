  @Override
  public void close() throws IOException {
    if (closed) {
      delegate.close(); // don't mask double-close bugs
      return;
    }
    closed = true;
    
    try {
      // turn on the following to look for leaks closing inputs,
      // after fixing TestTransactions
      // dir.maybeThrowDeterministicException();
    } finally {
      delegate.close();
      // Pending resolution on LUCENE-686 we may want to
      // remove the conditional check so we also track that
      // all clones get closed:
      if (!isClone) {
        dir.removeIndexInput(this, name);
      }
    }
  }

