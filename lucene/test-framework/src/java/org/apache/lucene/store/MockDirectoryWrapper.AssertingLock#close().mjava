    @Override
    public void close() throws IOException {
      if (obtained) {
        RuntimeException remove = openLocks.remove(name);
        // TODO: fix stupid tests like TestIndexWriter.testNoSegmentFile to not do this!
        assert remove != null || delegateLock == NoLockFactory.SINGLETON_LOCK;
        obtained = false;
      }
      delegateLock.close();
    }

