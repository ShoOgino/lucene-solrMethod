  @Override
  public void close() throws IOException {
    // only if there were no other test failures.
    if (failureMarker.wasSuccessful()) {
      if (file.exists()) {
        try {
          _TestUtil.rmDir(file);
        } catch (IOException e) {
          // Ignore the exception from rmDir.
        }

        // Re-check.
        if (file.exists()) {
          throw new IOException(
            "Could not remove: " + file.getAbsolutePath());
        }
    }
    }
  }

