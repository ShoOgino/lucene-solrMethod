    @Override
    public Statement apply(final Statement base, Description description) {
      return new Statement() {
        @Override
        public void evaluate() throws Throwable {
          // We simulate the previous behavior of @Before in that
          // if any statement below us fails, we just propagate the original
          // exception and do not call tearDownInternal.
          setUpInternal();
          final ArrayList<Throwable> errors = new ArrayList<Throwable>();
          try {
            // But we will collect errors from statements below and wrap them
            // into a multiple so that tearDownInternal is called.
            base.evaluate();
          } catch (Throwable t) {
            errors.add(t);
          }
          
          try {
            tearDownInternal();
          } catch (Throwable t) {
            errors.add(t);
          }

          MultipleFailureException.assertEmpty(errors);
        }
      };
    }

