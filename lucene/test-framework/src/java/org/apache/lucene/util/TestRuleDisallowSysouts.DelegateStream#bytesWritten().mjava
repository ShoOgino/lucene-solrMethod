    private void bytesWritten() {
      // This check isn't really needed, but getting the stack is expensive and may involve
      // jit deopts, so we'll do it anyway.
      if (firstWriteStack.get() == null) {
        firstWriteStack.compareAndSet(null, Thread.currentThread().getStackTrace());
      }
    }

