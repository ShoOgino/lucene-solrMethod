  /** 
   * insecure, fast version of File.createTempFile
   * uses Random instead of SecureRandom.
   */
  public static File createTempFile(String prefix, String suffix, File directory)
      throws IOException {
    if (prefix.length() < 3) {
      throw new IllegalArgumentException("prefix must be at least 3 characters");
    }
    String newSuffix = suffix == null ? ".tmp" : suffix;
    // always pull a long from master random. that way, the randomness of the test
    // is not affected by whether it initialized the counter (in genTempFile) or not.
    // note that the Random used by genTempFile is *not* the master Random, and therefore
    // does not affect the randomness of the test.
    final Random random = new Random(RandomizedContext.current().getRandom().nextLong());
    File result;
    do {
      result = genTempFile(random, prefix, newSuffix, directory);
    } while (!result.createNewFile());
    return result;
  }

