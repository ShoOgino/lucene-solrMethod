  static void restore(
      TreeMap<String,String> before,
      TreeMap<String,String> after) {
    after.keySet().removeAll(before.keySet());
    for (String key : after.keySet()) {
      System.clearProperty(key);
    }
    for (Map.Entry<String,String> e : before.entrySet()) {
      if (e.getValue() == null) {
        System.clearProperty(e.getKey()); // Can this happen?
      } else {
        System.setProperty(e.getKey(), e.getValue());
      }
    }
  }  

