  /**
   * Returns a new Directory instance, using the specified random.
   * See {@link #newDirectory()} for more information.
   */
  public static MockDirectoryWrapper newDirectory(Random r) {
    Directory impl = newDirectoryImpl(r, TEST_DIRECTORY);
    MockDirectoryWrapper dir = new MockDirectoryWrapper(r, maybeNRTWrap(r, impl));
    closeAfterSuite(new CloseableDirectory(dir, suiteFailureMarker));

    dir.setThrottling(TEST_THROTTLING);
    if (VERBOSE) {
      System.out.println("NOTE: LuceneTestCase.newDirectory: returning " + dir);
    }
    return dir;
   }

