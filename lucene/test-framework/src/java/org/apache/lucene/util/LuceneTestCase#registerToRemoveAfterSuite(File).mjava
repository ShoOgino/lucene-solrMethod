  /**
   * Register temporary folder for removal after the suite completes.
   */
  private static void registerToRemoveAfterSuite(File f) {
    assert f != null;

    if (LuceneTestCase.LEAVE_TEMPORARY) {
      System.err.println("INFO: Will leave temporary file: " + f.getAbsolutePath());
      return;
    }

    Class<?> suiteClass = RandomizedContext.current().getTargetClass();
    if (suiteClass.isAnnotationPresent(SuppressTempFileChecks.class)) {
      System.err.println("WARNING: Will leave temporary files (bugUrl: "
          + suiteClass.getAnnotation(SuppressTempFileChecks.class).bugUrl() + "): "
          + f.getAbsolutePath());
      return;
    }

    synchronized (cleanupQueue) {
      cleanupQueue.addLast(f);
    }
  }

