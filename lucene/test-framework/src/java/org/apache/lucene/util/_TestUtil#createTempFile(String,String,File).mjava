  /** 
   * insecure, fast version of File.createTempFile
   * uses Random instead of SecureRandom.
   */
  public static File createTempFile(String prefix, String suffix, File directory)
      throws IOException {
    // Force a prefix null check first
    if (prefix.length() < 3) {
      throw new IllegalArgumentException("prefix must be 3");
    }
    String newSuffix = suffix == null ? ".tmp" : suffix;
    File result;
    // just pull one long always: we don't want to rely upon what may or may not
    // already exist. otherwise tests might not reproduce, depending on when you last
    // ran 'ant clean'
    final Random random = new Random(RandomizedContext.current().getRandom().nextLong());
    do {
      result = genTempFile(random, prefix, newSuffix, directory);
    } while (!result.createNewFile());
    return result;
  }

