  /** 
   * Convenience method unzipping zipName into destDir, cleaning up 
   * destDir first. 
   */
  public static void unzip(Path zipName, Path destDir) throws IOException {
    IOUtils.rm(destDir);
    Files.createDirectory(destDir);

    ZipFile zipFile = new ZipFile(zipName.toFile());
    Enumeration<? extends ZipEntry> entries = zipFile.entries();

    while (entries.hasMoreElements()) {
      ZipEntry entry = entries.nextElement();
      
      InputStream in = zipFile.getInputStream(entry);
      Path targetFile = destDir.resolve(entry.getName());
      
      // be on the safe side: do not rely on that directories are always extracted
      // before their children (although this makes sense, but is it guaranteed?)
      Files.createDirectories(targetFile.getParent());
      if (!entry.isDirectory()) {
        OutputStream out = Files.newOutputStream(targetFile);
        
        byte[] buffer = new byte[8192];
        int len;
        while((len = in.read(buffer)) >= 0) {
          out.write(buffer, 0, len);
        }
        
        in.close();
        out.close();
      }
    }
    
    zipFile.close();
  }

