  private static File genTempFile(Random random, String prefix, String suffix, File directory) {
    final int identify;
    synchronized (counterLock) {
      if (counterBase == null) { // init once
        counter = random.nextInt() & 0xFFFF; // up to five digits number
        counterBase = Integer.toString(counter);
      }
      identify = counter++;
    }
    StringBuilder newName = new StringBuilder();
    newName.append(prefix);
    newName.append(counterBase);
    newName.append(identify);
    newName.append(suffix);
    return new File(directory, newName.toString());
  }

