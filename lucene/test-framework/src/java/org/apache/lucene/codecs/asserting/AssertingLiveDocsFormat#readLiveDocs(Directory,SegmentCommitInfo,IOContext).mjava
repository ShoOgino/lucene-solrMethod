  @Override
  public Bits readLiveDocs(Directory dir, SegmentCommitInfo info, IOContext context) throws IOException {
    Bits raw = in.readLiveDocs(dir, info, context);
    assert raw != null;
    assert raw.length() == info.info.getDocCount();
    int deletedCount = 0;
    for (int i = 0; i < raw.length(); i++) {
      if (!raw.get(i)) {
        deletedCount++;
      }
    }
    assert deletedCount == info.getDelCount();
    return new AssertingBits(raw);
  }

