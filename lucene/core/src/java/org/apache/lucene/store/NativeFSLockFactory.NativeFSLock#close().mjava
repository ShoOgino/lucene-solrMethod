    @Override
    public synchronized void close() throws IOException {
      try {
        if (lock != null) {
          try {
            lock.release();
            lock = null;
          } finally {
            clearLockHeld(path);
          }
        }
      } finally {
        IOUtils.close(channel);
        channel = null;
      }
    }

