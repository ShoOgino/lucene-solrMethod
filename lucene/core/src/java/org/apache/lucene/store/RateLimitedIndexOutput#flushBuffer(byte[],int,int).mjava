  @Override
  protected void flushBuffer(byte[] b, int offset, int len) throws IOException {
    rateLimiter.pause(len);
    if (bufferedDelegate != null) {
      bufferedDelegate.flushBuffer(b, offset, len);
    } else {
      delegate.writeBytes(b, offset, len);
    }
    
  }

