  /** Sets the maximum (approx) MB/sec allowed by all write
   *  IO performed by merging.  Pass null to have no limit.
   *
   *  <p><b>NOTE</b>: if merges are already running there is
   *  no guarantee this new rate will apply to them; it will
   *  only apply for certain to new merges.
   *
   * @lucene.experimental */
  public void setMaxMergeWriteMBPerSec(Double mbPerSec) {
    RateLimiter limiter = mergeWriteRateLimiter;
    if (mbPerSec == null) {
      if (limiter != null) {
        limiter.setMbPerSec(Double.MAX_VALUE);
        mergeWriteRateLimiter = null;
      }
    } else if (limiter != null) {
      limiter.setMbPerSec(mbPerSec);
    } else {
      mergeWriteRateLimiter = new RateLimiter(mbPerSec);
    }
  }

