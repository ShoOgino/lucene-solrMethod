  /** Forces any buffered output to be written. */
  protected void flush() throws IOException {
    crc.update(buffer, 0, bufferPosition);
    flushBuffer(buffer, bufferPosition);
    bufferStart += bufferPosition;
    bufferPosition = 0;
  }

