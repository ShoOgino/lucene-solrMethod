  @Override
  public void extractTerms(Set<Term> terms) {
    // NOTE: ConstantScoreQuery used to wrap either a query or a filter. Now
    // that filter extends Query, we need to only extract terms when the query
    // is not a filter if we do not want to hit an UnsupportedOperationException
    if (query instanceof Filter == false) {
      query.extractTerms(terms);
    }
  }

