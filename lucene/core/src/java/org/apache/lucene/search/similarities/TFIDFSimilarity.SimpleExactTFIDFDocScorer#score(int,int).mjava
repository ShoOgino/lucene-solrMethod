    @Override
    public float score(int doc, int freq) {
      final float raw =                                // compute tf(f)*weight
        freq < SCORE_CACHE_SIZE                        // check cache
        ? scoreCache[freq]                             // cache hit
        : tf(freq)*weightValue;        // cache miss

      return norms == null ? raw : raw * decodeNormValue((byte) norms.get(doc)); // normalize for field
    }

