  private long getMaxFreq(IndexOptions indexOptions, long ttf, long df) {
    // TODO: store the max term freq?
    if (indexOptions.compareTo(IndexOptions.DOCS) <= 0) {
      // omitTFAP field, tf values are implicitly 1.
      return 1;
    } else {
      assert ttf >= 0;
      return Math.min(Integer.MAX_VALUE, ttf - df + 1);
    }
  }

