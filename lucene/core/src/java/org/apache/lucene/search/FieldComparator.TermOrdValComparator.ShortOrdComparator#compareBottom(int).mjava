      @Override
      public int compareBottom(int doc) {
        assert bottomSlot != -1;
        final int docOrd = (readerOrds[doc]&0xFFFF);
        if (bottomSameReader) {
          // ord is precisely comparable, even in the equal case
          return bottomOrd - docOrd;
        } else if (bottomOrd >= docOrd) {
          // the equals case always means bottom is > doc
          // (because we set bottomOrd to the lower bound in
          // setBottom):
          return 1;
        } else {
          return -1;
        }
      }

