  /** Use in the 1D case when you indexed 1D int values using {@link org.apache.lucene.document.IntPoint} */
  public static PointInSetQuery newIntSet(String field, int... valuesIn) {

    // Don't unexpectedly change the user's incoming array:
    int[] values = valuesIn.clone();

    Arrays.sort(values);

    final BytesRef value = new BytesRef(new byte[Integer.BYTES]);
    value.length = Integer.BYTES;

    try {
      return new PointInSetQuery(field, 1, Integer.BYTES,
                                 new BytesRefIterator() {

                                   int upto;

                                   @Override
                                   public BytesRef next() {
                                     if (upto == values.length) {
                                       return null;
                                     } else {
                                       IntPoint.encodeDimension(values[upto], value.bytes, 0);
                                       upto++;
                                       return value;
                                     }
                                   }
                                 });
    } catch (IOException bogus) {
      // Should never happen ;)
      throw new RuntimeException(bogus);
    }
  }

