  static CompiledAutomaton[] buildAutomata(String text, int[] termText, int prefixLength, boolean transpositions, int maxEdits) {
    CompiledAutomaton[] compiled = new CompiledAutomaton[maxEdits + 1];
    Automaton[] automata = buildAutomata(termText, prefixLength, transpositions, maxEdits);
    for (int i = 0; i <= maxEdits; i++) {
      try {
        compiled[i] = new CompiledAutomaton(automata[i], true, false);
      }
      catch (TooComplexToDeterminizeException e) {
        throw new FuzzyTermsException(text, e);
      }
    }
    return compiled;
  }

