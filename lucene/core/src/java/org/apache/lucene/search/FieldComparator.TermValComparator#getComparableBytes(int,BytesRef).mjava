    /**
     * Given a document and a term, return the term itself if it exists or
     * <tt>null</tt> otherwise.
     */
    private BytesRef getComparableBytes(int doc, BytesRef term) {
      if (term.length == 0 && isNull(doc, term)) {
        return null;
      }
      return term;
    }

