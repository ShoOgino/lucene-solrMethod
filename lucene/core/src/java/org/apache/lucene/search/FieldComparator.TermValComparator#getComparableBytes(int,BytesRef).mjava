    /**
     * Given a document and a term, return the term itself if it exists or
     * {@link #MISSING_BYTESREF} otherwise.
     */
    private BytesRef getComparableBytes(int doc, BytesRef term) {
      if (term.length == 0 && docsWithField.get(doc) == false) {
        return MISSING_BYTESREF;
      }
      return term;
    }

