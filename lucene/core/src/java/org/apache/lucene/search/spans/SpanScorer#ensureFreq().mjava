  /** 
   * Ensure setFreqCurrentDoc is called, if not already called for the current doc.
   */
  private final void ensureFreq() throws IOException {
    int currentDoc = spans.docID();
    if (lastScoredDoc != currentDoc) {
      setFreqCurrentDoc();
      lastScoredDoc = currentDoc;
    }
  }

