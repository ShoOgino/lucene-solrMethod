  @Override
  public void visit(QueryVisitor visitor) {
    if (visitor.acceptField(field)) {
      if (maxEdits == 0 || prefixLength >= term.text().length()) {
        visitor.consumeTerms(this, term);
      } else {
        // Note: we're rebuilding the automaton here, so this can be expensive
        try {
          visitor.consumeTermsMatching(this, field,
              new ByteRunAutomaton(toAutomaton(), false, Operations.DEFAULT_MAX_DETERMINIZED_STATES));
        } catch (TooComplexToDeterminizeException e) {
          throw new FuzzyTermsEnum.FuzzyTermsException(term.text(), e);
        }
      }
    }
  }

