  ExactPhraseScorer(Weight weight, PhraseQuery.PostingsAndFreq[] postings,
                    LeafSimScorer docScorer, ScoreMode scoreMode,
                    float matchCost) throws IOException {
    super(weight);
    this.docScorer = docScorer;
    this.needsScores = scoreMode.needsScores();
    this.needsTotalHitCount = scoreMode != ScoreMode.TOP_SCORES;

    List<DocIdSetIterator> iterators = new ArrayList<>();
    List<PostingsAndPosition> postingsAndPositions = new ArrayList<>();
    for(PhraseQuery.PostingsAndFreq posting : postings) {
      iterators.add(posting.postings);
      postingsAndPositions.add(new PostingsAndPosition(posting.postings, posting.position));
    }
    conjunction = ConjunctionDISI.intersectIterators(iterators);
    assert TwoPhaseIterator.unwrap(conjunction) == null;
    this.postings = postingsAndPositions.toArray(new PostingsAndPosition[postingsAndPositions.size()]);
    this.matchCost = matchCost;
  }

