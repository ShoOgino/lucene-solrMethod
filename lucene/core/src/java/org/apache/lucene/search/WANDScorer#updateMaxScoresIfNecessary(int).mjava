  private void updateMaxScoresIfNecessary(int target) throws IOException {
    assert lead == null;

    if (head.size() == 0) { // no matches in the current block
      if (upTo != DocIdSetIterator.NO_MORE_DOCS) {
        updateMaxScores(Math.max(target, upTo + 1));
      }
    } else if (head.top().doc > upTo) { // the next candidate is in a different block
      assert head.top().doc >= target;
      updateMaxScores(target);
    }
  }

