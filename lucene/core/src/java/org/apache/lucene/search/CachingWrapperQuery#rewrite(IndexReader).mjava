  @Override
  public Query rewrite(IndexReader reader) throws IOException {
    final Query rewritten = query.rewrite(reader);
    if (query == rewritten) {
      return this;
    } else {
      CachingWrapperQuery clone = clone();
      clone.query = rewritten;
      return clone;
    }
  }

