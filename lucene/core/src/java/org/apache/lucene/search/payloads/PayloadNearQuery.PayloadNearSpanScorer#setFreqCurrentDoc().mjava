    //
    @Override
    protected void setFreqCurrentDoc() throws IOException {
      freq = 0.0f;
      payloadScore = 0;
      payloadsSeen = 0;
      int startPos = spans.nextStartPosition();
      assert startPos != Spans.NO_MORE_POSITIONS : "initial startPos NO_MORE_POSITIONS, spans="+spans;
      do {
        int matchLength = spans.endPosition() - startPos;
        freq += docScorer.computeSlopFactor(matchLength);
        Spans[] spansArr = new Spans[1];
        spansArr[0] = spans;
        getPayloads(spansArr);            
        startPos = spans.nextStartPosition();
      } while (startPos != Spans.NO_MORE_POSITIONS);
    }

