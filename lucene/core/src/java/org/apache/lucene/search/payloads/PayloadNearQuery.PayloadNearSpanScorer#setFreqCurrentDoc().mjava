    //
    @Override
    protected void setFreqCurrentDoc() throws IOException {
      freq = 0.0f;
      payloadScore = 0;
      payloadsSeen = 0;
      int startPos = spans.nextStartPosition();
      assert startPos != Spans.NO_MORE_POSITIONS : "initial startPos NO_MORE_POSITIONS, spans="+spans;
      do {
        int matchLength = spans.endPosition() - startPos;
        freq += docScorer.computeSlopFactor(matchLength);
        collector.reset();
        spans.collect(collector);
        processPayloads(collector.getPayloads(), startPos, spans.endPosition());
        startPos = spans.nextStartPosition();
      } while (startPos != Spans.NO_MORE_POSITIONS);
    }

