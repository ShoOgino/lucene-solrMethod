  /** Encodes the document length in the same way as {@link TFIDFSimilarity}. */
  @Override
  public void computeNorm(FieldInvertState state, Norm norm) {
    final float numTerms;
    if (discountOverlaps)
      numTerms = state.getLength() - state.getNumOverlap();
    else
      numTerms = state.getLength() / state.getBoost();
    norm.setByte(encodeNormValue(state.getBoost(), numTerms));
  }

