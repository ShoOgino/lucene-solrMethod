    @Override
    protected Object createValue(final AtomicReader reader, Entry entryKey, boolean setDocsWithField)
        throws IOException {
      IntParser parser = (IntParser) entryKey.custom;
      if (parser == null) {
        // Confusing: must delegate to wrapper (vs simply
        // setting parser =
        // DEFAULT_INT_PARSER/NUMERIC_UTILS_INT_PARSER) so
        // cache key includes
        // DEFAULT_INT_PARSER/NUMERIC_UTILS_INT_PARSER:
        try {
          return wrapper.getInts(reader, entryKey.field, DEFAULT_INT_PARSER, setDocsWithField);
        } catch (NumberFormatException ne) {
          return wrapper.getInts(reader, entryKey.field, NUMERIC_UTILS_INT_PARSER, setDocsWithField);
        }
      }

      final IntParser finalParser = parser;
      // nocommit how to avoid double alloc in numeric field
      // case ...
      final int[] values = new int[reader.maxDoc()];

      Uninvert u = new Uninvert() {
        private int currentValue;

        @Override
        public void visitTerm(BytesRef term) {
          currentValue = finalParser.parseInt(term);
        }

        @Override
        public void visitDoc(int docID) {
          values[docID] = currentValue;
        }
      };

      u.uninvert(reader, entryKey.field, setDocsWithField);

      if (setDocsWithField) {
        wrapper.setDocsWithField(reader, entryKey.field, u.docsWithField);
      }

      return new IntsFromArray(values);
    }

