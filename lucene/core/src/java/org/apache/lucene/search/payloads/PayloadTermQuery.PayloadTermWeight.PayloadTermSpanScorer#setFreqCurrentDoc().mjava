      @Override
      protected void setFreqCurrentDoc() throws IOException {
        freq = 0.0f;
        numMatches = 0;
        payloadScore = 0;
        payloadsSeen = 0;
        int startPos = spans.nextStartPosition();
        assert startPos != Spans.NO_MORE_POSITIONS : "initial startPos NO_MORE_POSITIONS, spans="+spans;
        do {
          int matchLength = spans.endPosition() - startPos;
          if (docScorer == null) {
            freq = 1;
            return;
          }
          freq += docScorer.computeSlopFactor(matchLength);
          numMatches++;
          payloadCollector.reset();
          spans.collect(payloadCollector);
          processPayload();

          startPos = spans.nextStartPosition();
        } while (startPos != Spans.NO_MORE_POSITIONS);
      }

