    @Override
    public float score(int doc, float freq) throws IOException {
      final float raw = tf(freq) * weightValue; // compute tf(f)*weight

      if (norms == null) {
        return raw;
      } else {
        boolean found = norms.advanceExact(doc);
        assert found;
        float normValue = normTable[(int) (norms.longValue() & 0xFF)];
        return raw * normValue;  // normalize for field
      }
    }

