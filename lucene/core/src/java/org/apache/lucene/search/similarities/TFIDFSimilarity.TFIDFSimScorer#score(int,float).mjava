    @Override
    public float score(int doc, float freq) throws IOException {
      final float raw = tf(freq) * weightValue; // compute tf(f)*weight

      if (norms == null) {
        return raw;
      } else {
        float normValue;
        if (norms.advanceExact(doc)) {
          normValue = normTable[(int) (norms.longValue() & 0xFF)];
        } else {
          normValue = 0;
        }
        return raw * normValue;  // normalize for field
      }
    }

