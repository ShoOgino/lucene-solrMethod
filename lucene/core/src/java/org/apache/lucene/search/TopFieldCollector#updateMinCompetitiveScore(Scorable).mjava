  protected void updateMinCompetitiveScore(Scorable scorer) throws IOException {
    if (canSetMinScore
          && hitsThresholdChecker.isThresholdReached()
          && ((bottomValueChecker != null && bottomValueChecker.getBottomValue() > 0) || queueFull)) {
      assert firstComparator != null;
      float bottomScore = 0f;

      if (queueFull) {
        bottomScore = firstComparator.value(bottom.slot);
        if (bottomValueChecker != null) {
          bottomValueChecker.updateThreadLocalBottomValue(bottomScore);
        }
      }

      // Global bottom can only be greater than or equal to the local bottom score
      // The updating of global bottom score for this hit before getting here should
      // ensure that
      if (bottomValueChecker != null && bottomValueChecker.getBottomValue() > bottomScore) {
        bottomScore = bottomValueChecker.getBottomValue();
      }

      scorer.setMinCompetitiveScore(bottomScore);
      totalHitsRelation = TotalHits.Relation.GREATER_THAN_OR_EQUAL_TO;
    }
  }

