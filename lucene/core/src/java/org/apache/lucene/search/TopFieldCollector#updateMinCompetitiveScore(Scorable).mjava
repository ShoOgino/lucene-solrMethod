  protected void updateMinCompetitiveScore(Scorable scorer) throws IOException {
    if (canSetMinScore && hitsThresholdChecker.isThresholdReached()
          && (queueFull || (bottomValueChecker != null && bottomValueChecker.getBottomValue() > 0f))) {
      float maxMinScore = Float.NEGATIVE_INFINITY;
      if (queueFull) {
        assert bottom != null && firstComparator != null;
        maxMinScore = firstComparator.value(bottom.slot);
        if (bottomValueChecker != null) {
          bottomValueChecker.updateThreadLocalBottomValue(maxMinScore);
        }
      }
      if (bottomValueChecker != null) {
        maxMinScore = Math.max(maxMinScore, bottomValueChecker.getBottomValue());
      }
      assert maxMinScore > 0f;
      scorer.setMinCompetitiveScore(maxMinScore);
      minScore = maxMinScore;
      totalHitsRelation = TotalHits.Relation.GREATER_THAN_OR_EQUAL_TO;
    }
  }

