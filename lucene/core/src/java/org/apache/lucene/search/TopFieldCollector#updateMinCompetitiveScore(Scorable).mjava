  protected void updateMinCompetitiveScore(Scorable scorer) throws IOException {
    if (canSetMinScore && hitsThresholdChecker.isThresholdReached()) {
      boolean hasChanged = false;
      if (queueFull) {
        assert bottom != null && firstComparator != null;
        float localMinScore = firstComparator.value(bottom.slot);
        if (localMinScore > minCompetitiveScore) {
          hasChanged = true;
          minCompetitiveScore = localMinScore;
          if (bottomValueChecker != null) {
            bottomValueChecker.updateThreadLocalBottomValue(minCompetitiveScore);
          }
        }
      }
      if (bottomValueChecker != null) {
        float globalMinScore = bottomValueChecker.getBottomValue();
        if (globalMinScore > minCompetitiveScore) {
          hasChanged = true;
          minCompetitiveScore = globalMinScore;
        }
      }
      if (hasChanged) {
        scorer.setMinCompetitiveScore(minCompetitiveScore);
        totalHitsRelation = TotalHits.Relation.GREATER_THAN_OR_EQUAL_TO;
      }
    }
  }

