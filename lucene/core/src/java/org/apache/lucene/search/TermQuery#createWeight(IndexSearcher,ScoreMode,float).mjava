  @Override
  public Weight createWeight(IndexSearcher searcher, ScoreMode scoreMode, float boost) throws IOException {
    if (perReaderTermState == null)
      throw new IllegalStateException("TermQuery must be rewritten before use");
    if (perReaderTermState.wasBuiltFor(searcher.getTopReaderContext()) == false)
      throw new IllegalStateException("TermQuery was built against a different IndexReader");
    return new TermWeight(searcher, scoreMode.needsScores(), boost, perReaderTermState);
  }

