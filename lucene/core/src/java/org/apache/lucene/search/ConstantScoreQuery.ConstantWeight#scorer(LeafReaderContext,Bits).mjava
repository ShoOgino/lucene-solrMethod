    @Override
    public Scorer scorer(LeafReaderContext context, Bits acceptDocs) throws IOException {
      if (filter != null) {
        assert query == null;
        final DocIdSet dis = filter.getDocIdSet(context, acceptDocs);
        if (dis == null) {
          return null;
        }
        final DocIdSetIterator disi = dis.iterator();
        if (disi == null)
          return null;
        return new ConstantDocIdSetIteratorScorer(disi, this, queryWeight);
      } else {
        assert query != null && innerWeight != null;
        Scorer scorer = innerWeight.scorer(context, acceptDocs);
        if (scorer == null) {
          return null;
        }
        return new ConstantScoreScorer(scorer, queryWeight);
      }


    }

