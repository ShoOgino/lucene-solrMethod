    public long addDocument(Iterable<? extends IndexableField> d) throws IOException {
      writer.addDocument(d);
      // Return gen as of when indexing finished:
      return indexingGen.get();
    }

