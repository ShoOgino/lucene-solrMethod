    @Override
    public TopScorer topScorer(AtomicReaderContext context, boolean scoreDocsInOrder, Bits acceptDocs) throws IOException {
      final DocIdSetIterator disi;
      if (filter != null) {
        assert query == null;
        return super.topScorer(context, scoreDocsInOrder, acceptDocs);
      } else {
        assert query != null && innerWeight != null;
        TopScorer topScorer = innerWeight.topScorer(context, scoreDocsInOrder, acceptDocs);
        if (topScorer == null) {
          return null;
        }
        return new ConstantTopScorer(topScorer, this, queryWeight);
      }
    }

