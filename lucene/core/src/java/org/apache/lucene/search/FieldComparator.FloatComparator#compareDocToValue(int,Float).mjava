    @Override
    public int compareDocToValue(int doc, Float valueObj) {
      final float value = valueObj.floatValue();
      float docValue = currentReaderValues.get(doc);
      // Test for docValue == 0 to save Bits.get method call for
      // the common case (doc has value and value is non-zero):
      if (docsWithField != null && docValue == 0 && !docsWithField.get(doc)) {
        docValue = missingValue;
      }
      return Float.compare(docValue, value);
    }

