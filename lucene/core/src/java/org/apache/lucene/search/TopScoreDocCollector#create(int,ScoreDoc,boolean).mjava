  /**
   * Creates a new {@link TopScoreDocCollector} given the number of hits to
   * collect, the bottom of the previous page, and whether the total hit count
   * is needed.
   *
   * <p><b>NOTE</b>: If {@code trackTotalHits} is {@code false} then the
   * {@link TopDocs#totalHits} of the returned {@link TopDocs} will be an
   * approximation and may be completely off.
   * <p><b>NOTE</b>: The instances returned by this method
   * pre-allocate a full array of length
   * <code>numHits</code>, and fill the array with sentinel
   * objects.
   */
  public static TopScoreDocCollector create(int numHits, ScoreDoc after, boolean trackTotalHits) {

    if (numHits <= 0) {
      throw new IllegalArgumentException("numHits must be > 0; please use TotalHitCountCollector if you just need the total hit count");
    }

    if (after == null) {
      return new SimpleTopScoreDocCollector(numHits, trackTotalHits);
    } else {
      return new PagingTopScoreDocCollector(numHits, after);
    }
  }

