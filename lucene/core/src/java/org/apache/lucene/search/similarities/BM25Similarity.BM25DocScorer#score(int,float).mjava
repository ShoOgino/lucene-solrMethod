    @Override
    public float score(int doc, float freq) throws IOException {
      // if there are no norms, we act as if b=0
      double norm;
      if (norms == null) {
        norm = k1;
      } else {
        boolean found = norms.advanceExact(doc);
        assert found;
        norm = cache[((byte) norms.longValue()) & 0xFF];
      }
      return weightValue * (float) (freq / (freq + norm));
    }

