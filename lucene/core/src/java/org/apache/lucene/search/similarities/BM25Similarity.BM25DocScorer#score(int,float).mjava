    @Override
    public float score(int doc, float freq) throws IOException {
      // if there are no norms, we act as if b=0
      double norm;
      if (norms == null) {
        norm = k1;
      } else {
        if (norms.advanceExact(doc)) {
          norm = cache[((byte) norms.longValue()) & 0xFF];
        } else {
          norm = cache[0];
        }
      }
      return weightValue * (float) (freq / (freq + norm));
    }

