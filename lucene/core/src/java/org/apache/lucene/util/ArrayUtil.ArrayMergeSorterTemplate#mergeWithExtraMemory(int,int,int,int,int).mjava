    private void mergeWithExtraMemory(int lo, int pivot, int hi, int len1, int len2) {
      System.arraycopy(a, lo, tmp, 0, len1);
      int i = 0, j = pivot, dest = lo;
      while (i < len1 && j < hi) {
        if (compare(tmp[i], a[j]) <= 0) {
          a[dest++] = tmp[i++];
        } else {
          a[dest++] = a[j++];
        }
      }
      while (i < len1) {
        a[dest++] = tmp[i++];
      }
      while (j < hi) {
        a[dest++] = a[j++];
      }
      assert dest == hi;
    }

