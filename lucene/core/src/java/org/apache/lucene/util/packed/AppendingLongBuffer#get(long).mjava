  /** Get a value from this buffer. 
   *  <p>
   *  <b>NOTE</b>: This class is not really designed for random access!
   *  You will likely get better performance by using packed ints in another way! */
  public long get(long index) {
    assert index < size() : "index=" + index + ",size=" + size(); // TODO: do a better check, and throw IndexOutOfBoundsException?
                           // This class is currently only used by the indexer.
    int block = (int) (index >> BLOCK_BITS);
    int element = (int) (index & BLOCK_MASK);
    if (block == valuesOff) {
      return pending[element];
    } else if (values[block] == null) {
      return minValues[block];
    } else {
      return minValues[block] + values[block].get(element);
    }
  }

