    public LightAutomaton finish() {
      //System.out.println("LA.Builder.finish: count=" + (nextTransition/4));
      // nocommit: we could make this more efficient,
      // e.g. somehow xfer the int[] to the automaton, or
      // alloc exactly the right size from the automaton
      //System.out.println("finish pending");
      sorter.sort(0, nextTransition/4);
      int upto = 0;
      while (upto < nextTransition) {
        a.addTransition(transitions[upto],
                        transitions[upto+1],
                        transitions[upto+2],
                        transitions[upto+3]);
        upto += 4;
      }

      a.finish();
      return a;
    }

