  /**
   * Build a {@link DocIdSet} that contains all doc ids that have been added.
   * This method may return <tt>null</tt> if no documents were addded to this
   * builder.
   * NOTE: this is a destructive operation, the builder should not be used
   * anymore after this method has been called.
   */
  public DocIdSet build() {
    final DocIdSet result = denseSet != null ? denseSet : sparseSet;
    denseSet = null;
    sparseSet = null;
    costUpperBound = 0;
    return result;
  }

