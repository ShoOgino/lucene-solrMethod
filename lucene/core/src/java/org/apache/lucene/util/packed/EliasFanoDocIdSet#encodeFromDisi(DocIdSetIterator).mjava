  /** Encode the document ids from a DocIdSetIterator.
   *  @param disi This DocIdSetIterator should provide document ids that are consistent
   *              with <code>numValues</code> and <code>upperBound</code> as provided to the constructor.  
   */
  public void encodeFromDisi(DocIdSetIterator disi) throws IOException {
    while (efEncoder.numEncoded < efEncoder.numValues) {
      int x = disi.nextDoc();
      if (x == DocIdSetIterator.NO_MORE_DOCS) {
        throw new IllegalArgumentException("disi: " + disi.toString()
            + "\nhas " + efEncoder.numEncoded
            + " docs, but at least " + efEncoder.numValues + " are required.");
      }
      efEncoder.encodeNext(x);
    }
  }

