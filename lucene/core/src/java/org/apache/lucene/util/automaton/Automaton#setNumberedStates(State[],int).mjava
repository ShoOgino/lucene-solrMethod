  public void setNumberedStates(State[] states, int count) {
    assert count <= states.length;
    // TODO: maybe we can eventually allow for oversizing here...
    if (count < states.length) {
      final State[] newArray = new State[count];
      System.arraycopy(states, 0, newArray, 0, count);
      numberedStates = newArray;
    } else {
      numberedStates = states;
    }
  }

