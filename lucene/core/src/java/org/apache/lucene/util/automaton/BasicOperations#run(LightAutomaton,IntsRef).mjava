  public static boolean run(LightAutomaton a, IntsRef s) {
    // nocommit too slow?
    assert isDeterministic(a);
    int state = 0;
    for (int i=0;i<s.length;i++) {
      int nextState = a.step(state, s.ints[s.offset+i]);
      if (nextState == -1) {
        return false;
      }
      state = nextState;
    }
    return a.isAccept(state);
  }

