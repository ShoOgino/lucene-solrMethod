  private static LightPathNode getNode(LightPathNode[] nodes, int index) {
    assert index < nodes.length;
    if (nodes[index] == null) {
      nodes[index] = new LightPathNode();
    }
    return nodes[index];
  }

