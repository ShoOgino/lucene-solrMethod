  /**
   * Compute the cardinality of this set.
   * NOTE: this operation runs in linear time.
   */
  public int cardinality() {
    int cardinality = 0;
    for (Block block : blocks) {
      if (block != null) {
        final int numLongs = Long.bitCount(block.index);
        for (int i = 0; i < numLongs; ++i) {
          cardinality += Long.bitCount(block.bits[i]);
        }
      }
    }
    return cardinality;
  }

