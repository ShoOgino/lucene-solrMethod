    private void mergeWithExtraMemory(int lo, int pivot, int hi, int len1, int len2) {
      for (int i = 0; i < len1; ++i) {
        tmp[i] = list.get(lo + i);
      }
      int i = 0, j = pivot, dest = lo;
      while (i < len1 && j < hi) {
        if (compare(tmp[i], list.get(j)) <= 0) {
          list.set(dest++, tmp[i++]);
        } else {
          list.set(dest++, list.get(j++));
        }
      }
      while (i < len1) {
        list.set(dest++, tmp[i++]);
      }
      while (j < hi) {
        list.set(dest++, list.get(j++));
      }
      assert dest == hi;
    }

