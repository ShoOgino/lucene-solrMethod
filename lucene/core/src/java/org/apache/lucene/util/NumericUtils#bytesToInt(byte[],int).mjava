  public static int bytesToInt(byte[] src, int offset) {
    int x = 0;
    for (int i = 0; i < 4; i++) {
      x |= (src[offset+i] & 0xff) << (24-i*8);
    }
    // Re-flip the sign bit to restore the original value:
    return x ^ 0x80000000;
  }

