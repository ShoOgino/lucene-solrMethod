  /** Return the cumulated number of docs that have points across all leaves
   * of the given {@link IndexReader}. Leaves that do not have points for the
   * given field are ignored.
   *  @see PointValues#getDocCount(String) */
  public static int getDocCount(IndexReader reader, String field) throws IOException {
    int count = 0;
    for (LeafReaderContext ctx : reader.leaves()) {
      FieldInfo info = ctx.reader().getFieldInfos().fieldInfo(field);
      if (info == null || info.getPointDimensionCount() == 0) {
        continue;
      }
      PointValues values = ctx.reader().getPointValues();
      count += values.getDocCount(field);
    }
    return count;
  }

