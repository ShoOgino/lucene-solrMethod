    @Override
    public void process(IndexWriter writer) throws IOException {
      try {
        packet.apply(writer);
      } catch (Throwable t) {
        try {
          writer.onTragicEvent(t, "applyUpdatesPacket");
        } catch (Throwable t1) {
          t.addSuppressed(t1);
        }
        throw t;
      }
      writer.flushDeletesCount.incrementAndGet();
    }

