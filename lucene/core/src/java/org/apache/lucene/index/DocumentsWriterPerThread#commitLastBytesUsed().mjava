  /**
   * Commits the current {@link #bytesUsed()} and stores it's value for later reuse.
   * The last committed bytes used can be retrieved via {@link #getLastCommittedBytesUsed()}
   * @return the delta between the current {@link #bytesUsed()} and the current {@link #getLastCommittedBytesUsed()}
   */
  long commitLastBytesUsed() {
    assert isHeldByCurrentThread();
    long delta = bytesUsed() - lastCommittedBytesUsed;
    lastCommittedBytesUsed += delta;
    return delta;
  }

