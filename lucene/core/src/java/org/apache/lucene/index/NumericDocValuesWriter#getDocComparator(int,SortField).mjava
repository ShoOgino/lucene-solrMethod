  @Override
  Sorter.DocComparator getDocComparator(int maxDoc, SortField sortField) throws IOException {
    assert finalValues == null;
    finalValues = pending.build();
    final BufferedNumericDocValues docValues =
        new BufferedNumericDocValues(finalValues, docsWithField.iterator());
    return Sorter.getDocComparator(maxDoc, sortField, () -> null, () -> docValues);
  }

