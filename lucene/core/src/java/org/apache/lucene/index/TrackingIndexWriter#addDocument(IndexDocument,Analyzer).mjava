  /** Calls {@link
   *  IndexWriter#addDocument(IndexDocument,Analyzer)} and
   *  returns the generation that reflects this change. */
  public long addDocument(IndexDocument d, Analyzer a) throws IOException {
    writer.addDocument(d, a);
    // Return gen as of when indexing finished:
    return indexingGen.get();
  }

