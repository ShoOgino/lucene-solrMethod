  /**
   * Sets the commit user data map, controlling whether to advance the {@link SegmentInfos#getVersion}.
   *
   * @see #setCommitData(Map)
   *
   * @lucene.internal */
  public final synchronized void setCommitData(Map<String,String> commitUserData, boolean doIncrementVersion) {
    segmentInfos.setUserData(new HashMap<>(commitUserData), doIncrementVersion);
    changeCount.incrementAndGet();
  }

