  /** Returns a {@link SegmentReader} while applying field updates if requested. */
  public SegmentReader getReader(boolean applyFieldUpdates, IOContext context) throws IOException {
    // if we need to apply field updates, we call writeLiveDocs and change
    // SegmentInfos. Therefore must hold the lock on IndexWriter. This code
    // ensures that readers that don't need to apply updates don't pay the
    // cost of obtaining it.
    if (applyFieldUpdates && hasFieldUpdates()) {
      synchronized (writer) {
//        System.out.println("[" + Thread.currentThread().getName() + "] RLD.getReader: getReaderWithUpdates " + info);
        return doGetReaderWithUpdates(context);
      }
    } else {
//      System.out.println("[" + Thread.currentThread().getName() + "] RLD.getReader: getReader no updates " + info);
      return doGetReader(context);
    }
  }

