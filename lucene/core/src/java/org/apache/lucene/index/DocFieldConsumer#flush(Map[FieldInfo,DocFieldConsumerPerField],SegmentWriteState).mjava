  /** Called when DocumentsWriterPerThread decides to create a new
   *  segment */
  abstract void flush(Map<FieldInfo, DocFieldConsumerPerField> fieldsToFlush, SegmentWriteState state) throws IOException;

