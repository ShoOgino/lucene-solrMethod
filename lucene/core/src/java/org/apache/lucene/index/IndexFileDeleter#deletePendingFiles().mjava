  public void deletePendingFiles() throws IOException {
    assert locked();
    if (deletable != null) {
      List<String> oldDeletable = deletable;
      deletable = null;
      int size = oldDeletable.size();
      for(int i=0;i<size;i++) {
        String fileName = oldDeletable.get(i);
        if (infoStream.isEnabled("IFD")) {
          infoStream.message("IFD", "delete pending file " + fileName);
        }
        RefCount rc = refCounts.get(fileName);
        if (rc != null && rc.count > 0) {
          // LUCENE-5904: should never happen!  This means we are about to pending-delete a referenced index file
          assert false: "fileName=" + fileName + " is in pending delete list but also has refCount=" + rc.count;
        } else {
          deleteFile(fileName);
        }
      }
    }
  }

