  /** Reuse API, currently only used by postings during merge */
  public void reset() throws IOException {
    if (queue != null) {
      // caller may not have fully consumed the queue:
      queue.clear();
      for(T sub : subs) {
        while (true) {
          int docID = sub.nextDoc();
          if (docID == NO_MORE_DOCS) {
            // all docs in this sub were deleted; do not add it to the queue!
            break;
          }

          int mappedDocID = sub.docMap.get(docID);
          if (mappedDocID == -1) {
            // doc was deleted
            continue;
          } else {
            sub.mappedDocID = mappedDocID;
            queue.add(sub);
            break;
          }
        }
      }
      first = true;
    } else if (subs.size() > 0) {
      current = subs.get(0);
      nextIndex = 1;
    } else {
      current = null;
      nextIndex = 0;
    }
  }

