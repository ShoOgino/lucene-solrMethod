  /** Reuse API, currently only used by postings during merge */
  public void reset() {
    if (queue != null) {
      assert queue.size() == 0;
      for(T sub : subs) {
        while (true) {
          int docID = sub.nextDoc();
          if (docID == NO_MORE_DOCS) {
            // all docs in this sub were deleted; do not add it to the queue!
            break;
          } else if (sub.liveDocs != null && sub.liveDocs.get(docID) == false) {
            // nocommit is it sub's job to skip deleted docs?
            continue;
          } else {
            sub.mappedDocID = sub.docMap.get(docID);
            assert sub.mappedDocID != -1;
            queue.add(sub);
            break;
          }
        }
      }
      first = true;
    } else {
      if (subs.size() > 0) {
        current = subs.get(0);
        nextIndex = 1;
      } else {
        current = null;
        nextIndex = 0;
      }
    }
  }

