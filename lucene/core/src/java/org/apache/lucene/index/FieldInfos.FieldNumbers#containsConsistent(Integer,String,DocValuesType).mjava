    /**
     * Sets the given field number and name if not yet set. 
     */
    // nocommit: why is docvalues involved with global field numbers?
    // nocommit: and is it even tested...
    /*
    synchronized void setIfNotSet(int fieldNumber, String fieldName, DocValuesType dvType) {
      final Integer boxedFieldNumber = Integer.valueOf(fieldNumber);
      if (!numberToName.containsKey(boxedFieldNumber)
          && !nameToNumber.containsKey(fieldName)
          && !docValuesType.containsKey(dvType)) {
        numberToName.put(boxedFieldNumber, fieldName);
        nameToNumber.put(fieldName, boxedFieldNumber);
        docValuesType.put(fieldName, dvType);
      } else {
        // nocommit should this be a real check?
        assert containsConsistent(boxedFieldNumber, fieldName, dvType);
      }
    }
    */
    
    // used by assert
    synchronized boolean containsConsistent(Integer number, String name, DocValuesType dvType) {
      return name.equals(numberToName.get(number))
          && number.equals(nameToNumber.get(name)) &&
        (dvType == null || docValuesType.get(name) == null || dvType == docValuesType.get(name));
    }

