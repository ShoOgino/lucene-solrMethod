  /** Call this to get the (merged) FieldInfos for a
   *  composite reader */
  public static FieldInfos getMergedFieldInfos(IndexReader reader) {
    final List<AtomicReader> subReaders = new ArrayList<AtomicReader>();
    ReaderUtil.gatherSubReaders(subReaders, reader);
    // nocommit: this should be read-only
    final MutableFieldInfos fieldInfos = new MutableFieldInfos();
    for(AtomicReader subReader : subReaders) {
      fieldInfos.add(subReader.getFieldInfos());
    }
    return fieldInfos;
  }

