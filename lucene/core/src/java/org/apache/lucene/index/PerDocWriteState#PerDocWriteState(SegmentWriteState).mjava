  /** Creates a {@code PerDocWriteState}, copying fields
   *  from another and allocating a new {@link #bytesUsed}. */
  public PerDocWriteState(SegmentWriteState state) {
    infoStream = state.infoStream;
    directory = state.directory;
    segmentInfo = state.segmentInfo;
    segmentSuffix = state.segmentSuffix;
    bytesUsed = Counter.newCounter();
    context = state.context;
  }

