  public Collection<String> files() throws IOException {
    // nocommit make sure when we are called we really have
    // files set ...
    if (setFiles == null) {
      throw new IllegalStateException("files were not computed yet");
    }

    Set<String> files = new HashSet<String>(setFiles);

    // nocommit make this take list instead...?
    // Must separately add any live docs files:
    codec.liveDocsFormat().files(this, files);

    return new ArrayList<String>(files);
  }

