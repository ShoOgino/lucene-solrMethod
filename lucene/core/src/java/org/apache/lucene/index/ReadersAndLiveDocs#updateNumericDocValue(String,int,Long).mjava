  /**
   * Updates the numeric doc value of {@code docID} under {@code field} to the
   * given {@code value}.
   */
  public synchronized void updateNumericDocValue(String field, int docID, Long value) {
    assert Thread.holdsLock(writer);
    assert docID >= 0 && docID < reader.maxDoc() : "out of bounds: docid=" + docID + " maxDoc=" + reader.maxDoc() + " seg=" + info.info.name + " docCount=" + info.info.getDocCount();
    Map<Integer,Long> updates = numericUpdates.get(field);
    if (updates == null) {
      updates = new HashMap<Integer,Long>();
      numericUpdates.put(field, updates);
    }
    updates.put(docID, value);
  }

