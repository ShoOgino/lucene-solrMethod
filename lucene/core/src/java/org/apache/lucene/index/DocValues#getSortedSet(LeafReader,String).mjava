  /**
   * Returns SortedSetDocValues for the reader, or {@link #emptySortedSet} if it has none. 
   */
  public static SortedSetDocValues getSortedSet(LeafReader in, String field) throws IOException {
    SortedSetDocValues dv = in.getSortedSetDocValues(field);
    if (dv == null) {
      SortedDocValues sorted = in.getSortedDocValues(field);
      if (sorted == null) {
        return emptySortedSet();
      }
      return singleton(sorted);
    }
    return dv;
  }

