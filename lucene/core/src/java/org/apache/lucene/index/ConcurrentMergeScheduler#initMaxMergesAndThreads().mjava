  private synchronized void initMaxMergesAndThreads() throws IOException {
    if (maxThreadCount == AUTO_DETECT_MERGES_AND_THREADS) {
      assert writer != null;
      boolean spins = IOUtils.spins(writer.getDirectory());
      setDefaultMaxMergesAndThreads(spins);
      if (verbose()) {
        message("initMaxMergesAndThreads spins=" + spins + " maxThreadCount=" + maxThreadCount + " maxMergeCount=" + maxMergeCount);
      }
    }
  }

