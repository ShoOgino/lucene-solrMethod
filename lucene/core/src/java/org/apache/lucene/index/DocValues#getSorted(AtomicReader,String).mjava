  /**
   * Returns SortedDocValues for the reader, or {@link #emptySorted} if it has none. 
   */
  public static SortedDocValues getSorted(AtomicReader in, String field) throws IOException {
    SortedDocValues dv = in.getSortedDocValues(field);
    if (dv == null) {
      return emptySorted();
    } else {
      return dv;
    }
  }

