  /**
   * Updates a document's NumericDocValue for <code>field</code> to the given
   * <code>value</code>. This method can be used to 'unset' a document's value
   * by passing {@code null} as the new value. Also, you can only update fields
   * that already exist in the index, not add new fields through this method.
   * 
   * <p>
   * <b>NOTE:</b> it is currently not allowed to update the value of documents
   * in a segment where the field does not exist (even though it may exist in
   * other segments). If you try that, you will hit an
   * {@link UnsupportedOperationException} when the segment is later flushed
   * (following an NRT reader reopen, commit, forceMerge etc.).
   * 
   * <p>
   * <b>NOTE</b>: if this method hits an OutOfMemoryError you should immediately
   * close the writer. See <a href="#OOME">above</a> for details.
   * </p>
   * 
   * @param term
   *          the term to identify the document(s) to be updated
   * @param field
   *          field name of the NumericDocValues field
   * @param value
   *          new value for the field
   * @throws CorruptIndexException
   *           if the index is corrupt
   * @throws IOException
   *           if there is a low-level IO error
   */
  // TODO (DVU_FIELDINFOS_GEN) remove the paragraph on updating segments without the field not allowed
  public void updateNumericDocValue(Term term, String field, Long value) throws IOException {
    ensureOpen();
    if (!globalFieldNumberMap.contains(field, DocValuesType.NUMERIC)) {
      throw new IllegalArgumentException("can only update existing numeric-docvalues fields!");
    }
    try {
      docWriter.updateNumericDocValue(term, field, value);
    } catch (OutOfMemoryError oom) {
      handleOOM(oom, "updateNumericDocValue");
    }
  }

