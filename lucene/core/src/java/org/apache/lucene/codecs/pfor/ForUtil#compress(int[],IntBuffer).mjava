  /** Compress given int[] into Integer buffer, with For format
   *
   * @param data        uncompressed data
   * @param size        num of ints to compress
   * @param intBuffer   integer buffer to hold compressed data
   * @return encoded block byte size
   */
  public static int compress(final int[] data, IntBuffer intBuffer) {
    int numBits=getNumBits(data);
    if (numBits == 0) {
      return compressDuplicateBlock(data,intBuffer);
    }
 
    int size=data.length;
    int encodedSize = (size*numBits+31)/32;

    for (int i=0; i<size; ++i) {
      encodeNormalValue(intBuffer,i,data[i], numBits);
    }

    return getHeader(encodedSize, numBits);
  }

