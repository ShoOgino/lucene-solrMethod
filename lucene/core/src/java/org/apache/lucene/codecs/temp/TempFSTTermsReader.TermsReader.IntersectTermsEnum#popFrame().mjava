      Frame popFrame() throws IOException {
        final Frame pop = stack[level--], top = topFrame();
        if (top.fstArc.isFinal()) {
          meta = top.fstArc.nextFinalOutput;
        } else {
          meta = top.fstArc.output;
        }
        term = shrink();
        //if (DEBUG) System.out.println("  term=" + term + " level=" + level);
        return pop;
      }

