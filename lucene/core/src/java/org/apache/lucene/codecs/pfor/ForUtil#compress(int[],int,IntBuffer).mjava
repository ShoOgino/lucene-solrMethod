  public static int compress(final int[] data, int size, IntBuffer intBuffer) {
    int numBits=getNumBits(data,size);
  
    for (int i=0; i<size; ++i) {
      encodeNormalValue(intBuffer,i,data[i], numBits);
    }
    // encode header
    encodeHeader(intBuffer, size, numBits);

    return (HEADER_INT_SIZE+(size*numBits+31)/32)*4;
  }

