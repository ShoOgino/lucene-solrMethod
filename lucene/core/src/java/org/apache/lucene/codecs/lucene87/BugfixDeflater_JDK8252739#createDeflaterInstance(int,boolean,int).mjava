  /**
   * Creates a {@link Deflater} instance, which works around JDK-8252739.
   * <p>
   * Use this whenever you intend to call {@link #setDictionary(byte[], int, int)} or
   * {@link #setDictionary(java.nio.ByteBuffer)} on a {@code Deflater}.
   * */
  public static Deflater createDeflaterInstance(int level, boolean nowrap, int dictLength) {
    if (dictLength < 0) {
      throw new IllegalArgumentException("dictLength must be >= 0");
    }
    if (IS_BUGGY_JDK) {
      return new BugfixDeflater_JDK8252739(level, nowrap, dictLength);
    } else {
      return new Deflater(level, nowrap);
    }
  }

