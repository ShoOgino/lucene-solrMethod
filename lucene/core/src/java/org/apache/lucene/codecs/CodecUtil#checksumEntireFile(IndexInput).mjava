  /** 
   * Clones the provided input, reads all bytes from the file, and calls {@link #checkFooter} 
   * <p>
   * Note that this method may be slow, as it must process the entire file.
   * If you just need to extract the checksum value, call {@link #retrieveChecksum}.
   */
  public static long checksumEntireFile(IndexInput input) throws IOException {
    IndexInput clone = input.clone();
    clone.seek(0);
    ChecksumIndexInput in = new BufferedChecksumIndexInput(clone);
    assert in.getFilePointer() == 0;
    final byte[] buffer = new byte[1024];
    long bytesToRead = in.length() - footerLength();
    for (long skipped = 0; skipped < bytesToRead; ) {
      final int toRead = (int) Math.min(bytesToRead - skipped, buffer.length);
      in.readBytes(buffer, 0, toRead);
      skipped += toRead;
    }
    return checkFooter(in);
  }

