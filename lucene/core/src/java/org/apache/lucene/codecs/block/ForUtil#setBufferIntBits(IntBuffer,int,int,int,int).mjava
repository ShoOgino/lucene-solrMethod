  static void setBufferIntBits(IntBuffer intBuffer, int intPos, int firstBitPos, int numBits, int value) {
    assert (value & ~MASK[numBits]) == 0;
    // safely discards those msb parts when firstBitPos+numBits>32
    intBuffer.put(intPos,
          (intBuffer.get(intPos) & ~(MASK[numBits] << firstBitPos)) 
          | (value << firstBitPos));
  }

