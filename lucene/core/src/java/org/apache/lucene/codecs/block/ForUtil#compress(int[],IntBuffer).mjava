  /** Compress given int[] into Integer buffer, with For format
   *
   * @param data        uncompressed data
   * @param intBuffer   integer buffer to hold compressed data
   * @return the header for current block 
   */
  public static int compress(final int[] data, IntBuffer intBuffer) {
    int numBits = getNumBits(data);
    if (numBits == 0) {
      return compressDuplicateBlock(data, intBuffer);
    }
 
    int encodedSize = (blockSize*numBits+31)/32;

    for (int i=0; i<blockSize; ++i) {
      encodeNormalValue(intBuffer, i, data[i], numBits);
    }

    return getHeader(encodedSize, numBits);
  }

