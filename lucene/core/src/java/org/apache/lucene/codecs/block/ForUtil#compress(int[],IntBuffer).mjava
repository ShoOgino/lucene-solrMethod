  /** Compress given int[] into Integer buffer, with For format
   *
   * @param data        uncompressed data
   * @param intBuffer   integer buffer to hold compressed data
   * @return the header for the current block 
   */
  static int compress(final int[] data, IntBuffer intBuffer) {
    int numBits = getNumBits(data);
    if (numBits == 0) {
      return compressDuplicateBlock(data, intBuffer);
    }
 
    for (int i=0; i<blockSize; ++i) {
      assert data[i] >= 0;
      encodeNormalValue(intBuffer, i, data[i], numBits);
    }

    return numBits;
  }

