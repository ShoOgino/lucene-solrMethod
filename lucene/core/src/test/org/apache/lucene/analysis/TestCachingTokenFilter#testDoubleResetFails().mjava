  public void testDoubleResetFails() throws IOException {
    Analyzer analyzer = new MockAnalyzer(random());
    final TokenStream input = analyzer.tokenStream("field", "abc");
    CachingTokenFilter buffer = new CachingTokenFilter(input);
    buffer.reset();//ok
    try {
      buffer.reset();//bad (this used to work which we don't want)
      fail("didn't get expected exception");
    } catch (IllegalStateException e) {
      assertEquals("double reset()", e.getMessage());
    }
  }

