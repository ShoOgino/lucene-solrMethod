  public void testDoubleResetFails() throws IOException {
    assumeTrue("We want MockAnalyzer to detect double-reset", TEST_ASSERTS_ENABLED);
    Analyzer analyzer = new MockAnalyzer(random());
    final TokenStream input = analyzer.tokenStream("field", "abc");
    CachingTokenFilter buffer = new CachingTokenFilter(input);
    buffer.reset();//ok
    boolean madeIt = false;
    try {
      buffer.reset();//bad (this used to work which we don't want)
      madeIt = true;
    } catch (Throwable e) {
      //ignore
    }
    assertFalse(madeIt);
  }

