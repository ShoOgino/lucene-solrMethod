  // LUCENE-3590: fix off-by-one in subsequence, and fully obey interface
  public void testCharSequenceSubSequence() {
    CharSequence c = new CharsRef("abc");
    
    // slice
    assertEquals("a", c.subSequence(0, 1).toString());
    // empty subsequence
    assertEquals("", c.subSequence(0, 0).toString());
    
    try {
      c.subSequence(-1, 1);
      fail();
    } catch (IndexOutOfBoundsException expected) {
      // expected exception
    }
    
    try {
      c.subSequence(0, -1);
      fail();
    } catch (IndexOutOfBoundsException expected) {
      // expected exception
    }
    
    try {
      c.subSequence(0, 4);
      fail();
    } catch (IndexOutOfBoundsException expected) {
      // expected exception
    }
    
    try {
      c.subSequence(2, 1);
      fail();
    } catch (IndexOutOfBoundsException expected) {
      // expected exception
    }
  }

