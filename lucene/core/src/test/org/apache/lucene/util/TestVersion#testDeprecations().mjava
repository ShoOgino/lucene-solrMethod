  public void testDeprecations() throws Exception {
    Version values[] = Version.values();
    // all but the latest version should be deprecated
    for (int i = 0; i < values.length; i++) {
      if (i + 1 == values.length) {
        assertSame("Last constant must be LUCENE_CURRENT", Version.LUCENE_CURRENT, values[i]);
      }
      // TODO: Use isAnnotationPresent once bug in Java 8 is fixed (LUCENE-4808)
      final Annotation ann = Version.class.getField(values[i].name()).getAnnotation(Deprecated.class);
      if (i + 2 != values.length) {
        assertNotNull(values[i].name() + " should be deprecated", ann);
      } else {
        assertNull(values[i].name() + " should not be deprecated", ann);
      }
    }
  }

