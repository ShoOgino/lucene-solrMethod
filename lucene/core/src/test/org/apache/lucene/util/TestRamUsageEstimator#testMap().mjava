  public void testMap() {
    Map<String, Object> map = new HashMap<>();
    map.put("primitive", 1234L);
    map.put("string", "string");
    long actual = sizeOf(map);
    long estimated = RamUsageEstimator.sizeOfObject(map);
    assertTrue(estimated > actual); // RamUsageTester under-estimates the size of map

    // test recursion
    map.clear();
    map.put("string[]", new String[]{"foo", "bar"});
    map.put("map", Collections.singletonMap("foo", "bar"));
    map.put("self", map);
    actual = sizeOf(map);
    estimated = RamUsageEstimator.sizeOfObject(map);
    assertTrue(estimated > actual);
  }

