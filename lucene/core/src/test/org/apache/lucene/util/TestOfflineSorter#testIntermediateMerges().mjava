  public void testIntermediateMerges() throws Exception {
    // Sort 20 mb worth of data with 1mb buffer, binary merging.
    try (Directory dir = newDirectoryNoVirusScanner()) {
      SortInfo info = checkSort(dir, new OfflineSorter(dir, "foo", OfflineSorter.DEFAULT_COMPARATOR, BufferSize.megabytes(1), 2), 
          generateRandom((int)OfflineSorter.MB * 20));
      assertTrue(info.mergeRounds > 10);
    }
  }

