  public void testBinarySort() {
    for (int i = 0, c = atLeast(500); i < c; i++) {
      Integer[] a1 = createRandomArray(30), a2 = a1.clone();
      ArrayUtil.binarySort(a1);
      Arrays.sort(a2);
      assertArrayEquals(a2, a1);
      
      a1 = createRandomArray(30);
      a2 = a1.clone();
      ArrayUtil.binarySort(a1, Collections.reverseOrder());
      Arrays.sort(a2, Collections.reverseOrder());
      assertArrayEquals(a2, a1);
      // reverse back, so we can test that completely backwards sorted array (worst case) is working:
      ArrayUtil.binarySort(a1);
      Arrays.sort(a2);
      assertArrayEquals(a2, a1);
    }
  }

