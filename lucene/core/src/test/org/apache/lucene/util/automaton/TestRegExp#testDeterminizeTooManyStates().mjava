  /**
   * Compiles a regular expression that is prohibitively expensive to
   * determinize and expexts to catch an exception for it.
   */
  public void testDeterminizeTooManyStates() {
    // LUCENE-6046
    String source = "[ac]*a[ac]{50,200}";
    try {
      new RegExp(source).toAutomaton();
      fail();
    } catch (TooComplexToDeterminizeException e) {
      assert(e.getMessage().contains(source));
    }
  }

