  public void testLongCompare() {
    assertEquals(1, Integer.signum(FutureArrays.compare(longs("ab"), 0, 2, longs("a"), 0, 1)));
    assertEquals(1, Integer.signum(FutureArrays.compare(longs("ab"), 0, 2, longs("aa"), 0, 2)));
    assertEquals(0, Integer.signum(FutureArrays.compare(longs("ab"), 0, 2, longs("ab"), 0, 2)));
    assertEquals(-1, Integer.signum(FutureArrays.compare(longs("a"), 0, 1, longs("ab"), 0, 2)));

    expectThrows(IllegalArgumentException.class, () -> {
      FutureArrays.compare(longs("ab"), 2, 1, longs("a"), 0, 1);
    });
    expectThrows(IllegalArgumentException.class, () -> {
      FutureArrays.compare(longs("ab"), 2, 1, longs("a"), 1, 0);
    });
    expectThrows(NullPointerException.class, () -> {
      FutureArrays.compare(null, 0, 2, longs("a"), 0, 1);
    });
    expectThrows(NullPointerException.class, () -> {
      FutureArrays.compare(longs("ab"), 0, 2, null, 0, 1);
    });
    expectThrows(IndexOutOfBoundsException.class, () -> {
      FutureArrays.compare(longs("ab"), 0, 3, longs("a"), 0, 1);
    });
    expectThrows(IndexOutOfBoundsException.class, () -> {
      FutureArrays.compare(longs("ab"), 0, 2, longs("a"), 0, 2);
    });
  }

