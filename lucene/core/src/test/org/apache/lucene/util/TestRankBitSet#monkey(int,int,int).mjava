  public void monkey(int runs, int sizeMax, int setMax) {
    Random random = random();
    //Random random = new Random(87);
    for (int run = 0 ; run < runs ; run++) {
      final int size = random.nextInt(sizeMax-1)+1;
      RankBitSet rank = new RankBitSet(size);
      int doSet = random.nextInt(setMax);
      for (int s = 0 ; s < doSet ; s++) {
        int index = random.nextInt(size);
        rank.set(index);
      }
      rank.buildRankCache();
      int setbits = 0;
      for (int i = 0 ; i < size ; i++) {
        assertEquals(String.format(Locale.ENGLISH, "run=%d, index=%d/%d, setbits=%d", run, i, size, setbits),
            setbits, rank.rank(i));
        if (rank.get(i)) {
          setbits++;
        }
      }
    }
  }

