  public void testExtractTerms() throws IOException {
    IndexReader reader = new MultiReader();
    IndexSearcher searcher = newSearcher(reader);
    Query query = FeatureField.newLogQuery("field", "term", 2f, 42);

    Weight weight = searcher.createWeight(query, ScoreMode.COMPLETE_NO_SCORES, 1f);
    Set<Term> terms = new HashSet<>();
    weight.extractTerms(terms);
    assertEquals(Collections.emptySet(), terms);

    terms = new HashSet<>();
    weight = searcher.createWeight(query, ScoreMode.COMPLETE, 1f);
    weight.extractTerms(terms);
    assertEquals(Collections.singleton(new Term("field", "term")), terms);

    terms = new HashSet<>();
    weight = searcher.createWeight(query, ScoreMode.TOP_SCORES, 1f);
    weight.extractTerms(terms);
    assertEquals(Collections.singleton(new Term("field", "term")), terms);
  }

