  public void testIWCClone() throws Exception {
    IndexWriterConfig iwc = newIndexWriterConfig(TEST_VERSION_CURRENT, new MockAnalyzer(random()));
    Directory dir = newDirectory();
    RandomIndexWriter riw = new RandomIndexWriter(random(), dir, iwc);

    // Cannot clone IW's private IWC clone:
    try {
      riw.w.getConfig().clone();
      fail("did not hit expected exception");
    } catch (IllegalStateException ise) {
      // expected
    }
    riw.close();
    dir.close();
  }

