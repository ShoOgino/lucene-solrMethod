  @Test
  public void testClone() throws Exception {
    IndexWriterConfig conf = new IndexWriterConfig(TEST_VERSION_CURRENT, new MockAnalyzer(random));
    IndexWriterConfig clone = conf.clone();

    // Clone is shallow since not all parameters are cloneable.
    assertTrue(conf.getIndexDeletionPolicy() == clone.getIndexDeletionPolicy());

    conf.setMergeScheduler(new SerialMergeScheduler());
    assertEquals(ConcurrentMergeScheduler.class, clone.getMergeScheduler().getClass());
  }

