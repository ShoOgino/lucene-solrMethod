  public void testReadOnly() throws IOException {
    String name = "testFile";
    Directory dir = newDirectory();
    FieldInfos fieldInfos = createAndWriteFieldInfos(dir, name);
    FieldInfos readOnly = readFieldInfos(dir, name);
    assertReadOnly(readOnly, fieldInfos);
    FieldInfos readOnlyClone = (FieldInfos)readOnly.clone();
    assertNotSame(readOnly, readOnlyClone);
    // clone is also read only - no global field map
    assertReadOnly(readOnlyClone, fieldInfos);
    dir.close();
  }

