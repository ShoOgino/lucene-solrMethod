  /** 
   * field just doesnt have any docvalues at all: exception
   */
  public void testMisconfiguredField() throws Exception {
    Directory dir = newDirectory();
    IndexWriter iw = new IndexWriter(dir, newIndexWriterConfig(null));
    Document doc = new Document();
    doc.add(new StringField("foo", "bar", Field.Store.NO));
    iw.addDocument(doc);
    DirectoryReader dr = DirectoryReader.open(iw);
    LeafReader r = getOnlySegmentReader(dr);
   
    // errors
    try {
      DocValues.getBinary(r, "foo");
      fail();
    } catch (IllegalStateException expected) {}
    try {
      DocValues.getNumeric(r, "foo");
      fail();
    } catch (IllegalStateException expected) {}
    try {
      DocValues.getSorted(r, "foo");
      fail();
    } catch (IllegalStateException expected) {}
    try {
      DocValues.getSortedSet(r, "foo");
      fail();
    } catch (IllegalStateException expected) {}
    try {
      DocValues.getSortedNumeric(r, "foo");
      fail();
    } catch (IllegalStateException expected) {}
    try {
      DocValues.getDocsWithField(r, "foo");
      fail();
    } catch (IllegalStateException expected) {}
    
    dr.close();
    iw.close();
    dir.close();
  }

