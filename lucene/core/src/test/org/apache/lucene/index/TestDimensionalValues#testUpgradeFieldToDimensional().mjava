  // Suddenly add dimensional values to an existing field:
  public void testUpgradeFieldToDimensional() throws Exception {
    Directory dir = getDirectory(1);
    IndexWriterConfig iwc = newIndexWriterConfig();
    IndexWriter w = new IndexWriter(dir, iwc);
    Document doc = new Document();
    doc.add(newStringField("dim", "foo", Field.Store.NO));
    w.addDocument(doc);
    w.close();
    
    iwc = newIndexWriterConfig();
    w = new IndexWriter(dir, iwc);
    doc.add(new DimensionalField("dim", new byte[4]));
    w.close();
    dir.close();
  }

