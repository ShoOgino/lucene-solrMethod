  public void testFinishTwice() throws IOException {
    try (Directory dir = newDirectory()) {
      MergePolicy.MergeSpecification spec = createRandomMergeSpecification(dir, 1);
      MergePolicy.OneMerge oneMerge = spec.merges.get(0);
      oneMerge.mergeFinished(true);
      expectThrows(IllegalStateException.class, () -> oneMerge.mergeFinished(false));
    }
  }

