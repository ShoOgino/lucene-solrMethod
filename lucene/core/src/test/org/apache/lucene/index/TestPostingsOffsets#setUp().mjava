  public void setUp() throws Exception {
    super.setUp();
    // Currently only SimpleText and Lucene40 can index offsets into postings:
    assumeTrue("codec does not support offsets", Codec.getDefault().getName().equals("SimpleText") || Codec.getDefault().getName().equals("Lucene40"));
    iwc = newIndexWriterConfig(TEST_VERSION_CURRENT, new MockAnalyzer(random));
    
    if (Codec.getDefault().getName().equals("Lucene40")) {
      // pulsing etc are not implemented
      if (random.nextBoolean()) {
        iwc.setCodec(_TestUtil.alwaysPostingsFormat(new Lucene40PostingsFormat()));
      } else {
        iwc.setCodec(_TestUtil.alwaysPostingsFormat(new MemoryPostingsFormat()));
      }
    }
  }

