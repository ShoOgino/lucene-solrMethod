  public void testOpenReaderAfterDelete() throws IOException {
    File dirFile = createTempDir("deletetest");
    Directory dir = newFSDirectory(dirFile);
    try {
      DirectoryReader.open(dir);
      fail("expected FileNotFoundException/NoSuchFileException");
    } catch (FileNotFoundException | NoSuchFileException e) {
      // expected
    }

    Files.delete(dirFile.toPath());

    // Make sure we still get a CorruptIndexException (not NPE):
    try {
      DirectoryReader.open(dir);
      fail("expected FileNotFoundException/NoSuchFileException");
    } catch (FileNotFoundException | NoSuchFileException e) {
      // expected
    }
    
    dir.close();
  }

