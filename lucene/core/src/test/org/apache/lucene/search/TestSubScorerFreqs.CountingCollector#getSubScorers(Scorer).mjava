    private Map<Query, Scorer> getSubScorers(Scorer scorer) throws IOException {
      Map<Query, Scorer> collected = new HashMap<>();
      for (ChildScorer child : scorer.getChildren()) {
        if (scorer instanceof AssertingScorer || relationships.contains(child.relationship)) {
          collected.put(scorer.getWeight().getQuery(), scorer);
        }
        collected.putAll(getSubScorers(child.child));
      }
      return collected;
    }

