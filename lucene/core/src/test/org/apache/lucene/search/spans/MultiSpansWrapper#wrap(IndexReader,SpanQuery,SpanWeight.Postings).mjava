  public static Spans wrap(IndexReader reader, SpanQuery spanQuery, SpanWeight.Postings requiredPostings) throws IOException {

    LeafReader lr = SlowCompositeReaderWrapper.wrap(reader); // slow, but ok for testing
    LeafReaderContext lrContext = lr.getContext();
    IndexSearcher searcher = new IndexSearcher(lr);
    searcher.setQueryCache(null);

    SpanWeight w = spanQuery.createWeight(searcher, false);

    return w.getSpans(lrContext, new Bits.MatchAllBits(lr.numDocs()), requiredPostings);
  }

