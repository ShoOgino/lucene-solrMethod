    @Override
    public void updateDocument(Term term,
        Iterable<? extends IndexableField> doc)
        throws IOException {
      super.updateDocument(term, doc);
      try {
        if (waitAfterUpdate) {
          signal.countDown();
          latch.await();
        }
      } catch (InterruptedException e) {
        throw new ThreadInterruptedException(e);
      }
    }

