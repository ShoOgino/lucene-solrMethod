  public void testRewrite() throws IOException {
    QueryUtils.checkEqual(new BooleanQuery.Builder().build(), new GraphQuery().rewrite(null));
    QueryUtils.checkEqual(new TermQuery(new Term("a", "a")),
        new GraphQuery(new TermQuery(new Term("a", "a"))).rewrite(null));
    QueryUtils.checkEqual(
        new BooleanQuery.Builder()
            .add(new TermQuery(new Term("a", "a")), BooleanClause.Occur.SHOULD)
            .add(new TermQuery(new Term("b", "b")), BooleanClause.Occur.SHOULD).build(),
        new GraphQuery(
            new TermQuery(new Term("a", "a")),
            new TermQuery(new Term("b", "b"))
        ).rewrite(null)
    );
  }

