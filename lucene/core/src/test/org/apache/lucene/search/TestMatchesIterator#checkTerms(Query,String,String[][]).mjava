  void checkTerms(Query q, String field, String[][] expected) throws IOException {
    Weight w = searcher.createWeight(searcher.rewrite(q), ScoreMode.COMPLETE_NO_SCORES, 1);
    for (int i = 0; i < expected.length; i++) {
      LeafReaderContext ctx = searcher.leafContexts.get(ReaderUtil.subIndex(i, searcher.leafContexts));
      int doc = i - ctx.docBase;
      Matches matches = w.matches(ctx, doc);
      if (matches == null) {
        assertEquals(expected[i].length, 0);
        continue;
      }
      MatchesIterator it = matches.getMatches(field);
      if (it == null) {
        assertEquals(expected[i].length, 0);
        continue;
      }
      int pos = 0;
      while (it.next()) {
        assertEquals(expected[i][pos], it.term().utf8ToString());
        pos += 1;
      }
      assertEquals(expected[i].length, pos);
    }
  }

