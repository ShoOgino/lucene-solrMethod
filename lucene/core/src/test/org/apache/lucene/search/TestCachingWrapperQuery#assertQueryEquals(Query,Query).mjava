  private void assertQueryEquals(Query f1, Query f2) throws Exception {
    // wrap into CSQ so that scores are not needed
    TopDocs hits1 = is.search(new ConstantScoreQuery(f1), ir.maxDoc());
    TopDocs hits2 = is.search(new ConstantScoreQuery(f2), ir.maxDoc());
    assertEquals(hits1.totalHits, hits2.totalHits);
    CheckHits.checkEqual(f1, hits1.scoreDocs, hits2.scoreDocs);
    // now do it again to confirm caching works
    TopDocs hits3 = is.search(new ConstantScoreQuery(f1), ir.maxDoc());
    TopDocs hits4 = is.search(new ConstantScoreQuery(f2), ir.maxDoc());
    assertEquals(hits3.totalHits, hits4.totalHits);
    CheckHits.checkEqual(f1, hits3.scoreDocs, hits4.scoreDocs);
  }

