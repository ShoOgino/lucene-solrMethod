  public void testInconsistentTopDocsFail() {
    TopDocs[] topDocs = new TopDocs[] {
        new TopDocs(1, new ScoreDoc[] { new ScoreDoc(1, 1.0f, 1) }),
        new TopDocs(1, new ScoreDoc[] { new ScoreDoc(1, 1.0f, -1) })
    };
    if (random().nextBoolean()) {
      ArrayUtil.swap(topDocs, 0, 1);
    }
    expectThrows(IllegalStateException.class, () -> {
      TopDocs.merge(0, 1, topDocs);
    });
  }

