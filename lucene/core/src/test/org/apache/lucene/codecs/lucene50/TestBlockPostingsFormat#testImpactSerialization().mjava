  public void testImpactSerialization() throws IOException {
    // omit norms and omit freqs
    doTestImpactSerialization(new int[] { 1 }, new long[] { 1L });

    // omit freqs
    doTestImpactSerialization(new int[] { 1 }, new long[] { 42L });
    // omit freqs with very large norms
    doTestImpactSerialization(new int[] { 1 }, new long[] { -100L });

    // omit norms
    doTestImpactSerialization(new int[] { 30 }, new long[] { 1L });
    // omit norms with large freq
    doTestImpactSerialization(new int[] { 500 }, new long[] { 1L });

    // freqs and norms, basic
    doTestImpactSerialization(
        new int[] { 1, 3, 7, 15, 20, 28 },
        new long[] { 7L, 9L, 10L, 11L, 13L, 14L });

    // freqs and norms, high values
    doTestImpactSerialization(
        new int[] { 2, 10, 12, 50, 1000, 1005 },
        new long[] { 2L, 10L, 50L, -100L, -80L, -3L });
  }

