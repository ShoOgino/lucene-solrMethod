  /** 
   * Create a range query for network addresses.
   *
   * @param field field name. must not be {@code null}.
   * @param lowerValue lower portion of the range (inclusive). must not be null.
   * @param upperValue upper portion of the range (inclusive). must not be null.
   * @throws IllegalArgumentException if {@code field} is null, {@code lowerValue} is null, 
   *                                  or {@code upperValue} is null
   * @return a query matching documents within this range.
   */
  public static Query newRangeQuery(String field, InetAddress lowerValue, InetAddress upperValue) {
    PointRangeQuery.checkArgs(field, lowerValue, upperValue);
    byte[][] lowerBytes = new byte[1][];
    lowerBytes[0] = encode(lowerValue);
    byte[][] upperBytes = new byte[1][];
    upperBytes[0] = encode(upperValue);
    return new PointRangeQuery(field, lowerBytes, upperBytes) {
      @Override
      protected String toString(int dimension, byte[] value) {
        return decode(value).getHostAddress(); // for ranges, the range itself is already bracketed
      }
    };
  }

