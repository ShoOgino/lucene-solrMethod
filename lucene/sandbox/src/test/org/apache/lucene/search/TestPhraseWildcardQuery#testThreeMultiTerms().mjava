  public void testThreeMultiTerms() throws Exception {
    searchAndCheckResults(field(0), 100, "t*", "ut?pi?", "e*");
    assertEquals(0, TestCounters.get().singleTermAnalysisCount);
    assertEquals(3, TestCounters.get().multiTermAnalysisCount);
    assertEquals(4, TestCounters.get().segmentUseCount);
    assertEquals(1, TestCounters.get().segmentSkipCount);

    searchAndCheckResults(field(0), 100, "t?e", "u*", "e*");
    assertEquals(0, TestCounters.get().singleTermAnalysisCount);
    assertEquals(3, TestCounters.get().multiTermAnalysisCount);
    assertEquals(4, TestCounters.get().segmentUseCount);
    assertEquals(1, TestCounters.get().segmentSkipCount);

    expectDifferentScoreForSpanNearQueryWithMultiTermSubset(() -> {
      searchAndCheckResults(field(0), 100, "t?e", "b*", "b*");
      assertEquals(0, TestCounters.get().singleTermAnalysisCount);
      assertEquals(3, TestCounters.get().multiTermAnalysisCount);
      assertEquals(4, TestCounters.get().segmentUseCount);
      assertEquals(1, TestCounters.get().segmentSkipCount);
    });
  }

