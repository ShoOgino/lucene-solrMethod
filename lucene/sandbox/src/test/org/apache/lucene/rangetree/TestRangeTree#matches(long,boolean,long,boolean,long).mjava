  private static boolean matches(long lower, boolean includeLower, long upper, boolean includeUpper, long value) {
    if (includeLower == false) {
      if (lower == Long.MAX_VALUE) {
        return false;
      }
      lower++;
    }
    if (includeUpper == false) {
      if (upper == Long.MIN_VALUE) {
        return false;
      }
      upper--;
    }

    return value >= lower && value <= upper;
  }

