  public static void checkFooter(ChecksumIndexInput input, BytesRef prefix) throws IOException {
    BytesRef scratch = new BytesRef();
    String expectedChecksum = Long.toString(input.getChecksum());
    SimpleTextUtil.readLine(input, scratch);
    assert StringHelper.startsWith(scratch, prefix);
    String actualChecksum = new BytesRef(scratch.bytes, prefix.length, scratch.length - prefix.length).utf8ToString();
    if (!expectedChecksum.equals(actualChecksum)) {
      throw new CorruptIndexException("SimpleText checksum failure: " + actualChecksum + " != " + expectedChecksum + " (resource=" + input + ")");
    }
    if (input.length() != input.getFilePointer()) {
      throw new CorruptIndexException("Unexpected stuff at the end of file, please be careful with your text editor! (resource=" + input + ")");
    }
  }

