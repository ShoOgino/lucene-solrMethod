  /**
   * Adds a lucene {@link IndexableField} to the MemoryIndex using the provided analyzer
   * @param field the field to add
   * @param analyzer the analyzer to use for term analysis
   * @param boost a field boost
   * @throws IllegalArgumentException if the field is a DocValues or Point field, as these
   *                                  structures are not supported by MemoryIndex
   */
  public void addField(IndexableField field, Analyzer analyzer, float boost) {
    if (field.fieldType().docValuesType() != DocValuesType.NONE)
      throw new IllegalArgumentException("MemoryIndex does not support DocValues fields");
    if (field.fieldType().pointDimensionCount() != 0)
      throw new IllegalArgumentException("MemoryIndex does not support Points");
    if (analyzer == null) {
      addField(field.name(), field.tokenStream(null, null), boost);
    }
    else {
      addField(field.name(), field.tokenStream(analyzer, null), boost,
          analyzer.getPositionIncrementGap(field.name()), analyzer.getOffsetGap(field.name()));
    }
  }

