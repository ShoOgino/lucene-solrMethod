  public static long getTotalTermFreq(IndexReader reader, String field, BytesRef termtext) throws Exception {
    BytesRef br = termtext;
    long totalTF = 0;
    Bits skipDocs = MultiFields.getDeletedDocs(reader);
    DocsEnum de = MultiFields.getTermDocsEnum(reader, skipDocs, field, br);
    // if term is not in index return totalTF of 0
    if (de == null) {
      return 0;
    }
    // use DocsEnum.read() and BulkResult api
    final DocsEnum.BulkReadResult bulkresult = de.getBulkResult();
    int count;
    while ((count = de.read()) != 0) {
      final int[] freqs = bulkresult.freqs.ints;
      final int limit = bulkresult.freqs.offset + count;
      for(int i=bulkresult.freqs.offset;i<limit;i++) {
        totalTF += freqs[i];
      }
    }
    return totalTF;
  }

