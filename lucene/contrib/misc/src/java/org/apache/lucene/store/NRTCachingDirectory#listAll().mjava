  @Override
  public synchronized String[] listAll() throws IOException {
    final Set<String> files = new HashSet<String>();
    for(String f : cache.listAll()) {
      files.add(f);
    }
    for(String f : delegate.listAll()) {
      // Cannot do this -- if lucene calls createOutput but
      // file already exists then this falsely trips:
      //assert !files.contains(f): "file \"" + f + "\" is in both dirs";
      files.add(f);
    }
    return files.toArray(new String[files.size()]);
  }

