  private BitDocIdSet docIdSetToCache(DocIdSet docIdSet, LeafReader reader) throws IOException {
    final DocIdSetIterator it = docIdSet.iterator();
    if (it == null) {
      return null;
    } else {
      BitDocIdSet.Builder builder = new BitDocIdSet.Builder(reader.maxDoc());
      builder.or(it);
      return builder.build();
    }
  }

