    @Override
    protected int docsEnumNextDoc() throws IOException {
      while (true) {
        int docId = docsEnum.nextDoc();
        if (docId == DocIdSetIterator.NO_MORE_DOCS) {
          return docId;
        }
        if (!alreadyEmittedDocs.getAndSet(docId)) {
          return docId;//if it wasn't previously set, return it
        }
      }
    }

