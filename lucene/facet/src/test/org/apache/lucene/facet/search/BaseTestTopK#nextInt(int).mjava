  /** prepare the next random int */
  private void nextInt(int doc) {
    if (currDoc == doc ) {
      return;
    }
    currDoc = doc;
    // the code below tries to achieve non-uniform distribution of
    // categories. Perhaps we can use random.nextGaussian() instead,
    // something like nextGaussian() * stdev + maxCategory/2. Or
    // try to generate a Zipf distribution.
    nextInt = random().nextInt(categoriesPow2);
    nextInt = (int)Math.sqrt(nextInt);
  }

