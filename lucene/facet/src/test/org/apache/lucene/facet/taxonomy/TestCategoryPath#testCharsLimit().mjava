  @Test 
  public void testCharsLimit() {
    // Test that we can add up to 2^15-1 characters
    CategoryPath p = new CategoryPath(0,0);
    for (int i=0; i<8192; i++) {
      p.add("aaaa");
    }
    // Also see that in the current implementation, this is actually the
    // limit: If we add one more character, things break (because ends[]
    // is an array of shorts), and we actually get an exception.
    try {
      p.add("a");
      fail("Should have thrown an exception");
    } catch (ArrayIndexOutOfBoundsException e) {
      // good.
    }
  }

