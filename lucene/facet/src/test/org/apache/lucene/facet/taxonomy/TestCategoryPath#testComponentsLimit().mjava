  @Test 
  public void testComponentsLimit() {
    // Test that we can add up to 2^15-1 components
    CategoryPath p = new CategoryPath(0,0);
    for (int i=0; i<32767; i++) {
      p.add("");
      assertEquals(i+1, p.length());
    }
    // Also see that in the current implementation, this is actually
    // the limit: if we add one more component, things break (because
    // we used a short to hold ncomponents). See that it breaks in the
    // way we expect it to:
    p.add(""); // this still works, but...
    assertEquals(-32768, p.length()); // now the length is wrong and negative
  }

