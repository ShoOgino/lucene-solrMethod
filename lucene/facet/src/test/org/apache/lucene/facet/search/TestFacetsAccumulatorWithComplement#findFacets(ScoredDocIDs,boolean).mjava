  /** compute facets with certain facet requests and docs */
  private List<FacetResult> findFacets(ScoredDocIDs sDocids, boolean withComplement) throws IOException {
    FacetSearchParams fsp = new FacetSearchParams(getFacetIndexingParams(Integer.MAX_VALUE), new CountFacetRequest(new CategoryPath("root","a"), 10));
    FacetsAccumulator fAccumulator = new StandardFacetsAccumulator(fsp, indexReader, taxoReader);
    
    fAccumulator.setComplementThreshold(
        withComplement ? 
            FacetsAccumulator.FORCE_COMPLEMENT: 
              FacetsAccumulator.DISABLE_COMPLEMENT);
    
    List<FacetResult> res = fAccumulator.accumulate(sDocids);
    
    // Results are ready, printing them...
    int i = 0;
    for (FacetResult facetResult : res) {
      if (VERBOSE) {
        System.out.println("Res "+(i++)+": "+facetResult);
      }
    }
    
    assertEquals(withComplement, ((StandardFacetsAccumulator) fAccumulator).isUsingComplements);
    
    return res;
  }

