  private static void decoding(BytesRef bytes, IntsRef values, IntDecoder decoder) throws IOException {
    int offset = 0;
    if (random().nextBoolean()) { // randomly set the offset and length to other than 0,0
      bytes.grow(bytes.length + 1); // ensure that we have enough capacity to shift values by 1
      bytes.offset = 1; // bytes start at index 1 (must do that after grow)
      System.arraycopy(bytes.bytes, 0, bytes.bytes, 1, bytes.length);
      offset = 1;
    }
    decoder.decode(bytes, values);
    assertEquals(offset, bytes.offset); // decoders should not mess with offsets
  }

