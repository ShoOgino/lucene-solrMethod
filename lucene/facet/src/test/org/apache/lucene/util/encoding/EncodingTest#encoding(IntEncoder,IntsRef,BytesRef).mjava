  private static void encoding(IntEncoder encoder, IntsRef data, BytesRef bytes) throws IOException {
    final IntsRef values;
    if (random().nextBoolean()) { // randomly set the offset
      values = new IntsRef(data.length + 1);
      System.arraycopy(data.ints, 0, values.ints, 1, data.length);
      values.offset = 1; // ints start at index 1
      values.length = data.length;
    } else {
      // need to copy the array because it may be modified by encoders (e.g. sorting)
      values = IntsRef.deepCopyOf(data);
    }
    encoder.encode(values, bytes);
  }

