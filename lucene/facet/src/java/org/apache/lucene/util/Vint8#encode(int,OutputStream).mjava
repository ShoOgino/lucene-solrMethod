  /**
   * Encodes {@code number} to {@code out}.
   * @param number The value to be written in encoded form, to {@code out}.
   * @param out The output stream receiving the encoded bytes.
   * @exception IOException If there is a problem writing to {@code out}.
   */
  public static void encode(int number, OutputStream out) throws IOException {
    if ((number & ~0x7F) == 0) {
      out.write(number);
    } else if ((number & ~0x3FFF) == 0) {
      out.write(0x80 | (number >> 7));
      out.write(0x7F & number);
    } else if ((number & ~0x1FFFFF) == 0) {
      out.write(0x80 | (number >> 14));
      out.write(0x80 | (number >> 7));
      out.write(0x7F & number);
    } else if ((number & ~0xFFFFFFF) == 0) {
      out.write(0x80 | (number >> 21));
      out.write(0x80 | (number >> 14));
      out.write(0x80 | (number >> 7));
      out.write(0x7F & number);
    } else {
      out.write(0x80 | (number >> 28));
      out.write(0x80 | (number >> 21));
      out.write(0x80 | (number >> 14));
      out.write(0x80 | (number >> 7));
      out.write(0x7F & number);
    }
  }

