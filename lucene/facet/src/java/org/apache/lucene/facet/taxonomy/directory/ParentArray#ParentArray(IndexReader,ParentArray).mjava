  public ParentArray(IndexReader reader, ParentArray copyFrom) throws IOException {
    assert copyFrom != null;

    // note that copyParents.length may be equal to reader.maxDoc(). this is not a bug
    // it may be caused if e.g. the taxonomy segments were merged, and so an updated
    // NRT reader was obtained, even though nothing was changed. this is not very likely
    // to happen.
    int[] copyParents = copyFrom.getArray();
    this.parentOrdinals = new int[reader.maxDoc()];
    System.arraycopy(copyParents, 0, parentOrdinals, 0, copyParents.length);
    initFromReader(reader, copyParents.length);
  }

