  /**
   * Create a collector for accumulating facets while collecting documents
   * during search.
   * 
   * @param facetSearchParams
   *          faceted search parameters defining which facets are required and
   *          how.
   * @param indexReader
   *          searched index.
   * @param taxonomyReader
   *          taxonomy containing the facets.
   */
  public FacetsCollector(FacetSearchParams facetSearchParams,
                          IndexReader indexReader, TaxonomyReader taxonomyReader) {
    facetsAccumulator = initFacetsAccumulator(facetSearchParams, indexReader, taxonomyReader);
    scoreDocIdCollector = initScoredDocCollector(facetSearchParams, indexReader, taxonomyReader);
    resultsGuard = new Object();
  }

