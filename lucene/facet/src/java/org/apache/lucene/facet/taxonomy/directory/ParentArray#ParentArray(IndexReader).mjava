  public ParentArray(IndexReader reader) throws IOException {
    parentOrdinals = new int[reader.maxDoc()];
    if (parentOrdinals.length > 0) {
      initFromReader(reader, 0);
      // Starting Lucene 2.9, following the change LUCENE-1542, we can
      // no longer reliably read the parent "-1" (see comment in
      // LuceneTaxonomyWriter.SinglePositionTokenStream). We have no way
      // to fix this in indexing without breaking backward-compatibility
      // with existing indexes, so what we'll do instead is just
      // hard-code the parent of ordinal 0 to be -1, and assume (as is
      // indeed the case) that no other parent can be -1.
      parentOrdinals[0] = TaxonomyReader.INVALID_ORDINAL;
    }
  }

