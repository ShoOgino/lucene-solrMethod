  static Filter getFilter(Query query) {
    if (query instanceof ConstantScoreQuery) {
      ConstantScoreQuery csq = (ConstantScoreQuery) query;
      Query sub = csq.getQuery();
      if (sub instanceof Filter) {
        return (Filter) sub;
      } else {
        return getFilter(sub);
      }
    } else {
      return null;
    }
  }

