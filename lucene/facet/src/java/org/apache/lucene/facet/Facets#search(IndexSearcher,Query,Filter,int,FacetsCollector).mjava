  /** Utility method, to search for top hits by score with a filter
   *  ({@link IndexSearcher#search(Query,Filter,int)}), but
   *  also collect results into a {@link
   *  FacetsCollector} for faceting. */
  public static TopDocs search(IndexSearcher searcher, Query q, Filter filter, int topN, FacetsCollector sfc) throws IOException {
    if (filter != null) {
      q = new FilteredQuery(q, filter);
    }
    return search(searcher, q, topN, sfc);
  }

