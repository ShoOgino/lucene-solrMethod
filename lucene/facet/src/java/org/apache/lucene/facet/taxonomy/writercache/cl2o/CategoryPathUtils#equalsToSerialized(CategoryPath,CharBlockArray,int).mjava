  /**
   * Check whether the {@link CategoryPath} is equal to the one serialized in
   * {@link CharBlockArray}.
   */
  public static boolean equalsToSerialized(CategoryPath cp, CharBlockArray charBlockArray, int offset) {
    int n = charBlockArray.charAt(offset++);
    if (cp.length != n) {
      return false;
    }
    if (cp.length == 0) {
      return true;
    }
    
    for (int i = 0; i < cp.length; i++) {
      int len = charBlockArray.charAt(offset++);
      if (len != cp.components[i].length()) {
        return false;
      }
      if (!cp.components[i].equals(charBlockArray.subSequence(offset, offset + len))) {
        return false;
      }
      offset += len;
    }
    return true;
  }

