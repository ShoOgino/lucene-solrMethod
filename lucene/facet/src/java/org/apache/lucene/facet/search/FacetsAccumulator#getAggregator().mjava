  /**
   * Returns the {@link FacetsAggregator} to use for aggregating the categories
   * found in the result documents. The default implementation returns
   * {@link CountingFacetsAggregator}, or {@link FastCountingFacetsAggregator}
   * if all categories can be decoded with {@link DGapVInt8IntDecoder}.
   */
  public FacetsAggregator getAggregator() {
    if (FastCountingFacetsAggregator.verifySearchParams(searchParams)) {
      return new FastCountingFacetsAggregator();
    } else {
      return new CountingFacetsAggregator();
    }
  }

