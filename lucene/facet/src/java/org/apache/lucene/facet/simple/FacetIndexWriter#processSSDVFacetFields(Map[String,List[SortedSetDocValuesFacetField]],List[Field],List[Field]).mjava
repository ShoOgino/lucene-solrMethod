  private void processSSDVFacetFields(Map<String,List<SortedSetDocValuesFacetField>> byField, List<Field> addedIndexedFields, List<Field> addedStoredFields) throws IOException {
    //System.out.println("process SSDV: " + byField);
    for(Map.Entry<String,List<SortedSetDocValuesFacetField>> ent : byField.entrySet()) {

      String indexedFieldName = ent.getKey();
      //System.out.println("  field=" + indexedFieldName);

      for(SortedSetDocValuesFacetField facetField : ent.getValue()) {
        CategoryPath cp = new CategoryPath(facetField.dim, facetField.label);
        String fullPath = cp.toString(facetDelimChar);
        //System.out.println("add " + fullPath);

        // For facet counts:
        addedStoredFields.add(new SortedSetDocValuesField(indexedFieldName, new BytesRef(fullPath)));

        // For drill-down:
        addedIndexedFields.add(new StringField(indexedFieldName, fullPath, Field.Store.NO));
      }
    }
  }

