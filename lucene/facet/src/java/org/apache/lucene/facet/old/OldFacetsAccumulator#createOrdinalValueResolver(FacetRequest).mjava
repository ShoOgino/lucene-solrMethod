  /**
   * Creates an {@link OrdinalValueResolver} for the given {@link FacetRequest}.
   * By default this method supports {@link CountFacetRequest} and
   * {@link SumScoreFacetRequest}. You should override if you are using other
   * requests with this accumulator.
   */
  public OrdinalValueResolver createOrdinalValueResolver(FacetRequest fr) {
    if (fr instanceof CountFacetRequest) {
      return new IntValueResolver(facetArrays);
    } else if (fr instanceof SumScoreFacetRequest) {
      return new FloatValueResolver(facetArrays);
    } else if (fr instanceof OverSampledFacetRequest) {
      return createOrdinalValueResolver(((OverSampledFacetRequest) fr).orig);
    } else {
      throw new IllegalArgumentException("unrecognized FacetRequest " + fr.getClass());
    }
  }

