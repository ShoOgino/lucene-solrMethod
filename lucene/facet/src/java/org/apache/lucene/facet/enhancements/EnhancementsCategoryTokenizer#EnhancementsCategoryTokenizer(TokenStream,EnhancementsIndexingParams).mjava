  /**
   * Constructor.
   * 
   * @param input
   *            The stream of category tokens.
   * @param indexingParams
   *            The indexing params to use.
   */
  public EnhancementsCategoryTokenizer(TokenStream input,
      EnhancementsIndexingParams indexingParams) {
    super(input, indexingParams);
    payloadBytes = new byte[Vint8.MAXIMUM_BYTES_NEEDED
        * (indexingParams.getCategoryEnhancements().size() + 1)];
    enhancements = indexingParams.getCategoryEnhancements();
    if (enhancements != null) {
      // create array of bytes per enhancement
      enhancementBytes = new byte[enhancements.size()][];
      // write once the number of enhancements in the payload bytes
      nStart = Vint8.encode(enhancements.size(), payloadBytes, 0);
    }
  }

