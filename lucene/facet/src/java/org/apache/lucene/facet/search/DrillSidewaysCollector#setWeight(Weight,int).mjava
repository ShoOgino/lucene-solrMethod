  void setWeight(Weight weight, int index) {
    assert !weightToIndex.containsKey(weight);
    weightToIndex.put(weight, index);
  }

