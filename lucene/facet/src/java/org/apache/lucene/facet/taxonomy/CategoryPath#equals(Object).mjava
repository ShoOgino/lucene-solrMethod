  @Override
  public boolean equals(Object obj) {
    if (!(obj instanceof CategoryPath)) {
      return false;
    }
    
    CategoryPath other = (CategoryPath) obj;
    if (length != other.length) {
      return false; // not same length, cannot be equal
    }
    
    // CategoryPaths are more likely to differ at the last components, so start
    // from last-first
    for (int i = length - 1; i >= 0; i--) {
      if (!components[i].equals(other.components[i])) {
        return false;
      }
    }
    return true;
  }

