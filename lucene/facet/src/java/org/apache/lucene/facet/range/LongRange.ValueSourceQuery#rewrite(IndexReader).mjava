    @Override
    public Query rewrite(IndexReader reader) throws IOException {
      if (fastMatchQuery != null) {
        final Query fastMatchRewritten = fastMatchQuery.rewrite(reader);
        if (fastMatchRewritten != fastMatchQuery) {
          Query rewritten = new ValueSourceQuery(range, fastMatchRewritten, valueSource);
          rewritten.setBoost(getBoost());
          return rewritten;
        }
      }
      return super.rewrite(reader);
    }

