  /**
   * Serialize each of the {@link CategoryAttribute}s to the given
   * {@link ObjectOutputStream}.<br>
   * NOTE: {@link CategoryProperty}s are {@link Serializable}, but do not
   * assume that Lucene's {@link Attribute}s are as well
   * @throws IOException 
   */
  protected void serializeCategoryAttribute(ObjectOutputStream out,
      CategoryAttribute ca) throws IOException {
    out.writeObject(ca.getCategoryPath());
    Set<Class<? extends CategoryProperty>> propertyClasses = ca.getPropertyClasses();
    if (propertyClasses != null) {
      out.writeInt(propertyClasses.size());
      for (Class<? extends CategoryProperty> clazz : propertyClasses) {
        out.writeObject(ca.getProperty(clazz));
      }
    } else {
      out.writeInt(0);
    }
  }

