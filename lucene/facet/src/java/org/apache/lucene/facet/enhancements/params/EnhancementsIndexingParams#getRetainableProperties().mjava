  /**
   * Returns a list of {@link CategoryProperty} which should be retained when
   * creating {@link CategoryParentsStream}, or {@code null} if there are no
   * such properties.
   */
  public List<CategoryProperty> getRetainableProperties() {
    List<CategoryProperty> props = new ArrayList<CategoryProperty>();
    for (CategoryEnhancement enhancement : enhancements) {
      CategoryProperty prop = enhancement.getRetainableProperty();
      if (prop != null) {
        props.add(prop);
      }
    }
    if (props.isEmpty()) {
      return null;
    }
    return props;
  }

