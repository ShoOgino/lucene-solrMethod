  String getDim(Query clause) {
    assert clause instanceof ConstantScoreQuery;
    clause = ((ConstantScoreQuery) clause).getQuery();
    assert clause instanceof TermQuery || clause instanceof BooleanQuery;
    String term;
    if (clause instanceof TermQuery) {
      term = ((TermQuery) clause).getTerm().text();
    } else {
      term = ((TermQuery) ((BooleanQuery) clause).getClauses()[0].getQuery()).getTerm().text();
    }
    return term.split(Pattern.quote(Character.toString(fip.getFacetDelimChar())), 2)[0];
  }

