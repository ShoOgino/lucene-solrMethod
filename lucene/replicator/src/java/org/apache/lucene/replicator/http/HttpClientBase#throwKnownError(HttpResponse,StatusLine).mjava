  protected void throwKnownError(HttpResponse response, StatusLine statusLine) throws IOException {
    ObjectInputStream in = null;
    try {
      in = new ObjectInputStream(response.getEntity().getContent());
    } catch (Exception e) {
      // the response stream is not an exception - could be an error in servlet.init().
      throw new RuntimeException("Uknown error: " + statusLine);
    }
    
    Throwable t;
    try {
      t = (Throwable) in.readObject();
    } catch (Exception e) { 
      //not likely
      throw new RuntimeException("Failed to read exception object: " + statusLine, e);
    } finally {
      in.close();
    }
    if (t instanceof IOException) {
      throw (IOException) t;
    }
    if (t instanceof RuntimeException) {
      throw (RuntimeException) t;
    }
    throw new RuntimeException("unknown exception "+statusLine,t);
  }

