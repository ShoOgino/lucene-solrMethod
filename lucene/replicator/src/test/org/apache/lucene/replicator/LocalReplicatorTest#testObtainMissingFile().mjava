  @Test
  public void testObtainMissingFile() throws IOException {
    replicator.publish(createRevision(1));
    SessionToken res = replicator.checkForUpdate(null);
    try {
      replicator.obtainFile(res.id, res.sourceFiles.keySet().iterator().next(), "madeUpFile");
      fail("should have failed obtaining an unrecognized file");
    } catch (FileNotFoundException e) {
      // expected
    } catch (NoSuchFileException e) {
      // expected (only java 1.7)
    }
  }

