    /** Returns the payload at this position, or null if no
     *  payload was indexed. */
    @Override
    public BytesRef getPayload() throws IOException {
      if (storePayloads) {
        if (payloadLength <= 0) {
          return null;
        }
        assert lazyProxPointer == -1;
        assert posPendingCount < freq;
        
        if (payloadPending) {
          payload.grow(payloadLength);

          proxIn.readBytes(payload.bytes(), 0, payloadLength);
          payload.setLength(payloadLength);
          payloadPending = false;
        }

        return payload.get();
      } else {
        return null;
      }
    }

