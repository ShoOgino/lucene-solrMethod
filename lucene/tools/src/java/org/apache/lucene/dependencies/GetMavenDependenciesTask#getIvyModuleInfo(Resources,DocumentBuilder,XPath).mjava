  /**
   * Visits all ivy.xml files and collects module and organisation attributes into a map.
   */
  private static Map<String,String> getIvyModuleInfo(Resources ivyXmlResources,
      DocumentBuilder documentBuilder, XPath xpath) {
    Map<String,String> ivyInfoModuleToOrganisation = new HashMap<String,String>();
    traverseIvyXmlResources(ivyXmlResources, new Consumer<File>() {
      @Override
      public void accept(File f) {
        try {
          Document document = documentBuilder.parse(f);
          {
            String infoPath = "/ivy-module/info";
            NodeList infos = (NodeList)xpath.evaluate(infoPath, document, XPathConstants.NODESET);
            for (int infoNum = 0 ; infoNum < infos.getLength() ; ++infoNum) {
              Element infoElement = (Element)infos.item(infoNum);
              String infoOrg = infoElement.getAttribute("organisation");
              String infoOrgSuffix = infoOrg.substring(infoOrg.lastIndexOf('.')+1);
              String infoModule = infoElement.getAttribute("module");
              String module = infoOrgSuffix+"-"+infoModule;
              ivyInfoModuleToOrganisation.put(module, infoOrg);
            }
          }
        } catch (XPathExpressionException | IOException | SAXException e) {
          throw new RuntimeException(e);
        }
      }
    });
    return ivyInfoModuleToOrganisation;
  }

