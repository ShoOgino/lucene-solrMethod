  public Query makeQueryWithValueSource(SpatialArgs args, ValueSource valueSource) {
    BooleanQuery bq = new BooleanQuery();
    Query spatial = makeSpatialQuery(args);
    bq.add(new ConstantScoreQuery(spatial), BooleanClause.Occur.MUST);

    // This part does the scoring
    Query spatialRankingQuery = new FunctionQuery(valueSource);
    bq.add(spatialRankingQuery, BooleanClause.Occur.MUST);
    return bq;
  }

