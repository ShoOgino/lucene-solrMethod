  /** Expert: allows you to customize the {@link
   *  FieldType}.
   *  @param name field name
   *  @param latitude latitude double value [-90.0 : 90.0]
   *  @param longitude longitude double value [-180.0 : 180.0]
   *  @param type customized field type: must have {@link FieldType#numericType()}
   *         of {@link org.apache.lucene.document.FieldType.LegacyNumericType#LONG}.
   *  @throws IllegalArgumentException if the field name or type is null, or
   *          if the field type does not have a LONG numericType()
   */
  public GeoPointField(String name, double latitude, double longitude, FieldType type) {
    super(name, type);

    if (GeoUtils.isValidLat(latitude) == false) {
      throw new IllegalArgumentException("invalid latitude=" + latitude + " for field \"" + name + "\"");
    }

    if (GeoUtils.isValidLon(longitude) == false) {
      throw new IllegalArgumentException("invalid longitude=" + longitude + " for field \"" + name + "\"");
    }

    // field must be indexed
    // todo does it make sense here to provide the ability to store a GeoPointField but not index?
    if (type.indexOptions() == IndexOptions.NONE && type.stored() == false) {
      throw new IllegalArgumentException("type.indexOptions() is set to NONE but type.stored() is false");
    } else if (type.indexOptions() == IndexOptions.DOCS) {
      if (type.docValuesType() != DocValuesType.SORTED_NUMERIC) {
        throw new IllegalArgumentException("type.docValuesType() must be SORTED_NUMERIC but got " + type.docValuesType());
      }
      if (type.numericType() != null) {
        // make sure numericType is a LONG
        if (type.numericType() != FieldType.LegacyNumericType.LONG) {
          throw new IllegalArgumentException("type.numericType() must be LONG but got " + type.numericType());
        }
      }
    } else {
      throw new IllegalArgumentException("type.indexOptions() must be one of NONE or DOCS but got " + type.indexOptions());
    }

    // set field data
    fieldsData = GeoEncodingUtils.mortonHash(latitude, longitude);
  }

