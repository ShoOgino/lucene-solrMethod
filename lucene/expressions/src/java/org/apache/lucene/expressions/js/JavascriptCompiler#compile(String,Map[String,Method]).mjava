  /**
   * Compiles the given expression with the supplied custom functions.
   * <p>
   * Functions must return a double.
   *
   * @param sourceText The expression to compile
   * @param functions map of String names to functions
   * @return A new compiled expression
   * @throws ParseException on failure to compile
   */
  public static Expression compile(String sourceText, Map<String,Method> functions) throws ParseException {
    for (Method m : functions.values()) {
      checkFunction(m);
    }
    return new JavascriptCompiler(sourceText, functions).compileExpression();
  }

