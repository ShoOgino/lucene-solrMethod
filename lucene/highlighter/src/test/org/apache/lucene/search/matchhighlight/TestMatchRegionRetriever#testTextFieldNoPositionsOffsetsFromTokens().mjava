  /**
   * This test runs a term query against a field with no stored
   * positions or offsets.
   * <p>
   * Such field structure is often useful for multivalued "keyword-like"
   * fields.
   */
  @Test
  public void testTextFieldNoPositionsOffsetsFromTokens() throws Exception {
    String field = FLD_TEXT_NOPOS;

    withReader(
        List.of(
            Map.of(FLD_TEXT_NOPOS, values("foo bar"),
                   FLD_TEXT_POS, values("bar bar")),
            Map.of(FLD_TEXT_NOPOS, values("foo bar", "baz bar"))
        ),
        reader -> {
          assertThat(
              highlights(
                  reader,
                  new TermQuery(new Term(field, "bar"))),
              containsInAnyOrder(
                  fmt("0: (%s: 'foo >bar<')", field),
                  fmt("1: (%s: 'foo >bar< | baz >bar<')", field)));
        });
  }

