  @Override
  public int preceding(int pos) {
    if (pos < text.getBeginIndex() || pos > text.getEndIndex()) {
      throw new IllegalArgumentException("offset out of bounds");
    } else if (pos == text.getBeginIndex()) {
      // this conflicts with the javadocs, but matches actual behavior (Oracle has a bug in something)
      // http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=9000909
      text.setIndex(text.getBeginIndex());
      current = text.getIndex();
      return DONE;
    } else {
      text.setIndex(pos);
      current = text.getIndex();
      return advanceBackward();
    }
  }

