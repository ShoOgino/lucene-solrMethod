  /** Clips the incoming value to the allowed min/max range before encoding, instead of throwing an exception. */
  public static int encodeValueLenient(double planetMax, double x) {
    if (x > planetMax) {
      x = planetMax;
    } else if (x < -planetMax) {
      x = -planetMax;
    }
    return encodeValue(planetMax, x);
  }

