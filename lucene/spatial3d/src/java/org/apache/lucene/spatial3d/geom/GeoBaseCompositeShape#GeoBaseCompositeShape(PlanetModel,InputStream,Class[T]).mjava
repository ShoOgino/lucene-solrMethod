  /**
   * Constructor for deserialization.
   * @param planetModel is the planet model.
   * @param inputStream is the input stream.
   * @param clazz is the class of the generic.
   */
  public GeoBaseCompositeShape(final PlanetModel planetModel, final InputStream inputStream, final Class<T> clazz) throws IOException {
    this(planetModel);
    final SerializableObject[] array = SerializableObject.readHeterogeneousArray(planetModel, inputStream);
    for (final SerializableObject member : array) {
      if (!(clazz.isAssignableFrom(member.getClass()))) {
        throw new IOException("Can't deserialize composite because member has wrong type: "+member.getClass().getName());
      }
      addShape(clazz.cast(member));
    }
  }

