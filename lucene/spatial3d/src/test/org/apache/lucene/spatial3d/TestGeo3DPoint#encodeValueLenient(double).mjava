  /** Clips the incoming value to the allowed min/max range before encoding, instead of throwing an exception. */
  private static int encodeValueLenient(double x) {
    double planetMax = PlanetModel.WGS84.getMaximumMagnitude();
    if (x > planetMax) {
      x = planetMax;
    } else if (x < -planetMax) {
      x = -planetMax;
    }
    return Geo3DUtil.encodeValue(x);
  }

