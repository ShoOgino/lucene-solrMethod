  public void testCachedArrays() throws IOException 
  {
    FieldCache cache = FieldCache.DEFAULT;

    // Check the Different CachedArray Types
    CachedArray last = null;
    CachedArray justbits = null;
    
    for( NumberTypeTester tester : typeTests ) {
      justbits = getWithReflection( cache, tester, CachedArrayCreator.OPTION_CACHE_BITS );
      assertNull( "should not get values : "+tester, justbits.getRawArray() );
      assertNotNull( "should get bits : "+tester, justbits.valid );
      last = getWithReflection( cache, tester, CachedArrayCreator.CACHE_VALUES_AND_BITS );
      assertEquals( "should use same cached object : "+tester, justbits, last );
      assertNull( "Validate=false shoudl not regenerate : "+tester, justbits.getRawArray() ); 
      last = getWithReflection( cache, tester, CachedArrayCreator.CACHE_VALUES_AND_BITS_VALIDATE );
      assertEquals( "should use same cached object : "+tester, justbits, last );
      assertNotNull( "Validate=true should add the Array : "+tester, justbits.getRawArray() ); 
      checkCachedArrayValuesAndBits( tester, last );
    }
  }

