  public void searchFiltered(IndexWriter writer, Directory directory, Filter filter, boolean fullMerge) {
    try {
      for (int i = 0; i < 60; i++) {//Simple docs
        Document doc = new Document();
        doc.add(newField(FIELD, Integer.toString(i), StringField.TYPE_STORED));
        writer.addDocument(doc);
      }
      if (fullMerge) {
        writer.forceMerge(1);
      }
      writer.close();

      BooleanQuery booleanQuery = new BooleanQuery();
      booleanQuery.add(new TermQuery(new Term(FIELD, "36")), BooleanClause.Occur.SHOULD);
     
     
      IndexSearcher indexSearcher = new IndexSearcher(directory, true);
      ScoreDoc[] hits = indexSearcher.search(booleanQuery, filter, 1000).scoreDocs;
      assertEquals("Number of matched documents", 1, hits.length);
      indexSearcher.close();
    }
    catch (IOException e) {
      fail(e.getMessage());
    }
    
  }

