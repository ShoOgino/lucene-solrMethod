  private Query extractInnerQuery(Query q) {
    if (q instanceof ConstantScoreQuery) {
      // wrapped as ConstantScoreQuery using QueryWrapperFilter
      q = ((QueryWrapperFilter) ((ConstantScoreQuery) q).getFilter()).getQuery();
    }
    return q;
  }

