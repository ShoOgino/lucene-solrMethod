  @Override
  protected void setUp() throws Exception {
    super.setUp();
    random = newRandom();
    dir = new MockRAMDirectory();
    // TODO: fix mocktokenizer to not extend chartokenizer, so you can have an 'empty' keyword.
    // currently, this means 'empty tokens' arent created/tested in the enumeration:
    // <mikemccand> it's like having a big hairy scary monster in the basement but being upset that it doesn't have fangs
    RandomIndexWriter writer = new RandomIndexWriter(random, dir, new IndexWriterConfig(TEST_VERSION_CURRENT,
                                                                                        new MockAnalyzer(MockTokenizer.KEYWORD, false)));
    
    Document doc = new Document();
    Field field = new Field("field", "", Field.Store.NO, Field.Index.ANALYZED);
    doc.add(field);

    for (int i = 0; i < 2000*_TestUtil.getRandomMultiplier(); i++) {
      field.setValue(_TestUtil.randomUnicodeString(random));
      writer.addDocument(doc);
    }
    reader = writer.getReader();
    searcher = new IndexSearcher(reader);
    writer.close();
  }

