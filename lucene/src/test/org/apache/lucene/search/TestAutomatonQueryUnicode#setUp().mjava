  public void setUp() throws Exception {
    super.setUp();
    Random random = newRandom();
    directory = new MockRAMDirectory();
    RandomIndexWriter writer = new RandomIndexWriter(random, directory);
    Document doc = new Document();
    Field titleField = new Field("title", "some title", Field.Store.NO,
        Field.Index.ANALYZED);
    Field field = new Field(FN, "", Field.Store.NO,
        Field.Index.ANALYZED);
    Field footerField = new Field("footer", "a footer", Field.Store.NO,
        Field.Index.ANALYZED);
    doc.add(titleField);
    doc.add(field);
    doc.add(footerField);
    field.setValue("\uD866\uDF05abcdef");
    writer.addDocument(doc);
    field.setValue("\uD866\uDF06ghijkl");
    writer.addDocument(doc);
    // this sorts before the previous two in UTF-8/UTF-32, but after in UTF-16!!!
    field.setValue("\uFB94mnopqr"); 
    writer.addDocument(doc);
    field.setValue("\uFB95stuvwx"); // this one too.
    writer.addDocument(doc);
    field.setValue("a\uFFFCbc");
    writer.addDocument(doc);
    field.setValue("a\uFFFDbc");
    writer.addDocument(doc);
    field.setValue("a\uFFFEbc");
    writer.addDocument(doc);
    field.setValue("a\uFB94bc");
    writer.addDocument(doc);
    field.setValue("bacadaba");
    writer.addDocument(doc);
    field.setValue("\uFFFD");
    writer.addDocument(doc);
    field.setValue("\uFFFD\uD866\uDF05");
    writer.addDocument(doc);
    field.setValue("\uFFFD\uFFFD");
    writer.addDocument(doc);
    reader = writer.getReader();
    searcher = new IndexSearcher(reader);
    writer.close();
  }

