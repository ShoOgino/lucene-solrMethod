  @BeforeClass
  public static void beforeClassLuceneTestCaseJ4() {
    savedDefaultCodec = CodecProvider.getDefaultCodec();
    codec = _TestUtil.getTestCodec();
    if (codec.equals("random"))
      codec = CodecProvider.CORE_CODECS[seedRnd.nextInt(CodecProvider.CORE_CODECS.length)];

    // If we're running w/ PreFlex codec we must swap in the
    // test-only PreFlexRW codec (since core PreFlex can
    // only read segments):
    if (codec.equals("PreFlex")) {
      CodecProvider.getDefault().register(new PreFlexRWCodec());
    } 
    CodecProvider.setDefaultCodec(codec);
  }

