  /** Returns random string, including full unicode range. */
  public static RegExp randomRegexp(Random r) {
    while (true) {
      String regexp = randomRegexpString(r);
      // we will also generate some undefined unicode queries
      if (!UnicodeUtil.validUTF16String(regexp))
        continue;
      try {
        // NOTE: we parse-tostring-parse again, because we are
        // really abusing RegExp.toString() here (its just for debugging)
        return new RegExp(new RegExp(regexp, RegExp.NONE).toString(), RegExp.NONE);
      } catch (Exception e) {}
    }
  }

