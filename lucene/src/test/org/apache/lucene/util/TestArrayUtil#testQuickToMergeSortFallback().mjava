  // This is a test for LUCENE-3054 (which fails without the merge sort fall back with stack overflow in most cases)
  public void testQuickToMergeSortFallback() {
    for (int i = 0, c = 500 * RANDOM_MULTIPLIER; i < c; i++) {
      Integer[] a1 = createSparseRandomArray(40000), a2 = a1.clone();
      ArrayUtil.quickSort(a1);
      Arrays.sort(a2);
      assertArrayEquals(a2, a1);
    }
  }

