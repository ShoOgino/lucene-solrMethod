  @Override
  public synchronized void sync(Collection<String> names) throws IOException {
    maybeYield();
    for (String name : names)
      maybeThrowDeterministicException();
    if (crashed)
      throw new IOException("cannot sync after crash");
    unSyncedFiles.removeAll(names);
    delegate.sync(names);
  }

