    // Tests if payloads are correctly stored and loaded using both RamDirectory and FSDirectory
    public void testPayloadsEncoding() throws Exception {
        // first perform the test using a RAMDirectory
        Directory dir = newDirectory();
        performTest(random, dir);
        dir.close();
        // now use a FSDirectory and repeat same test
        File dirName = _TestUtil.getTempDir("test_payloads");
        dir = FSDirectory.open(dirName);
        performTest(random, dir);
       _TestUtil.rmDir(dirName);
        dir.close();
    }

