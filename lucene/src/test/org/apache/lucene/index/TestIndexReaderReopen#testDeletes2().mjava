  public void testDeletes2() throws Throwable {
    Directory dir = newDirectory();
    createIndex(random, dir, false);
    // Get delete bitVector
    modifyIndex(0, dir);
    IndexReader r1 = IndexReader.open(dir, false);

    // Add doc:
    modifyIndex(5, dir);

    IndexReader r2 = IndexReader.openIfChanged(r1);
    assertNotNull(r2);
    assertTrue(r1 != r2);

    IndexReader[] rs2 = r2.getSequentialSubReaders();

    SegmentReader sr1 = getOnlySegmentReader(r1);
    SegmentReader sr2 = (SegmentReader) rs2[0];

    // At this point they share the same BitVector
    assertTrue(sr1.liveDocs==sr2.liveDocs);
    final BitVector liveDocs = sr1.liveDocs;
    r1.close();

    r2.deleteDocument(0);
    assertTrue(liveDocs==sr2.liveDocs);
    r2.close();
    dir.close();
  }

