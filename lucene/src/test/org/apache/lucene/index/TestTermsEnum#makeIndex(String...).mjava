  private IndexReader makeIndex(String... terms) throws Exception {
    d = newDirectory();
    IndexWriterConfig iwc = newIndexWriterConfig(TEST_VERSION_CURRENT, new MockAnalyzer(random));

    /*
    CoreCodecProvider cp = new CoreCodecProvider();    
    cp.unregister(cp.lookup("Standard"));
    cp.register(new StandardCodec(minTermsInBlock, maxTermsInBlock));
    cp.setDefaultFieldCodec("Standard");
    iwc.setCodecProvider(cp);
    */

    final RandomIndexWriter w = new RandomIndexWriter(random, d, iwc);
    w.w.setInfoStream(VERBOSE ? System.out : null);
    for(String term : terms) {
      Document doc = new Document();
      Field f = newField(FIELD, term, Field.Index.NOT_ANALYZED_NO_NORMS);
      doc.add(f);
      w.addDocument(doc);
    }
    if (r != null) {
      close();
    }
    r = w.getReader();
    w.close();
    return r;
  }

