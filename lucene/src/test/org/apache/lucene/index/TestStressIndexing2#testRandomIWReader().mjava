  public void testRandomIWReader() throws Throwable {
    r = newRandom();
    Directory dir = new MockRAMDirectory();
    
    // TODO: verify equals using IW.getReader
    DocsAndWriter dw = indexRandomIWReader(5, 3, 100, dir);
    IndexReader r = dw.writer.getReader();
    dw.writer.commit();
    verifyEquals(r, dir, "id");
    FlexTestUtil.verifyFlexVsPreFlex(this.r, r);
    FlexTestUtil.verifyFlexVsPreFlex(this.r, dir);
    r.close();
    dw.writer.close();
    dir.close();
  }

