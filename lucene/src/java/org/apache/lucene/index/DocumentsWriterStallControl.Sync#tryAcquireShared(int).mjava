    @Override
    public int tryAcquireShared(int acquires) {
      assert maybeSetHasBlocked(getState());
      return getState() == 0 ? 1 : -1;
    }

