  /** @deprecated Switch to the flex API {@link
   *  IndexReader#termDocsEnum} instead */
  @Deprecated
  @Override
  public TermPositions termPositions() throws IOException {
    ensureOpen();
    if (core.isPreFlex) {
      // For old API on an old segment, instead of
      // converting old API -> new API -> old API, just give
      // direct access to old:
      final PreFlexFields pre = (PreFlexFields) core.fields;
      SegmentTermPositions stp = new SegmentTermPositions(pre.freqStream, pre.proxStream, pre.tis, core.fieldInfos);
      stp.setSkipDocs(deletedDocs);
      return stp;
    } else {
      // Emulate old API
      return new LegacyTermPositions();
    }
  }

