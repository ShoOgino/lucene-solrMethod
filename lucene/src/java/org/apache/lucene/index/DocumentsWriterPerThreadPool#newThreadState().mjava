  public synchronized ThreadState newThreadState() {
    if (numThreadStatesActive < perThreads.length) {
      return perThreads[numThreadStatesActive++];
    }
    return null;
  }

