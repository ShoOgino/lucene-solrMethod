  private void applyAllDeletes(DocumentsWriterDeleteQueue deleteQueue) throws IOException {
    if (deleteQueue != null && !flushControl.isFullFlush()) {
      synchronized (ticketQueue) {
        ticketQueue.incTicketCount();// first inc the ticket count - freeze opens a window for #anyChanges to fail
        // Freeze and insert the delete flush ticket in the queue
        ticketQueue.add(new FlushTicket(deleteQueue.freezeGlobalBuffer(null), false));
        applyFlushTickets();
      }
    }
    indexWriter.applyAllDeletes();
    indexWriter.flushCount.incrementAndGet();
  }

