  /**
   * Returns the time the index in the named directory was last modified. 
   * Do not use this to check whether the reader is still up-to-date, use
   * {@link #isCurrent()} instead. 
   * @throws CorruptIndexException if the index is corrupt
   * @throws IOException if there is a low-level IO error
   */
  public static long lastModified(final Directory directory) throws CorruptIndexException, IOException {
    return ((Long) new SegmentInfos.FindSegmentsFile(directory) {
      @Override
      public Object doBody(String segmentFileName) throws IOException {
        return Long.valueOf(directory.fileModified(segmentFileName));
      }
    }.run()).longValue();
  }

