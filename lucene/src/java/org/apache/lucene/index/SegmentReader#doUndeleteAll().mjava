  @Override
  protected void doUndeleteAll() {
    liveDocsDirty = false;
    if (liveDocs != null) {
      assert liveDocsRef != null;
      liveDocsRef.decrementAndGet();
      liveDocs = null;
      liveDocsRef = null;
      pendingDeleteCount = 0;
      si.clearDelGen();
      si.setDelCount(0);
    } else {
      assert liveDocsRef == null;
      assert pendingDeleteCount == 0;
    }
  }

