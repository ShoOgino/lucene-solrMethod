  synchronized private void initFlushState(boolean onlyDocStore) {
    initSegmentName(onlyDocStore);
    final SegmentCodecs info = SegmentCodecs.build(fieldInfos, writer.codecs);
    flushState = new SegmentWriteState(infoStream, directory, segment, fieldInfos,
                                       docStoreSegment, numDocsInRAM, numDocsInStore, writer.getConfig().getTermIndexInterval(), info, bytesUsed);
  }

