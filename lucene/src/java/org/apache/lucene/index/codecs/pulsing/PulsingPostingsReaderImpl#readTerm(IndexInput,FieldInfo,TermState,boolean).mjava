  @Override
  public void readTerm(IndexInput termsIn, FieldInfo fieldInfo, TermState _termState, boolean isIndexTerm) throws IOException {

    PulsingTermState termState = (PulsingTermState) _termState;

    termState.pendingIndexTerm |= isIndexTerm;

    // TODO: wasteful to use whole byte for this (need just a 1 bit);
    if (termsIn.readByte() == 1) {

      // Inlined into terms dict -- just read the byte[] blob in,
      // but don't decode it now (we only decode when a DocsEnum
      // or D&PEnum is pulled):
      termState.postingsSize = termsIn.readVInt();
      if (termState.postings == null || termState.postings.length < termState.postingsSize) {
        termState.postings = new byte[ArrayUtil.oversize(termState.postingsSize, 1)];
      }
      termsIn.readBytes(termState.postings, 0, termState.postingsSize);
    } else {
      termState.postingsSize = -1;
      termState.wrappedTermState.docFreq = termState.docFreq;
      wrappedPostingsReader.readTerm(termsIn, fieldInfo, termState.wrappedTermState, termState.pendingIndexTerm);
      termState.pendingIndexTerm = false;
    }
  }

