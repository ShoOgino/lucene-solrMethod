  synchronized void setSimilarityProvider(SimilarityProvider similarity) {
    this.similarityProvider = similarity;
    for(int i=0;i<threadStates.length;i++) {
      threadStates[i].docState.similarityProvider = similarity;
    }
  }

