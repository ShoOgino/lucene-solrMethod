  private void loadLiveDocs() throws IOException {
    // NOTE: the bitvector is stored using the regular directory, not cfs
    if (hasDeletions(si)) {
      liveDocs = new BitVector(directory(), si.getDelFileName());
      if (liveDocs.getVersion() < BitVector.VERSION_DGAPS_CLEARED) {
        liveDocs.invertAll();
      }
      liveDocsRef = new AtomicInteger(1);
      assert checkLiveCounts();
      if (liveDocs.size() != si.docCount) {
        throw new CorruptIndexException("document count mismatch: deleted docs count " + liveDocs.size() + " vs segment doc count " + si.docCount + " segment=" + si.name);
      }
    } else
      assert si.getDelCount() == 0;
  }

