  /**
   * Expert: set the merge scheduler used by this writer.
   * @deprecated use {@link IndexWriterConfig#setMergeScheduler(MergeScheduler)} instead
   */
  synchronized public void setMergeScheduler(MergeScheduler mergeScheduler) throws CorruptIndexException, IOException {
    ensureOpen();
    if (mergeScheduler == null)
      throw new NullPointerException("MergeScheduler must be non-null");

    if (this.mergeScheduler != mergeScheduler) {
      finishMerges(true);
      this.mergeScheduler.close();
    }
    this.mergeScheduler = mergeScheduler;
    if (infoStream != null)
      message("setMergeScheduler " + mergeScheduler);
    // Required so config.getMergeScheduler returns the right value. But this will
    // go away together with the method in 4.0.
    config.setMergeScheduler(mergeScheduler);
  }

