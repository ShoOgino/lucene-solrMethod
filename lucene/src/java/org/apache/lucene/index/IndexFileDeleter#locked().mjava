  // called only from assert
  private boolean locked() {
    return writer == null || Thread.holdsLock(writer);
  }

