  /** Expert: Set the Similarity implementation used by this IndexWriter.
   *
   * @see Similarity#setDefault(Similarity)
   * @deprecated use {@link IndexWriterConfig#setSimilarity(Similarity)} instead
   */
  @Deprecated
  public void setSimilarity(Similarity similarity) {
    ensureOpen();
    this.similarity = similarity;
    docWriter.setSimilarity(similarity);
    // Required so config.getSimilarity returns the right value. But this will
    // go away together with the method in 4.0.
    config.setSimilarity(similarity);
  }

