  private final void pushToLastSegment(SegmentDeletes segmentDeletes) {
    synchronized(indexWriter) {
      // Lock order: DW -> BD
      if (segmentDeletes.any()) {
        if (indexWriter.segmentInfos.size() > 0) {
          if (infoStream != null) {
            message("flush: push buffered deletes to previously flushed segment " + indexWriter.segmentInfos.lastElement());
          }
          bufferedDeletes.pushDeletes(segmentDeletes, indexWriter.segmentInfos.lastElement(), true);
        } else {
          if (infoStream != null) {
            message("flush: drop buffered deletes: no segments");
          }
          // We can safely discard these deletes: since
          // there are no segments, the deletions cannot
          // affect anything.
        }
      }
    }
  }

