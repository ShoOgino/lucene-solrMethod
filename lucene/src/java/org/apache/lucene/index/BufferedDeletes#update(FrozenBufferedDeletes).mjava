  void update(FrozenBufferedDeletes in) {
    numTermDeletes.addAndGet(in.numTermDeletes);
    for(Term term : in.terms) {
      if (!terms.containsKey(term)) {
        // only incr bytesUsed if this term wasn't already buffered:
        bytesUsed.addAndGet(BYTES_PER_DEL_TERM);
      }
      terms.put(term, MAX_INT);
    }

    for(int queryIdx=0;queryIdx<in.queries.length;queryIdx++) {
      final Query query = in.queries[queryIdx];
      if (!queries.containsKey(query)) {
        // only incr bytesUsed if this query wasn't already buffered:
        bytesUsed.addAndGet(BYTES_PER_DEL_QUERY);
      }
      queries.put(query, MAX_INT);
    }
  }

