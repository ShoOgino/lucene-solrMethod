  public SegmentWriteState(PrintStream infoStream, Directory directory, String segmentName, FieldInfos fieldInfos,
                           String docStoreSegmentName, int numDocs,
                           int numDocsInStore, int termIndexInterval,
                           CodecProvider codecs) {
    this.infoStream = infoStream;
    this.directory = directory;
    this.segmentName = segmentName;
    this.fieldInfos = fieldInfos;
    this.docStoreSegmentName = docStoreSegmentName;
    this.numDocs = numDocs;
    this.numDocsInStore = numDocsInStore;
    this.termIndexInterval = termIndexInterval;
    this.codec = codecs.getWriter(this);
    flushedFiles = new HashSet<String>();
  }

