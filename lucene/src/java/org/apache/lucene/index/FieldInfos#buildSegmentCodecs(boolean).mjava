  /**
   * Builds the {@link SegmentCodecs} mapping for this {@link FieldInfos} instance.
   * @param clearBuilder <code>true</code> iff the internal {@link SegmentCodecsBuilder} must be cleared otherwise <code>false</code>
   */
  public SegmentCodecs buildSegmentCodecs(boolean clearBuilder) {
    if (globalFieldNumbers == null) {
      throw new IllegalStateException("FieldInfos are read-only no SegmentCodecs available");
    }
    assert segmentCodecsBuilder != null;
    final SegmentCodecs segmentCodecs = segmentCodecsBuilder.build();
    if (clearBuilder) {
      segmentCodecsBuilder.clear();
    }
    return segmentCodecs;
  }

