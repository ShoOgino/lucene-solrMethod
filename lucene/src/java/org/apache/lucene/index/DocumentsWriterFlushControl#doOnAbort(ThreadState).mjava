  synchronized void doOnAbort(ThreadState state) {
    if (state.flushPending) {
      flushBytes -= state.bytesUsed;
    } else {
      activeBytes -= state.bytesUsed;
    }
    // Take it out of the loop this DWPT is stale
    perThreadPool.replaceForFlush(state, closed);
    healthiness.updateStalled(this);
  }

