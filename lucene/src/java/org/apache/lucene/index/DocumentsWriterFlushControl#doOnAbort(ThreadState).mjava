  synchronized void doOnAbort(ThreadState state) {
    if (state.flushPending) {
      flushBytes -= state.perThreadBytes;
    } else {
      activeBytes -= state.perThreadBytes;
    }
    // take it out of the loop this DWPT is stale
    perThreadPool.replaceForFlush(state, closed);
    healthiness.updateStalled(this);
  }

