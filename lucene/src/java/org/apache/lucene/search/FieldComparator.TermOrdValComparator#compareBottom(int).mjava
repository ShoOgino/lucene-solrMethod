    @Override
    public int compareBottom(int doc) {
      assert bottomSlot != -1;
      int order = termsIndex.getOrd(doc);
      final int cmp = bottomOrd - order;
      if (cmp != 0) {
        return cmp;
      }

      if (bottomValue == null) {
        if (order == 0) {
          // unset
          return 0;
        }
        // bottom wins
        return -1;
      } else if (order == 0) {
        // doc wins
        return 1;
      }
      termsIndex.lookup(order, tempBR);
      return bottomValue.compareTo(tempBR);
    }

