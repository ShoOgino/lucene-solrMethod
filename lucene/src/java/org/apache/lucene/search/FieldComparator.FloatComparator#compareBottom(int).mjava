    @Override
    public int compareBottom(int doc) {
      // TODO: are there sneaky non-branch ways to compute sign of float?
      final float v2 = (checkMissing && !cached.valid.get(doc)) 
        ? missingValue : cached.values[doc];
      
      if (bottom > v2) {
        return 1;
      } else if (bottom < v2) {
        return -1;
      } else {
        return 0;
      }
    }

