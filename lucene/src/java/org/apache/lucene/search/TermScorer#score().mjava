  @Override
  public float score() {
    assert doc != NO_MORE_DOCS;
    float raw =                                   // compute tf(f)*weight
      freq < SCORE_CACHE_SIZE                        // check cache
      ? scoreCache[freq]                             // cache hit
      : similarity.tf(freq)*weightValue;        // cache miss

    return norms == null ? raw : raw * similarity.decodeNormValue(norms[doc]); // normalize for field
  }

