  /**
   * Utility function to help check what bits are valid
   */
  protected Bits checkMatchAllBits( Bits deleted, OpenBitSet valid, int maxDocs, int numDocs )
  {
    if( numDocs != maxDocs ) {
      if( hasOption( OPTION_CACHE_BITS ) ) {
        if( deleted == null ) {
          for( int i=0; i<maxDocs; i++ ) {
            if( !valid.get(i) ) {
              return valid;
            }
          }
        }
        else {
          for( int i=0; i<maxDocs; i++ ) {
            if( !deleted.get(i) && !valid.get(i) ) {
              return valid;
            }
          }
        }
      }
      else {
        return null;
      }
    }
    return new Bits.MatchAllBits( maxDocs );
  }

