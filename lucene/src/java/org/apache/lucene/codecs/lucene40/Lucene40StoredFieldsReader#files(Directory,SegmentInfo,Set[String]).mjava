  // TODO: split into PreFlexFieldsReader so it can handle this shared docstore crap?
  // only preflex segments refer to these?
  public static void files(Directory dir, SegmentInfo info, Set<String> files) throws IOException {
    if (info.getDocStoreOffset() != -1) {
      assert info.getDocStoreSegment() != null;
      if (!info.getDocStoreIsCompoundFile()) {
        files.add(IndexFileNames.segmentFileName(info.getDocStoreSegment(), "", Lucene40StoredFieldsWriter.FIELDS_INDEX_EXTENSION));
        files.add(IndexFileNames.segmentFileName(info.getDocStoreSegment(), "", Lucene40StoredFieldsWriter.FIELDS_EXTENSION));
      }
    } else {
      files.add(IndexFileNames.segmentFileName(info.name, "", Lucene40StoredFieldsWriter.FIELDS_INDEX_EXTENSION));
      files.add(IndexFileNames.segmentFileName(info.name, "", Lucene40StoredFieldsWriter.FIELDS_EXTENSION));
    }
  }

