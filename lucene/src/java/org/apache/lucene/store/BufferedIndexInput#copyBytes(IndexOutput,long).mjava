  @Override
  public void copyBytes(IndexOutput out, long numBytes) throws IOException {
    assert numBytes >= 0: "numBytes=" + numBytes;

    while (numBytes > 0) {
      if (bufferLength == bufferPosition) {
        refill();
      }
      numBytes -= flushBuffer(out, numBytes);
    }
  }

