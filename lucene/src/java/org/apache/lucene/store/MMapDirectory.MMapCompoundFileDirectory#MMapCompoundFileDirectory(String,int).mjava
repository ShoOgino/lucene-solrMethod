    public MMapCompoundFileDirectory(String fileName, int readBufferSize) throws IOException {
      super(MMapDirectory.this, fileName, readBufferSize);
      IndexInput stream = null;
      try {
        File f = new File(MMapDirectory.this.getDirectory(), fileName);
        raf = new RandomAccessFile(f, "r");
        stream = new MMapIndexInput(raf, 0, raf.length(), chunkSizePower);
        initForRead(CompoundFileDirectory.readEntries(stream, MMapDirectory.this, fileName));
        stream.close();
      } catch (IOException e) {
        // throw our original exception
        IOUtils.closeSafely(e, raf, stream);
      }
    }

