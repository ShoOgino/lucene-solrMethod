    @Override
    public void close() throws IOException {
      try {
        if (isClone || buffers == null) return;
        
        // for extra safety unset also all clones' buffers:
        synchronized(this.clones) {
          for (final MMapIndexInput clone : this.clones.keySet()) {
            assert clone.isClone;
            clone.unsetBuffers();
          }
          this.clones.clear();
        }
        
        curBuf = null; curBufIndex = 0; // nuke curr pointer early
        for (int bufNr = 0; bufNr < buffers.length; bufNr++) {
          cleanMapping(buffers[bufNr]);
        }
      } finally {
        unsetBuffers();
      }
    }

