    public NIOFSCompoundFileDirectory(String fileName, int readBufferSize) throws IOException {
      super(NIOFSDirectory.this, fileName, readBufferSize);
      IndexInput stream = null;
      try {
        File f = new File(NIOFSDirectory.this.getDirectory(), fileName);
        fd = new SimpleFSIndexInput.Descriptor(f, "r");
        fc = fd.getChannel();
        stream = new NIOFSIndexInput(fd, fc, 0, fd.length, readBufferSize,
            getReadChunkSize());
        initForRead(CompoundFileDirectory.readEntries(stream, NIOFSDirectory.this, fileName));
        stream.close();
      } catch (IOException e) {
        // throw our original exception
        IOUtils.closeSafely(e, fc, fd, stream);
      }
    }

