  /** Just like {@link #open(File)}, but allows you to
   *  also specify a custom {@link LockFactory}. */
  public static FSDirectory open(File path, LockFactory lockFactory) throws IOException {
    if (Constants.WINDOWS) {
      if (MMapDirectory.UNMAP_SUPPORTED && Constants.JRE_IS_64BIT)
        return new MMapDirectory(path, lockFactory);
      else
        return new SimpleFSDirectory(path, lockFactory);
    } else {
      return new NIOFSDirectory(path, lockFactory);
    }
  }

