  /**
   * Create a new CompoundFileDirectory.
   * <p>
   * NOTE: subclasses must call {@link #initForRead(Map)} before the directory can be used.
   */
  public CompoundFileDirectory(Directory directory, String fileName, int readBufferSize) throws IOException {
    assert !(directory instanceof CompoundFileDirectory) : "compound file inside of compound file: " + fileName;
    this.directory = directory;
    this.fileName = fileName;
    this.readBufferSize = readBufferSize;
    this.isOpen = false;
  }

