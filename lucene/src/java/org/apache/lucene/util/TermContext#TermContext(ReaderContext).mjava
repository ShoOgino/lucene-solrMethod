  /**
   * Creates an empty {@link TermContext} from a {@link ReaderContext}
   */
  public TermContext(ReaderContext context) {
    assert context != null && context.isTopLevel;
    topReaderContext = context;
    docFreq = 0;
    final int len;
    if (context.leaves() == null) {
      len = 1;
    } else {
      len = context.leaves().length;
    }
    states = new TermState[len];
  }

