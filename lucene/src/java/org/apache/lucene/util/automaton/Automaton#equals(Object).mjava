  /**
   * Returns true if the language of this automaton is equal to the language of
   * the given automaton. Implemented using <code>hashCode</code> and
   * <code>subsetOf</code>.
   */
  @Override
  public boolean equals(Object obj) {
    if (obj == this) return true;
    if (!(obj instanceof Automaton)) return false;
    Automaton a = (Automaton) obj;
    if (isSingleton() && a.isSingleton()) return singleton.equals(a.singleton);
    return hashCode() == a.hashCode() && BasicOperations.subsetOf(this, a)
        && BasicOperations.subsetOf(a, this);
  }

