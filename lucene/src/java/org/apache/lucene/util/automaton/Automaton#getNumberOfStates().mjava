  /**
   * Returns the number of states in this automaton.
   */
  public int getNumberOfStates() {
    if (isSingleton()) return singleton.codePointCount(0, singleton.length()) + 1;
    return getNumberedStates().length;
  }

