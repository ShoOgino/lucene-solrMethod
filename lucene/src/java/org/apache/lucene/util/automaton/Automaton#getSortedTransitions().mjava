  /**
   * Returns a sorted array of transitions for each state (and sets state
   * numbers).
   */
  public Transition[][] getSortedTransitions() {
    final State[] states = getNumberedStates();
    Transition[][] transitions = new Transition[states.length][];
    for (State s : states) {
      s.sortTransitions(Transition.CompareByMinMaxThenDest);
      s.trimTransitionsArray();
      transitions[s.number] = s.transitionsArray;
      assert s.transitionsArray != null;
    }
    return transitions;
  }

