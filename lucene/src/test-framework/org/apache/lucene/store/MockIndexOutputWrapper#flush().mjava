  @Override
  public void flush() throws IOException {
    dir.maybeThrowDeterministicException();
    delegate.flush();
  }

