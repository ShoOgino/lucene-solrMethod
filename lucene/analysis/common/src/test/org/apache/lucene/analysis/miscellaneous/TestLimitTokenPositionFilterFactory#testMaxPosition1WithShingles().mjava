  public void testMaxPosition1WithShingles() throws Exception {
    Reader reader = new StringReader("one two three four five");
    MockTokenizer tokenizer = whitespaceMockTokenizer(reader);
    // LimitTokenPositionFilter doesn't consume the entire stream that it wraps
    tokenizer.setEnableChecks(false);
    TokenStream stream = tokenizer;
    stream = tokenFilterFactory("Shingle",
        "minShingleSize", "2",
        "maxShingleSize", "3",
        "outputUnigrams", "true").create(stream);
    stream = tokenFilterFactory("LimitTokenPosition",
        "maxTokenPosition", "1").create(stream);
    assertTokenStreamContents(stream, new String[] { "one", "one two", "one two three" });
  }

