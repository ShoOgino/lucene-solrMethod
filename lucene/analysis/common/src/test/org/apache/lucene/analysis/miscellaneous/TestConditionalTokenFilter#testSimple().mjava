  public void testSimple() throws IOException {

    CannedTokenStream cts = new CannedTokenStream(
        new Token("Alice", 1, 0, 5),
        new Token("Bob", 1, 6, 9),
        new Token("Clara", 1, 10, 15),
        new Token("David", 1, 16, 21)
    );

    TokenStream t = new ConditionalTokenFilter(cts, AssertingLowerCaseFilter::new) {
      CharTermAttribute termAtt = addAttribute(CharTermAttribute.class);
      @Override
      protected boolean shouldFilter() throws IOException {
        return termAtt.toString().contains("o") == false;
      }
    };

    assertTokenStreamContents(t, new String[]{ "alice", "Bob", "clara", "david" });
    assertTrue(closed);
    assertTrue(reset);
    assertTrue(ended);
  }

