  public void testMultitokenWrapping() throws IOException {
    CannedTokenStream cts = new CannedTokenStream(
        new Token("tokenpos1", 0, 9),
        new Token("tokenpos2", 10, 19),
        new Token("tokenpos3", 20, 29),
        new Token("tokenpos4", 30, 39)
    );

    TokenStream ts = new ConditionalTokenFilter(cts, TokenSplitter::new) {
      final CharTermAttribute termAtt = addAttribute(CharTermAttribute.class);
      @Override
      protected boolean shouldFilter() throws IOException {
        return termAtt.toString().contains("2") == false;
      }
    };

    assertTokenStreamContents(ts, new String[]{
        "toke", "npos1", "tokenpos2", "toke", "npos3", "toke", "npos4"
    });
  }

