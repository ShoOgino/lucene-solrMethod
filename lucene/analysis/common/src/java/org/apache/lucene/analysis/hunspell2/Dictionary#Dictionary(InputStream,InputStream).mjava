  /**
   * Creates a new Dictionary containing the information read from the provided InputStreams to hunspell affix
   * and dictionary files.
   * You have to close the provided InputStreams yourself.
   *
   * @param affix InputStream for reading the hunspell affix file (won't be closed).
   * @param dictionary InputStream for reading the hunspell dictionary file (won't be closed).
   * @throws IOException Can be thrown while reading from the InputStreams
   * @throws ParseException Can be thrown if the content of the files does not meet expected formats
   */
  public Dictionary(InputStream affix, InputStream dictionary) throws IOException, ParseException {
    BufferedInputStream buffered = new BufferedInputStream(affix, 8192);
    buffered.mark(8192);
    String encoding = getDictionaryEncoding(affix);
    buffered.reset();
    CharsetDecoder decoder = getJavaEncoding(encoding);
    readAffixFile(buffered, decoder);
    flagLookup.add(new BytesRef()); // no flags -> ord 0
    PositiveIntOutputs o = PositiveIntOutputs.getSingleton();
    Builder<Long> b = new Builder<Long>(FST.INPUT_TYPE.BYTE4, o);
    readDictionaryFile(dictionary, decoder, b);
    words = b.finish();
  }

