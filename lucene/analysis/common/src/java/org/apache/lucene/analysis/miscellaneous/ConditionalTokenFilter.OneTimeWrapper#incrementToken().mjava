    @Override
    public boolean incrementToken() throws IOException {
      if (state == TokenState.PREBUFFERING) {
        state = TokenState.DELEGATING;
        return true;
      }
      assert state == TokenState.DELEGATING;
      boolean more = input.incrementToken();
      if (more && shouldFilter()) {
        return true;
      }
      if (more) {
        endOffset = offsetAtt.endOffset();
        bufferedState = captureState();
      }
      else {
        exhausted = true;
      }
      return false;
    }

