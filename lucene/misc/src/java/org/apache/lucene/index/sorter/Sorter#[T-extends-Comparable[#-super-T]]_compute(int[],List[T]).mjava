  /** Computes the old-to-new permutation over the given documents and values. */
  protected static <T extends Comparable<? super T>> int[] compute(int[] docs, List<T> values) {
    SorterTemplate sorter = new DocValueSorterTemplate<T>(docs, values);
    sorter.quickSort(0, docs.length - 1);
    
    final int[] oldToNew = new int[docs.length];
    for (int i = 0; i < docs.length; i++) {
      oldToNew[docs[i]] = i;
    }
    return oldToNew;
  }

