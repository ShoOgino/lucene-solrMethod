  /**
   * Create a new {@link EarlyTerminatingSortingCollector} instance.
   * 
   * @param in
   *          the collector to wrap
   * @param sorter
   *          the same sorter as the one which is used by {@link IndexWriter}'s
   *          {@link SortingMergePolicy}
   * @param numDocsToCollect
   *          the number of documents to collect on each segment. When wrapping
   *          a {@link TopDocsCollector}, this number should be the number of
   *          hits.
   */
  public EarlyTerminatingSortingCollector(Collector in, Sorter sorter, int numDocsToCollect) {
    if (numDocsToCollect <= 0) {
      throw new IllegalStateException("numDocsToCollect must always be > 0, got " + segmentTotalCollect);
    }
    this.in = in;
    this.sorter = sorter;
    this.numDocsToCollect = numDocsToCollect;
  }

