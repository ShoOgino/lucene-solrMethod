  @Test
  public void testCanWaitForNonexistantCollection() throws Exception {

    Future<Boolean> future = waitInBackground("delayed", MAX_WAIT_TIMEOUT, TimeUnit.SECONDS, DocCollection::isFullyActive);
    cluster.createCollection("delayed", 1, 1, "config", new HashMap<>());
    assertTrue("waitForState was not triggered by collection creation", future.get());

  }

