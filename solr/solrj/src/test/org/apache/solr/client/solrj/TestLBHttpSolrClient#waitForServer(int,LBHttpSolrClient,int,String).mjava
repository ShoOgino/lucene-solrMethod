  // wait maximum ms for serverName to come back up
  private void waitForServer(int maximum, LBHttpSolrClient client, int nServers, String serverName) throws Exception {
    long endTime = System.currentTimeMillis() + maximum;
    while (System.currentTimeMillis() < endTime) {
      QueryResponse resp;
      try {
        resp = client.query(new SolrQuery("*:*"));
      } catch (Exception e) {
        log.warn("", e);
        continue;
      }
      String name = resp.getResults().get(0).getFieldValue("name").toString();
      if (name.equals(serverName))
        return;
    }
  }

