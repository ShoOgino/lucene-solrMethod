  public void testReplicaCountSuggestions() {
    String autoScalingjson = "  { cluster-policy:[" +
        "    { cores :'<10', node :'#ANY'}," +
        "    { replica :'<2',  node:'#ANY'}," +
        "    { nodeRole : overseer, replica :0}]," +
        "  cluster-preferences :[{ minimize : cores }]}";
    if(useNodeset){
      autoScalingjson = "  { cluster-policy:[" +
          "    { cores :'<10', node :'#ANY'}," +
          "    { replica :'<2',  node:'#ANY'}," +
          "    { nodeset:{nodeRole : overseer}, replica :0}]," +
          "  cluster-preferences :[{ minimize : cores }]}";

    }
    List<Suggester.SuggestionInfo> l = PolicyHelper.getSuggestions(new AutoScalingConfig((Map<String, Object>) Utils.fromJSONString(autoScalingjson)),
        cloudManagerWithData((Map) loadFromResource("testReplicaCountSuggestions.json")));
    assertFalse(l.isEmpty());

    assertEquals(1.0d, l.get(0)._get( "violation/violation/delta",null));
    assertEquals("POST", l.get(0)._get("operation/method",null));
    assertEquals("/c/mycoll1", l.get(0)._get( "operation/path",null));
    assertNotNull(l.get(0)._get("operation/command/move-replica", null));
    assertEquals("10.0.0.6:7574_solr", l.get(0)._get( "operation/command/move-replica/targetNode",null));
    /*
     * one of the two cores on 10.0.0.6:8983_solr should move to 10.0.0.6:7574_solr and
     * (everything else being equal) core_node1 is chosen ahead of core_node2 based on its name
     */
    assertEquals("core_node1", l.get(0)._get("operation/command/move-replica/replica", null));
  }

