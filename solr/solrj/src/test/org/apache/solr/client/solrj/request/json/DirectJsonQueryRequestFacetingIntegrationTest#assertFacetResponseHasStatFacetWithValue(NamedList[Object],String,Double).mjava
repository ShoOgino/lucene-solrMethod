  private void assertFacetResponseHasStatFacetWithValue(NamedList<Object> facetResponse, String expectedFacetName, Double expectedStatValue) {
    Object o = facetResponse.get(expectedFacetName);
    if (o == null) fail("Response has no top-level facet named '" + expectedFacetName + "'");
    if (!(o instanceof Number)) fail("Response has a property for the expected facet '" + expectedFacetName + "' property, but it is not a Number");

    final Number actualStatValueAsNumber = (Number) o;
    final Double actualStatValueAsDouble = ((Number) o).doubleValue();
    assertEquals(expectedStatValue, actualStatValueAsDouble, 0.5);
  }

