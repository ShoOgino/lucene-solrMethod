  /**
   * Test method for {@link LBHttpSolrClient#LBHttpSolrClient(org.apache.http.client.HttpClient, org.apache.solr.client.solrj.ResponseParser, java.lang.String[])}.
   * 
   * Validate that the parser passed in is used in the <code>HttpSolrClient</code> instances created.
   */
  @Test
  public void testLBHttpSolrClientHttpClientResponseParserStringArray() throws IOException {

    try (CloseableHttpClient httpClient = HttpClientUtil.createClient(new ModifiableSolrParams());
         LBHttpSolrClient testClient = new LBHttpSolrClient(httpClient, (ResponseParser) null);
         HttpSolrClient httpSolrClient = testClient.makeSolrClient("http://127.0.0.1:8080")) {
      assertNull("Generated server should have null parser.", httpSolrClient.getParser());
    }

    ResponseParser parser = new BinaryResponseParser();
    try (CloseableHttpClient httpClient = HttpClientUtil.createClient(new ModifiableSolrParams());
         LBHttpSolrClient testClient = new LBHttpSolrClient(httpClient, parser);
         HttpSolrClient httpSolrClient = testClient.makeSolrClient("http://127.0.0.1:8080")) {
      assertEquals("Invalid parser passed to generated server.", parser, httpSolrClient.getParser());
    }
  }

