  // wait maximum ms for serverName to come back up
  private void waitForServer(int maximum, LBHttpSolrServer server, int nServers, String serverName) throws Exception {
    long endTime = System.currentTimeMillis() + maximum;
    while (System.currentTimeMillis() < endTime) {
      QueryResponse resp = server.query(new SolrQuery("*:*"));
      String name = resp.getResults().get(0).getFieldValue("name").toString();
      if (name.equals(serverName))
        return;
    }
  }

