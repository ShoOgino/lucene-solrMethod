  @Test
  public void sortReplicasValidateLeadersMultipleLeadersComeLast() {
    List<Pair<ReplicaInfo, Row>> validReplicas = new ArrayList<Pair<ReplicaInfo, Row>>() {
      {
        add(PAIR_THREE);
        add(PAIR_ONE);
        add(PAIR_FOUR);
        add(PAIR_TWO);
      }
    };
    if (random().nextBoolean()) {
      Collections.shuffle(validReplicas, random());
    }
    validReplicas.sort(leaderLast);

    assertFalse(isReplicaLeader(validReplicas, 0));
    assertFalse(isReplicaLeader(validReplicas, 1));
    assertTrue(isReplicaLeader(validReplicas, 2));
    assertTrue(isReplicaLeader(validReplicas, 3));
  }

