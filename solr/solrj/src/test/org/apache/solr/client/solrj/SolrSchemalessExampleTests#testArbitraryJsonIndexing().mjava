  @Test
  public void testArbitraryJsonIndexing() throws Exception  {
    HttpSolrServer server = (HttpSolrServer) getSolrServer();
    server.deleteByQuery("*:*");
    server.commit();
    assertNumFound("*:*", 0); // make sure it got in

    // two docs, one with uniqueKey, another without it
    String json = "{\"id\":\"abc1\", \"name\": \"name1\"} {\"name\" : \"name2\"}";
    HttpClient httpClient = server.getHttpClient();
    HttpPost post = new HttpPost(server.getBaseURL() + "/update/json/docs");
    post.setHeader("Content-Type", "application/json");
    post.setEntity(new InputStreamEntity(new ByteArrayInputStream(json.getBytes("UTF-8")), -1));
    HttpResponse response = httpClient.execute(post);
    assertEquals(200, response.getStatusLine().getStatusCode());
    server.commit();
    assertNumFound("*:*", 2);
  }

