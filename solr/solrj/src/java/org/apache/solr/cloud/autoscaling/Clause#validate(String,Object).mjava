  public static Object validate(String name, Object val) {
    if (val == null) return null;
    ValidateInfo info = validatetypes.get(name);
    if (info == null && name.startsWith(ImplicitSnitch.SYSPROP)) info = validatetypes.get(null);
    if (info == null) throw new RuntimeException("Unknown type :" + name);
    if (info.type == Long.class) {
      Long num = parseNumber(name, val);
      if (info.min != null)
        if (num < info.min) throw new RuntimeException(name + ": " + val + " must be greater than " + info.min);
      if (info.max != null)
        if (num > info.max) throw new RuntimeException(name + ": " + val + " must be less than " + info.max);
      return num;
    } else if (info.type == String.class) {
      if (info.vals != null && !info.vals.contains(val))
        throw new RuntimeException(name + ": " + val + " must be one of " + StrUtils.join(info.vals, ','));
      return val;
    } else {
      throw new RuntimeException("Invalid type ");
    }

  }

