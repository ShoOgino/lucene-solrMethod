    public SolrRequest getOperation() {
      if (!isInitialized) {
        String coll = (String) hints.get(Hint.COLL);
        if(coll != null){
          // if this is not a known collection from the existing clusterstate,
          // then add it
          if(session.matrix.stream().noneMatch(row -> row.replicaInfo.containsKey(coll))){
            session.matrix.get(0).replicaInfo.put(coll, new HashMap<>());
            session.addClausesForCollection(session.dataProvider, coll);
            Collections.sort(session.expandedClauses);
          }
        }
        session.applyRules();
        originalViolations.addAll(session.getViolations());
        this.operation = init();
        isInitialized = true;
      }
      return operation;
    }

