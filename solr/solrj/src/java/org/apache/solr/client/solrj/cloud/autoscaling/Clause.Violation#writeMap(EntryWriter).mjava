    @Override
    public void writeMap(EntryWriter ew) throws IOException {
      ew.putIfNotNull("collection", coll);
      ew.putIfNotNull("shard", shard);
      ew.putIfNotNull("node", node);
      ew.putIfNotNull("tagKey", String.valueOf(tagKey));
      ew.putIfNotNull("violation", (MapWriter) ew1 -> {
        if (getClause().isPerCollectiontag()) ew1.put("replica", actualVal);
        else ew1.put(tag.name, String.valueOf(actualVal));
        ew1.putIfNotNull("delta", delta);
      });
      ew.put("clause", getClause());
    }

