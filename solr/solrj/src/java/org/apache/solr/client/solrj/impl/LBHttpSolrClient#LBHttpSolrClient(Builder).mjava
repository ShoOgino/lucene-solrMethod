  protected LBHttpSolrClient(Builder builder) {
    this.clientIsInternal = builder.httpClient == null;
    this.httpSolrClientBuilder = builder.httpSolrClientBuilder;
    this.httpClient = builder.httpClient == null ? constructClient(builder.baseSolrUrls.toArray(new String[builder.baseSolrUrls.size()])) : builder.httpClient;
    this.connectionTimeout = builder.connectionTimeoutMillis;
    this.soTimeout = builder.socketTimeoutMillis;    
    this.parser = builder.responseParser;

    if (! builder.baseSolrUrls.isEmpty()) {
      for (String s : builder.baseSolrUrls) {
        ServerWrapper wrapper = new ServerWrapper(makeSolrClient(s));
        aliveServers.put(wrapper.getKey(), wrapper);
      }
    }
    updateAliveList();
  }

