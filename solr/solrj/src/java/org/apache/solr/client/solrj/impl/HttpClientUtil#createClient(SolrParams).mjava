  /**
   * Creates new http client by using the provided configuration.
   * 
   * @param params
   *          http client configuration, if null a client with default
   *          configuration (no additional configuration) is created that uses
   *          ThreadSafeClientConnManager.
   */
  public static HttpClient createClient(final SolrParams params) {
    final ModifiableSolrParams config = new ModifiableSolrParams(params);
    logger.info("Creating new http client, config:" + config);
    final ThreadSafeClientConnManager mgr = new ThreadSafeClientConnManager();
    final DefaultHttpClient httpClient = new DefaultHttpClient(mgr);
    configureClient(httpClient, config);
    return httpClient;
  }

