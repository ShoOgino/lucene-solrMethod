  // This method is used by configSetUploadTool and CreateTool to resolve the configset directory.
  // Check several possibilities:
  // 1> configSetDirParam + confname is defined in configsets, thus has a conf/solrconfig.xml
  // 2> configSet is a path that contains conf/solrconfig.xml
  // 3> configSet is t 
  public static Path getConfigsetPath(String confname, String configSet, String configSetDirParam) throws IOException {

    // one of the canned configsets.
    Path ret = Paths.get(configSetDirParam, configSet, "conf", "solrconfig.xml").normalize();
    if (Files.exists(ret)) {
      return Paths.get(configSetDirParam, configSet, "conf").normalize();
    }

    // a local path to the parent of a "conf" directory 
    ret = Paths.get(configSet, "conf", "solrconfig.xml").normalize();
    if (Files.exists(ret)) {
      return Paths.get(configSet, "conf").normalize();
    }

    // A local path to the source, probably already includes "conf".
    ret = Paths.get(configSet, "solrconfig.xml").normalize();
    if (Files.exists(ret)) {
      return Paths.get(configSet).normalize();
    }

    throw new IllegalArgumentException(String.format(Locale.ROOT,
        "Could not find solrconfig.xml at %s, %s or %s",
        Paths.get(configSetDirParam, configSet, "conf", "solrconfig.xml").normalize().toAbsolutePath().toString(),
        Paths.get(configSet, "conf", "solrconfig.xml").normalize().toAbsolutePath().toString(),
        Paths.get(configSet, "solrconfig.xml").normalize().toAbsolutePath().toString()
    ));
  }

