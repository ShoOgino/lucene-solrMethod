  private static String normalizeDest(String srcName, String dstName) {
    // Special handling for "."
    if (dstName.equals(".")) {
      return Paths.get(".").normalize().toAbsolutePath().toString();
    }
    // Pull the last element of the src path and add it to the dst if the src does NOT end in a slash 

    // If the source ends in a slash, do not append the last segment to the dest
    
    if (dstName.endsWith("/")) { // Dest is a directory.
      int pos = srcName.lastIndexOf("/");
      if (pos < 0) {
        dstName += srcName;
      } else {
        dstName += srcName.substring(pos + 1);
      }
    }
    
    log.info("copying from '{}' to '{}'", srcName, dstName);
    return dstName;
  }

