  /**
   * @param name  The name of the collection
   * @param slices The logical shards of the collection.  This is used directly and a copy is not made.
   * @param props  The properties of the slice.  This is used directly and a copy is not made.
   */
  public DocCollection(String name, Map<String, Slice> slices, Map<String, Object> props, DocRouter router) {
    super( props==null ? Collections.<String,Object>emptyMap() : props);
    this.name = name;

    this.allSlices = slices;
    this.slices = new HashMap<String, Slice>();

    Iterator<Map.Entry<String, Slice>> iter = slices.entrySet().iterator();

    while (iter.hasNext()) {
      Map.Entry<String, Slice> slice = iter.next();
      if (slice.getValue().getState().equals(Slice.ACTIVE))
        this.slices.put(slice.getKey(), slice.getValue());
    }
    this.router = router;

    assert name != null && slices != null;
  }

