  protected CharSequence readUtf8(DataInputInputStream dis) throws IOException {
    int sz = readSize(dis);
    if (sz > MAX_UTF8_SZ) return _readStr(dis, null, sz);
    if (bytesBlock == null) bytesBlock = new BytesBlock(1024 * 4);
    BytesBlock block = this.bytesBlock.expand(sz);
    dis.readFully(block.getBuf(), block.getStartPos(), sz);

    ByteArrayUtf8CharSequence result = new ByteArrayUtf8CharSequence(block.getBuf(), block.getStartPos(), sz);
    if (stringProvider == null) {
      stringProvider = butf8cs -> {
        synchronized (JavaBinCodec.this) {
          arr.reset();
          ByteUtils.UTF8toUTF16(butf8cs.buf, butf8cs.offset(), butf8cs.size(), arr);
          return arr.toString();
        }
      };
    }
    result.stringProvider = this.stringProvider;
    return result;
  }

