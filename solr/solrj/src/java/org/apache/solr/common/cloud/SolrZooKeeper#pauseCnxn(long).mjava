  /**
   * Cause this ZooKeeper object to stop receiving from the ZooKeeperServer
   * for the given number of milliseconds.
   * @param ms the number of milliseconds to pause.
   */
  public void pauseCnxn(final long ms) {
    Thread t = new Thread() {
      public void run() {
        try {
          synchronized (cnxn) {
            try {
              // nocommit: reflect me, move me somewehre else as static method,
              // something. i am only used by tests! the rest of this file is clean.
              ((SocketChannel) cnxn.sendThread.sockKey.channel()).socket()
                  .close();
            } catch (Exception e) {
            }
            Thread.sleep(ms);
          }

          // Wait a long while to make sure we properly clean up these threads.
          Thread.sleep(500000);
        } catch (InterruptedException e) {}
      }
    };
    t.start();
    spawnedThreads.add(t);
  }

