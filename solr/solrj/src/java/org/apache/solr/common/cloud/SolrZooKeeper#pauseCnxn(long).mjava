  /**
   * Cause this ZooKeeper object to stop receiving from the ZooKeeperServer
   * for the given number of milliseconds.
   * @param ms the number of milliseconds to pause.
   */
  public void pauseCnxn(final long ms) {
    Thread t = new Thread() {
      public void run() {
        try {
          synchronized (cnxn) {
            try {
              getSendThreadChannel().close();
            } catch (Exception e) {
              throw new RuntimeException("Closing zookeper send channel failed.", e);
            }
            Thread.sleep(ms);
          }
        } catch (InterruptedException e) {}
      }
    };
    t.start();
    spawnedThreads.add(t);
  }

