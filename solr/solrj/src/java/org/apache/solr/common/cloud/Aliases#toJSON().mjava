  /**
   * Serialize our state.
   */
  public byte[] toJSON() {
    if (collectionAliases.isEmpty()) {
      assert collectionAliasMetadata.isEmpty();
      return null;
    } else {
      Map<String,Map> tmp = new LinkedHashMap<>();
      tmp.put(COLLECTION, convertMapOfListToMapOfCommaDelimited(collectionAliases));
      if (!collectionAliasMetadata.isEmpty()) {
        tmp.put(COLLECTION_METADATA, collectionAliasMetadata);
      }
      return Utils.toJSON(tmp);
    }
  }

