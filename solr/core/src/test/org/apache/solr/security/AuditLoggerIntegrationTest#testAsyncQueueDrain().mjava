  @Test
  public void testAsyncQueueDrain() throws Exception {
    setupCluster(true, 100, false, null);
    runAdminCommands();
    assertTrue("Expecting <2 callbacks in buffer, was " + testHarness.get().receiver.getBuffer().size(),
        testHarness.get().receiver.getBuffer().size() < 2); // Events still on queue
    // We shutdown cluster while events are still in queue
    testHarness.get().shutdownCluster();
    assertThreeAdminEvents();
  }

