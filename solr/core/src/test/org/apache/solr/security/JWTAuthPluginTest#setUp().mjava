  @Before
  public void setUp() throws Exception {
    super.setUp();

    // Create an auth plugin
    plugin = new JWTAuthPlugin();

    // Create a JWK config for security.json

    testJwk = new HashMap<>();
    testJwk.put("kty", rsaJsonWebKey.getKeyType());
    testJwk.put("e", BigEndianBigInteger.toBase64Url(rsaJsonWebKey.getRsaPublicKey().getPublicExponent()));
    testJwk.put("use", rsaJsonWebKey.getUse());
    testJwk.put("kid", rsaJsonWebKey.getKeyId());
    testJwk.put("alg", rsaJsonWebKey.getAlgorithm());
    testJwk.put("n", BigEndianBigInteger.toBase64Url(rsaJsonWebKey.getRsaPublicKey().getModulus()));

    testConfig = new HashMap<>();
    testConfig.put("class", "org.apache.solr.security.JWTAuthPlugin");
    testConfig.put("jwk", testJwk);
    plugin.init(testConfig);
    
    minimalConfig = new HashMap<>();
    minimalConfig.put("class", "org.apache.solr.security.JWTAuthPlugin");
  }

