  public void testNoUniqueIdPassed() throws Exception { //TODO
    AddUpdateCommand cmd = new AddUpdateCommand(new LocalSolrQueryRequest(h.getCore(),
        new ModifiableSolrParams()
            .add("processor", "Atomic")
            .add("Atomic.cat", "add")
            .add("commit","true")
    ));

    cmd.solrDoc = new SolrInputDocument();
    cmd.solrDoc.addField("title", 1);

    try {
      AtomicUpdateProcessorFactory factory = new AtomicUpdateProcessorFactory();
      factory.inform(h.getCore());
      factory.getInstance(cmd.getReq(), new SolrQueryResponse(),
          null).processAdd(cmd);
    } catch (SolrException e) {
      assertEquals("Document passed with no unique field: 'id'", e.getMessage());
    }
  }

