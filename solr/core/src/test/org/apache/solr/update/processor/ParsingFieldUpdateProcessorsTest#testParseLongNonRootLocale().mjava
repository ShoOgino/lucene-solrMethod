  public void testParseLongNonRootLocale() throws Exception {
    {
      final NumberFormat sanityCheck = NumberFormat.getInstance(new Locale("fr","FR"));
      sanityCheck.setParseIntegerOnly(false);
      sanityCheck.setRoundingMode(RoundingMode.CEILING);
      assumeThat("Your JVM appears to have NumberFormat parse bugs using U+00A0 in the fr_FR Locale",
                 sanityCheck.parse("10 898"), new IsNot(new IsEqual(10L)));
    }
    
    IndexSchema schema = h.getCore().getLatestSchema();
    assertNotNull(schema.getFieldOrNull("long_l")); // should match dynamic field "*_l"
    assertNull(schema.getFieldOrNull("not_in_schema"));
    long value = 1089883491L;
    String longString1 = "1089883491";
    String longString2 = "1 089 883 491"; // no-break space U+00A0
    SolrInputDocument d = processAdd("parse-long-russian-no-run-processor",
                                     doc(f("id", "113"), f("long_l", longString1), f("not_in_schema", longString2)));
    assertNotNull(d);
    assertThat(d.getFieldValue("long_l"), IS_LONG);
    assertEquals(value, ((Long)d.getFieldValue("long_l")).longValue());
    assertThat(d.getFieldValue("not_in_schema"), IS_LONG);
    assertEquals(value, ((Long)d.getFieldValue("not_in_schema")).longValue());
  }

