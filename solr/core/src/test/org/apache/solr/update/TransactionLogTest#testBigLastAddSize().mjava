  @Test
  public void testBigLastAddSize() throws IOException {
    SolrTestCaseJ4.assumeWorkingMockito();
    String tlogFileName = String.format(Locale.ROOT, UpdateLog.LOG_FILENAME_PATTERN, UpdateLog.TLOG_NAME, 0);
    try (TransactionLog transactionLog = new TransactionLog(Files.createTempFile(tlogFileName, "").toFile(), new ArrayList<>())) {
      transactionLog.lastAddSize = 2000000000;
      AddUpdateCommand updateCommand = mock(AddUpdateCommand.class);
      when(updateCommand.isInPlaceUpdate()).thenReturn(false);
      when(updateCommand.getSolrInputDocument()).thenReturn(new SolrInputDocument());
      transactionLog.write(updateCommand, 0);
    }
  }

