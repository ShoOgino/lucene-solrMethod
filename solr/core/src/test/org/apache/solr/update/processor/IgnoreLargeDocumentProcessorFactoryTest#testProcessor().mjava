  @Test
  public void testProcessor() throws IOException {
    NamedList args = new NamedList();
    args.add(IgnoreLargeDocumentProcessorFactory.LIMIT_SIZE_PARAM, 1);

    IgnoreLargeDocumentProcessorFactory factory = new IgnoreLargeDocumentProcessorFactory();
    factory.init(args);
    try {
      UpdateRequestProcessor processor = factory.getInstance(null, null, null);
      processor.processAdd(getUpdate(1024));
      fail("Expected processor to ignore the update");
    } catch (SolrException e) {
      //expected
    }

    args = new NamedList();
    args.add(IgnoreLargeDocumentProcessorFactory.LIMIT_SIZE_PARAM, 2);
    factory = new IgnoreLargeDocumentProcessorFactory();
    factory.init(args);
    UpdateRequestProcessor processor = factory.getInstance(null, null, null);
    processor.processAdd(getUpdate(1024));

  }

