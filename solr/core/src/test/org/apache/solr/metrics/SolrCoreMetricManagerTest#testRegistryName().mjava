  @Test
  public void testRegistryName() throws Exception {
    String collectionName = "my_collection_";
    String cloudCoreName = "my_collection__shard1_0_replica0";
    String simpleCoreName = "collection_1_replica0";
    String simpleRegistryName = "solr.core." + simpleCoreName;
    String cloudRegistryName = "solr.core." + cloudCoreName;
    String nestedRegistryName = "solr.core.my_collection_.shard1_0.replica0";
    // pass through
    assertEquals(cloudRegistryName, coreMetricManager.createRegistryName(null, cloudCoreName));
    assertEquals(simpleRegistryName, coreMetricManager.createRegistryName(null, simpleCoreName));
    // unknown naming scheme -> pass through
    assertEquals(simpleRegistryName, coreMetricManager.createRegistryName(collectionName, simpleCoreName));
    // cloud collection
    assertEquals(nestedRegistryName, coreMetricManager.createRegistryName(collectionName, cloudCoreName));

  }

