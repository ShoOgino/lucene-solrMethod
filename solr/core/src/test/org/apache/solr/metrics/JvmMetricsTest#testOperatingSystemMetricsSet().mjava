  @Test
  public void testOperatingSystemMetricsSet() throws Exception {
    MBeanServer mBeanServer = ManagementFactory.getPlatformMBeanServer();
    OperatingSystemMetricSet set = new OperatingSystemMetricSet(mBeanServer);
    Map<String, Metric> metrics = set.getMetrics();
    assertTrue(metrics.size() > 0);
    for (String metric : OperatingSystemMetricSet.METRICS) {
      Gauge<?> gauge = (Gauge<?>)metrics.get(metric);
      if (gauge == null) { // some are optional depending on OS
        continue;
      }
      double value = ((Number)gauge.getValue()).doubleValue();
      assertTrue(value >= 0);
    }
  }

