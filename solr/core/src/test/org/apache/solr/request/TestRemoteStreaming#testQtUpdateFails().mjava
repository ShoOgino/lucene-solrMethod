  /** SOLR-3161
   * Technically stream.body isn't remote streaming, but there wasn't a better place for this test method. */
  @Test(expected = SolrException.class)
  public void testQtUpdateFails() throws SolrServerException, IOException {
    SolrQuery query = new SolrQuery();
    query.setQuery( "*:*" );//for anything
    query.add("echoHandler","true");
    //sneaky sneaky
    query.add("qt","/update");
    query.add("stream.body","<delete><query>*:*</query></delete>");

    QueryRequest queryRequest = new QueryRequest(query) {
      @Override
      public String getPath() { //don't let superclass substitute qt for the path
        return "/select";
      }
    };
    QueryResponse rsp = queryRequest.process(getSolrClient());
    //!! should *fail* above for security purposes
    String handler = (String) rsp.getHeader().get("handler");
    System.out.println(handler);
  }

