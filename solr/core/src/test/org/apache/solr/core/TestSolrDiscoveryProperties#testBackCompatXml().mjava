  @Test
  public void testBackCompatXml() throws Exception {
    setMeUp();
    addSolrPropertiesFile();
    addSolrXml();
    addConfigsForBackCompat();

    CoreContainer cc = init();
    try {
      Properties props = cc.getContainerProperties();

      assertEquals("/admin/cores", cc.getAdminPath());
      assertEquals("collectionLazy2", cc.getDefaultCoreName());

      // Shouldn't get these in properties at this point
      assertNull(props.getProperty("cores.adminPath"));
      assertNull(props.getProperty("cores.defaultCoreName"));
      assertNull(props.getProperty("host"));
      assertNull(props.getProperty("port")); // getProperty actually looks at original props.
      assertNull(props.getProperty("cores.hostContext"));
      assertNull(props.getProperty("cores.zkClientTimeout"));
    } finally {
      cc.shutdown();
    }
  }

