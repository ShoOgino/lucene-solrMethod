  public void testSort() throws Exception {
    CoreContainer mockCC = getMockContainer();
    MockCoreSorter coreSorter = (MockCoreSorter) new MockCoreSorter().init(mockCC);
    List<CoreDescriptor> copy = new ArrayList<>(coreSorter.getLocalCores());
    Collections.sort(copy, coreSorter::compare);
    List<CountsForEachShard> l = copy.stream()
        .map(CoreDescriptor::getCloudDescriptor)
        .map(it -> coreSorter.shardsVsReplicaCounts.get(getShardName(it)))
        .collect(toList());
    for (int i = 1; i < l.size(); i++) {
      CountsForEachShard curr = l.get(i);
      CountsForEachShard prev = l.get(i-1);
      assertTrue(CoreSorter.countsComparator.compare(prev, curr) < 1);
    }

    for (CountsForEachShard c : l) {
      System.out.println(c);
    }
  }

