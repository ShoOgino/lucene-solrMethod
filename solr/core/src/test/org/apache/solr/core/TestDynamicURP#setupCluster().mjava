  @BeforeClass
  public static void setupCluster() throws Exception {
    System.setProperty("enable.runtime.lib", "true");
    configureCluster(3)
        .addConfig("conf", configset("cloud-minimal"))
        .configure();
    SolrZkClient zkClient = cluster.getSolrClient().getZkStateReader().getZkClient();
    String path = ZkStateReader.CONFIGS_ZKNODE + "/conf/solrconfig.xml";
    byte[] data = zkClient.getData(path, null, null, true);

    String solrconfigStr = new String(data, StandardCharsets.UTF_8);
    zkClient.setData(path, solrconfigStr.replace("</config>",
        "<updateRequestProcessorChain name=\"test_urp\" processor=\"testURP\" default=\"true\">\n" +
        "    <processor class=\"solr.RunUpdateProcessorFactory\"/>\n" +
        "  </updateRequestProcessorChain>\n" +
        "\n" +
        "  <updateProcessor class=\"runtimecode.TestURP\" name=\"testURP\" runtimeLib=\"true\"></updateProcessor>\n" +
        "</config>").getBytes(StandardCharsets.UTF_8), true );


    CollectionAdminRequest.createCollection(COLLECTION, "conf", 3, 1).process(cluster.getSolrClient());
  }

