  private CoreContainer getMockContainer() {
    CoreContainer mockCC = createMock(CoreContainer.class);
    ZkController mockZKC = createMock(ZkController.class);
    ClusterState mockClusterState = createMock(ClusterState.class);
    reset(mockCC, mockZKC, mockClusterState);
    mockCC.isZooKeeperAware();
    expectLastCall().andAnswer(() -> Boolean.TRUE).anyTimes();
    mockCC.getZkController();
    expectLastCall().andAnswer(() -> mockZKC).anyTimes();
    mockClusterState.getLiveNodes();
    expectLastCall().andAnswer(() -> liveNodes).anyTimes();
    mockZKC.getClusterState();
    expectLastCall().andAnswer(() -> mockClusterState).anyTimes();
    replay(mockCC, mockZKC, mockClusterState);
    return mockCC;
  }

