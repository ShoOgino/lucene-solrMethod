  private void makeCores(File home, boolean oldStyle) throws Exception {
    File testSrcRoot = new File(SolrTestCaseJ4.TEST_HOME());
    if (oldStyle) {
      FileUtils.copyFile(new File(testSrcRoot, "solr-stress.xml"), new File(home, "solr.xml"));
    } else {
      FileUtils.copyFile(new File(testSrcRoot, "solr-stress.properties"), new File(home, "solr.properties"));
    }

    // create directories in groups of 100 until you have enough.
    for (int idx = 0; idx < numCores; ++idx) {
      String coreName = String.format(Locale.ROOT, "%05d_core", idx);
      makeCore(new File(home, coreName), testSrcRoot, oldStyle);
      coreCounts.put(coreName, 0L);
      coreNames.add(coreName);
    }
  }

