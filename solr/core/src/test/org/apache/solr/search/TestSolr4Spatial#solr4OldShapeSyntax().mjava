  @Test
  public void solr4OldShapeSyntax() throws Exception {
    assumeFalse("Mostly just valid for prefix-tree", fieldName.equals("pointvector"));

    //we also test that the old syntax is parsed in worldBounds in the schema
    {
      IndexSchema schema = h.getCore().getLatestSchema();
      AbstractSpatialFieldType type = (AbstractSpatialFieldType) schema.getFieldTypeByName("stqpt_u_oldworldbounds");
      SpatialContext ctx = type.getStrategy("foo").getSpatialContext();
      assertEquals(new RectangleImpl(0, 1000, 0, 1000, ctx), ctx.getWorldBounds());
    }

    //syntax supported in Solr 4 but not beyond
    //   See Spatial4j LegacyShapeReadWriterFormat
    String rect = "-74.093 41.042 -69.347 44.558";//minX minY maxX maxY
    String circ = "Circle(4.56,1.23 d=0.0710)";

    //show we can index this (without an error)
    assertU(adoc("id", "rect", fieldName, rect));
    if (!fieldName.equals("bbox")) {
      assertU(adoc("id", "circ", fieldName, circ));
      assertU(commit());
    }

    //only testing no error
    assertJQ(req("q", "{!field f=" + fieldName + "}Intersects(" + rect + ")"));
    if (!fieldName.equals("bbox")) {
      assertJQ(req("q", "{!field f=" + fieldName + "}Intersects(" + circ + ")"));
    }
  }

