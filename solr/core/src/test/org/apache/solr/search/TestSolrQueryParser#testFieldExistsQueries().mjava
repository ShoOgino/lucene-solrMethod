  @Test
  public void testFieldExistsQueries() throws SyntaxError {
    SolrQueryRequest req = req();
    IndexSchema indexSchema = h.getCore().getLatestSchema();
    String[] fieldSuffix = new String[] {
        "ti", "tf", "td", "tl", "tdt",
        "pi", "pf", "pd", "pl", "pdt",
        "i", "f", "d", "l", "dt", "s", "b",
        "is", "fs", "ds", "ls", "dts", "ss", "bs",
        "i_dv", "f_dv", "d_dv", "l_dv", "dt_dv", "s_dv", "b_dv",
        "is_dv", "fs_dv", "ds_dv", "ls_dv", "dts_dv", "ss_dv", "bs_dv",
        "i_dvo", "f_dvo", "d_dvo", "l_dvo", "dt_dvo",
        "t"
    };
    String[] existenceQueries = new String[] {
        "*", "[* TO *]"
    };

    for (String existenceQuery : existenceQueries) {
      for (String suffix : fieldSuffix) {
        String field = "foo_" + suffix;
        String query = field + ":" + existenceQuery;
        QParser qParser = QParser.getParser(query, req);
        if (indexSchema.getField(field).hasDocValues()) {
          assertTrue("Field has docValues, so existence query \"" + query + "\" should return DocValuesFieldExistsQuery", qParser.getQuery() instanceof DocValuesFieldExistsQuery);
        } else {
          assertFalse("Field doesn't have docValues, so existence query \"" + query + "\" should not return DocValuesFieldExistsQuery", qParser.getQuery() instanceof DocValuesFieldExistsQuery);
        }
      }
    }
  }

