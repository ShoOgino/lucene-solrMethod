  @Test
  public void testWhitelistHostCheckerNonWhitelistedHost1() {
    WhitelistHostChecker checker = new WhitelistHostChecker("http://abc-1.com:8983, http://abc-2.com:8983, http://abc-3.com:8983", true);
    try {
      checker.checkWhitelist("http://abc-1.com:8983/solr", Arrays.asList(new String[]{"http://abc-4.com:8983/solr"}));
      fail("Expected exception");
    } catch (SolrException e) {
      assertThat(e.code(), is(SolrException.ErrorCode.FORBIDDEN.code));
      assertThat(e.getMessage(), containsString("not on the shards whitelist"));
    }
  }

