  @Test
  public void testFetchIndexShouldReportErrorsWhenTheyOccur() throws Exception  {
    int masterPort = masterJetty.getLocalPort();
    masterJetty.stop();
    SolrQuery q = new SolrQuery();
    q.add("qt", "/replication")
        .add("wt", "json")
        .add("wait", "true")
        .add("command", "fetchindex")
        .add("masterUrl", buildUrl(masterPort));
    QueryResponse response = slaveClient.query(q);
    NamedList<Object> resp = response.getResponse();
    assertNotNull(resp);
    assertEquals("Fetch index with wait=true should have returned an error response", "ERROR", resp.get("status"));
  }

