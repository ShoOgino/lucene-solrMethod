  @Test
  public void testDeleteSnapshotMissingCommitNameParamResultsIn400SolrException() {
    final Map<String, String> params = Maps.newHashMap();
    params.put("core", "any-core-param");
    whenCoreAdminOpHasParams(params);

    try {
      CoreAdminOperation.DELETESNAPSHOT_OP.execute(callInfo);
      fail("Expected delete-snapshot to fail when no 'commitName' param present");
    } catch (Exception thrown) {
      assertSolrExceptionWithCode(thrown, ErrorCode.BAD_REQUEST.code);
    }   
  }

