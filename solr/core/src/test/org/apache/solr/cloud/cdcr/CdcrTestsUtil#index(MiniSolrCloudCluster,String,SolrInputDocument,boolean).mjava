  public static void index(MiniSolrCloudCluster cluster, String collection, SolrInputDocument doc, boolean doCommit) throws IOException, SolrServerException {
    CloudSolrClient client = createCloudClient(cluster, collection);
    try {
      client.add(doc);
      if (doCommit) {
        client.commit(true, true);
      } else {
        client.commit(true, false);
      }
    } finally {
      client.close();
    }
  }

