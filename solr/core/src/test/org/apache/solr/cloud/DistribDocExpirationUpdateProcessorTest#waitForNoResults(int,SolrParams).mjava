  /**
   * Executes a query over and over against the cloudClient every 5 seconds 
   * until the numFound is 0 or the maxTimeLimitSeconds is exceeded. 
   * Query is garunteed to be executed at least once.
   */
  private void waitForNoResults(int maxTimeLimitSeconds,
                                SolrParams params) 
    throws SolrServerException, InterruptedException {

    final long giveUpAfter = System.currentTimeMillis() + (1000L * maxTimeLimitSeconds);
    long numFound = cloudClient.query(params).getResults().getNumFound();
    while (0L < numFound && System.currentTimeMillis() < giveUpAfter) {
      Thread.sleep(Math.min(5000, giveUpAfter - System.currentTimeMillis()));
      numFound = cloudClient.query(params).getResults().getNumFound();
    }
    assertEquals("Give up waiting for no results: " + params,
                 0L, numFound);
  }

