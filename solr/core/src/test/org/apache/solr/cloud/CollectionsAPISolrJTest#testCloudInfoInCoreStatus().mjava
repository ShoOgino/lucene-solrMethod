  @Test
  public void testCloudInfoInCoreStatus() throws IOException, SolrServerException {
    String collectionName = "corestatus_test";
    CollectionAdminResponse response = CollectionAdminRequest.createCollection(collectionName, "conf", 2, 2)
        .setStateFormat(1)
        .process(cluster.getSolrClient());

    assertEquals(0, response.getStatus());
    assertTrue(response.isSuccess());
    String nodeName = ((NamedList) response.getResponse().get("success")).getName(0);
    String corename = (String) response.getResponse()._get(asList("success", nodeName,"core"),null);

    try (HttpSolrClient coreclient = getHttpSolrClient(cluster.getSolrClient().getZkStateReader().getBaseUrlForNodeName(nodeName))) {
      CoreAdminResponse status = CoreAdminRequest.getStatus(corename, coreclient);
      NamedList m = status.getResponse();
      assertEquals(collectionName, m._get(asList("status", corename, "cloud", "collection"), null));
      assertNotNull(m._get(asList("status", corename, "cloud", "shard"), null));
      assertNotNull(m._get(asList("status", corename, "cloud", "replica"), null));
    }
  }

