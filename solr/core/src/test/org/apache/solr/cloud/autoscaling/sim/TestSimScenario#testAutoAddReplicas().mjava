  @Test
  public void testAutoAddReplicas() throws Exception {
    String snapshotPath = createTempDir() + "/snapshot";
    try (SimScenario scenario = SimScenario.load(autoAddReplicasScenario)) {
      scenario.context.put("snapshotPath", snapshotPath);
      scenario.run();
    }
    SnapshotCloudManager snapshotCloudManager = SnapshotCloudManager.readSnapshot(new File(snapshotPath));
    CloudUtil.waitForState(snapshotCloudManager, "testCollection", 1, TimeUnit.SECONDS,
        CloudUtil.clusterShape(2, 2));
  }

