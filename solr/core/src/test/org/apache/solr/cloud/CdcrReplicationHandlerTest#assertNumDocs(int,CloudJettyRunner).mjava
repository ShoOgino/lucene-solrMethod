  private void assertNumDocs(int expectedNumDocs, CloudJettyRunner jetty)
  throws InterruptedException, IOException, SolrServerException {
    SolrClient client = createNewSolrServer(jetty.url);
    try {
      int cnt = 30; // timeout after 15 seconds
      AssertionError lastAssertionError = null;
      while (cnt > 0) {
        try {
          assertEquals(expectedNumDocs, client.query(new SolrQuery("*:*")).getResults().getNumFound());
          return;
        }
        catch (AssertionError e) {
          lastAssertionError = e;
          cnt--;
          Thread.sleep(500);
        }
      }
      throw new AssertionError("Timeout while trying to assert number of documents @ " + jetty.url, lastAssertionError);
    } finally {
      client.close();
    }
  }

