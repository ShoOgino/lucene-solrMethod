  @Override
  public void tearDown() throws Exception {
    super.tearDown();
    if (commondCloudSolrClient != null) {
      commondCloudSolrClient.shutdown();
    }
    if (otherCollectionClients != null) {
      for (List<SolrClient> clientList : otherCollectionClients.values()) {
        for (SolrClient client : clientList) {
          client.shutdown();
        }
      }
    }
    otherCollectionClients = null;
    List<Runnable> tasks = executor.shutdownNow();
    assertTrue(tasks.isEmpty());
    
    System.clearProperty("numShards");
    System.clearProperty("zkHost");
    System.clearProperty("solr.xml.persist");
    
    // insurance
    DirectUpdateHandler2.commitOnClose = true;
  }

