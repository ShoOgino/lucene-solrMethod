  @Override
  public void tearDown() throws Exception {
    super.tearDown();
    if (commondCloudSolrServer != null) {
      commondCloudSolrServer.shutdown();
    }
    if (otherCollectionClients != null) {
      for (List<SolrServer> clientList : otherCollectionClients.values()) {
        for (SolrServer client : clientList) {
          client.shutdown();
        }
      }
    }
    otherCollectionClients = null;
    List<Runnable> tasks = executor.shutdownNow();
    assertTrue(tasks.isEmpty());
    
    System.clearProperty("numShards");
    System.clearProperty("zkHost");
    System.clearProperty("solr.xml.persist");
    
    // insurance
    DirectUpdateHandler2.commitOnClose = true;
  }

