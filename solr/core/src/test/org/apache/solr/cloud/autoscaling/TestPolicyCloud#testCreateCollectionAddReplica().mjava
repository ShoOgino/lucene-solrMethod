  public void testCreateCollectionAddReplica() throws Exception  {
    final JettySolrRunner jetty = cluster.getRandomJetty(random());
    final String jettyNodeName = jetty.getNodeName();
    final int port = jetty.getLocalPort();

    final String commands =  "{set-policy :{c1 : [{replica:0 , shard:'#EACH', port: '!" + port + "'}]}}";
    cluster.getSolrClient().request(AutoScalingRequest.create(SolrRequest.METHOD.POST, commands));

    final String collectionName = "testCreateCollectionAddReplica";
    log.info("Creating collection {}", collectionName);
    CollectionAdminRequest.createCollection(collectionName, "conf", 1, 1)
        .setPolicy("c1")
        .process(cluster.getSolrClient());

    waitForState("Should have found exactly one replica, only on expected jetty: " +
                 jettyNodeName + "/" + port,
                 collectionName, expectAllReplicasOnSpecificNode(jettyNodeName, 1, 1),
                 120, TimeUnit.SECONDS);

    log.info("Adding replica to {}", collectionName);
    CollectionAdminRequest.addReplicaToShard(collectionName, "shard1")
      .process(cluster.getSolrClient());
    
    waitForState("Should have found exactly two replicas, only on expected jetty: " +
                 jettyNodeName + "/" + port,
                 collectionName, expectAllReplicasOnSpecificNode(jettyNodeName, 1, 2),
                 120, TimeUnit.SECONDS);

  }

