  private void xsltRequest(String collection) throws SolrServerException, IOException {
    String baseUrl = solrCluster.getJettySolrRunners().get(0).getBaseUrl().toString();
    try (HttpSolrClient client = getHttpSolrClient(baseUrl + "/" + collection)) {
      String xml = 
          "<random>" +
              " <document>" +
              "  <node name=\"id\" value=\"12345\"/>" +
              "  <node name=\"name\" value=\"kitten\"/>" +
              "  <node name=\"text\" enhance=\"3\" value=\"some other day\"/>" +
              "  <node name=\"title\" enhance=\"4\" value=\"A story\"/>" +
              "  <node name=\"timestamp\" enhance=\"5\" value=\"2011-07-01T10:31:57.140Z\"/>" +
              " </document>" +
              "</random>";

      SolrQuery query = new SolrQuery();
      query.setQuery( "*:*" );//for anything
      query.add("qt","/update");
      query.add(CommonParams.TR, "xsl-update-handler-test.xsl");
      query.add("stream.body", xml);
      query.add("commit", "true");
      try {
        client.query(query);
        fail("This should've returned a 401.");
      } catch (SolrException ex) {
        assertEquals(ErrorCode.UNAUTHORIZED.code, ex.code());
      }
    }
  }

