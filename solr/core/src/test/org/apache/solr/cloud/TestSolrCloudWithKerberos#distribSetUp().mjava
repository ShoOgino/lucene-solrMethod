  @Override
  public void distribSetUp() throws Exception {
    //SSLTestConfig.setSSLSystemProperties();
    if (brokenLocales.contains(Locale.getDefault().toString())) {
      Locale.setDefault(Locale.US);
    }
    // Use just one jetty
    this.sliceCount = 0;
    this.fixShardCount(1);

    setupMiniKdc();
    //useExternalKdc();
    
    super.distribSetUp();
    try (ZkStateReader zkStateReader = new ZkStateReader(zkServer.getZkAddress(), TIMEOUT, TIMEOUT)) {
      zkStateReader.getZkClient().create(ZkStateReader.SOLR_SECURITY_CONF_PATH,
          "{\"authentication\":{\"class\":\"org.apache.solr.security.KerberosPlugin\"}}".getBytes(Charsets.UTF_8),
          CreateMode.PERSISTENT, true);
    }
  }

