  @Before
  public void setup() throws Exception {
    simulated = random().nextBoolean();
    if (simulated) {
      root = SimDistribStateManager.createNewRootNode();
    } else {
      zkTestServer = new ZkTestServer(createTempDir("zkDir").toString());
      zkTestServer.run();
    }
    reInit();
  }

