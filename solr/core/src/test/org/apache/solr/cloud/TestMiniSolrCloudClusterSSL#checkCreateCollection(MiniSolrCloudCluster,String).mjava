  /**
   * Verify that we can create a collection that involves one replica per node using the
   * CloudSolrClient available for the cluster
   */
  private static void checkCreateCollection(final MiniSolrCloudCluster cluster,
                                            final String collection) throws Exception {
    assertNotNull(cluster.createCollection(collection,
                                           /* 1 shard/replica per server */ NUM_SERVERS, 1,
                                           CONF_NAME, null, null,
                                           Collections.singletonMap("config","solrconfig-tlog.xml")));
    final CloudSolrClient cloudClient = cluster.getSolrClient();
    ZkStateReader zkStateReader = cloudClient.getZkStateReader();
    AbstractDistribZkTestBase.waitForRecoveriesToFinish(collection, zkStateReader, true, true, 330);
    assertEquals("sanity query", 0, cloudClient.query(collection, params("q","*:*")).getStatus());
  }

