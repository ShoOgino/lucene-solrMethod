  private void removePropertyFromAllReplicas(String coll, String propDel) throws IOException {
    DocCollection docColl = getCollectionState(coll);

    // First remove the property from all core.properties files
    for (Replica rep : docColl.getReplicas()) {
      final String coreName = rep.getCoreName();
      Properties prop = loadPropFileForReplica(coreName);
      prop.remove(propDel);
      JettySolrRunner jetty = cluster.getJettySolrRunner(0);
      Path expected = Paths.get(jetty.getSolrHome()).toAbsolutePath().resolve(coreName);
      Path corePropFile = Paths.get(expected.toString(), CorePropertiesLocator.PROPERTIES_FILENAME);

      try (Writer os = new OutputStreamWriter(Files.newOutputStream(corePropFile), StandardCharsets.UTF_8)) {
        prop.store(os, "");
      }
    }

    // Now insure it's really gone
    for (Replica rep : docColl.getReplicas()) {
      Properties prop = loadPropFileForReplica(rep.getCoreName());
      assertEquals("Property " + propDel + " should have been deleted",
          "bogus", prop.getProperty(propDel, "bogus"));
    }
  }

