  @After
  public void printState() throws Exception {
    log.debug("-------------_ FINAL STATE --------------");
    SolrCloudManager cloudManager = cluster.getJettySolrRunner(0).getCoreContainer().getZkController().getSolrCloudManager();
    for (String node: cloudManager.getClusterStateProvider().getLiveNodes()) {
      Map<String, Object> values = cloudManager.getNodeStateProvider().getNodeValues(node, ImplicitSnitch.tags);
      log.debug("* Node values: " + node + "\n" + Utils.toJSONString(values));
    }
    log.debug("* Live nodes: " + cloudManager.getClusterStateProvider().getLiveNodes());
    ClusterState state = cloudManager.getClusterStateProvider().getClusterState();
    state.forEachCollection(coll -> log.debug("* Collection " + coll.getName() + " state: " + coll));
  }

