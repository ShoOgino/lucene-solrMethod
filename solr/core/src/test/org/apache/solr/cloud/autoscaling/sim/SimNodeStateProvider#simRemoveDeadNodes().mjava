  /**
   * Remove values that correspond to dead nodes. If values contained a 'nodeRole'
   * key then /roles.json is updated.
   */
  public void simRemoveDeadNodes() {
    Set<String> myNodes = new HashSet<>(nodeValues.keySet());
    myNodes.removeAll(liveNodesSet.get());
    AtomicBoolean updateRoles = new AtomicBoolean(false);
    myNodes.forEach(n -> {
      LOG.debug("- removing dead node values: " + n);
      Map<String, Object> vals = nodeValues.remove(n);
      if (vals.containsKey("nodeRole")) {
        updateRoles.set(true);
      }
    });
    if (updateRoles.get()) {
      saveRoles();
    }
  }

