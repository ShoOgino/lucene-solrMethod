  private void testNoConfigSetExist() throws Exception {
    cloudClient.getZkStateReader().updateClusterState();
    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection("corewithnocollection3"));

    // try and create a SolrCore with no collection name
    Create createCmd = new Create();
    createCmd.setCoreName("corewithnocollection3");
    createCmd.setCollection("");
    String dataDir = createTempDir().toFile().getAbsolutePath();
    createCmd.setDataDir(dataDir);
    createCmd.setNumShards(1);
    createCmd.setCollectionConfigName("conf123");
    boolean gotExp = false;
    try {
      makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), createCmd);
    } catch (SolrException e) {
      gotExp = true;
    }

    assertTrue(gotExp);
    TimeUnit.MILLISECONDS.sleep(200);
    // in both cases, the collection should have default to the core name
    cloudClient.getZkStateReader().updateClusterState();

    Collection<Slice> slices = cloudClient.getZkStateReader().getClusterState().getActiveSlices("corewithnocollection3");
    int replicaCount = 0;
    if (slices != null) {
      for (Slice slice : slices) {
        replicaCount += slice.getReplicas().size();
      }
    }
    assertEquals("replicaCount", 0, replicaCount);

    CollectionAdminRequest.List list = new CollectionAdminRequest.List();
    CollectionAdminResponse res = new CollectionAdminResponse();
        res.setResponse(makeRequest(getBaseUrl((HttpSolrClient) clients.get(1)), list));
    List<String> collections = (List<String>) res.getResponse().get("collections");
    assertTrue(collections.contains("corewithnocollection3"));
  }

