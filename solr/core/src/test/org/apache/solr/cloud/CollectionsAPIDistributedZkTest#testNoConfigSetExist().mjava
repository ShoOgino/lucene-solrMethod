  @Test
  public void testNoConfigSetExist() throws Exception {

    final CloudSolrClient cloudClient = cluster.getSolrClient();

    assertFalse(cloudClient.getZkStateReader().getClusterState().hasCollection("corewithnocollection3"));

    // try and create a SolrCore with no collection name
    Create createCmd = new Create();
    createCmd.setCoreName("corewithnocollection3");
    createCmd.setCollection("");
    String dataDir = createTempDir().toFile().getAbsolutePath();
    createCmd.setDataDir(dataDir);
    createCmd.setNumShards(1);
    createCmd.setCollectionConfigName("conf123");

    expectThrows(Exception.class, () -> {
      cluster.getSolrClient().request(createCmd);
    });

    TimeUnit.MILLISECONDS.sleep(1000);
    // in both cases, the collection should have default to the core name
    cloudClient.getZkStateReader().forceUpdateCollection("corewithnocollection3");

    Collection<Slice> slices = cloudClient.getZkStateReader().getClusterState().getActiveSlices("corewithnocollection3");
    int replicaCount = 0;
    if (slices != null) {
      for (Slice slice : slices) {
        replicaCount += slice.getReplicas().size();
      }
    }
    assertEquals("replicaCount", 0, replicaCount);

    // TODO - WTF? shouldn't this *not* contain the collection?
    assertTrue(CollectionAdminRequest.listCollections(cloudClient).contains("corewithnocollection3"));

  }

