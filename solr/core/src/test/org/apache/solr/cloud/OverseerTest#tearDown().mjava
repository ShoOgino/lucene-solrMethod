  @After
  public void tearDown() throws Exception {
    testDone = true;
    
    ForkJoinPool customThreadPool = new ForkJoinPool(16);
  
    customThreadPool.submit( () -> zkControllers.parallelStream().forEach(c -> { c.close(); }));
    
    customThreadPool.submit( () -> httpShardHandlerFactorys.parallelStream().forEach(c -> { c.close(); }));
    
    customThreadPool.submit( () -> updateShardHandlers.parallelStream().forEach(c -> { c.close(); }));
    
    customThreadPool.submit( () -> solrClients.parallelStream().forEach(c -> { IOUtils.closeQuietly(c); } ));

    
    customThreadPool.submit( () -> readers.parallelStream().forEach(c -> { c.close();}));
    
    customThreadPool.submit( () -> zkClients.parallelStream().forEach(c -> { IOUtils.closeQuietly(c); }));
    
    ExecutorUtil.shutdownAndAwaitTermination(customThreadPool);
    
    customThreadPool = new ForkJoinPool(4);
    
    customThreadPool.submit( () -> overseers.parallelStream().forEach(c -> { c.close(); }));
    
    ExecutorUtil.shutdownAndAwaitTermination(customThreadPool);
    
    overseers.clear();
    zkControllers.clear();
    httpShardHandlerFactorys.clear();
    updateShardHandlers.clear();
    solrClients.clear();
    readers.clear();
    zkClients.clear();
    
    server.tryCleanSolrZkNode();
    server.makeSolrZkNode();
    
    super.tearDown();
  }

