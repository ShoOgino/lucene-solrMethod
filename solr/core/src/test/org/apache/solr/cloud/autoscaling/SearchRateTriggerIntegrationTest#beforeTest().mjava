  @Before
  public void beforeTest() throws Exception {
    cluster.deleteAllCollections();
    // clear any persisted auto scaling configuration
    Stat stat = zkClient().setData(SOLR_AUTOSCALING_CONF_PATH, Utils.toJSON(new ZkNodeProps()), true);
    if (log.isInfoEnabled()) {
      log.info("{} reset, new znode version {}", SOLR_AUTOSCALING_CONF_PATH, stat.getVersion());
    }
    deleteChildrenRecursively(ZkStateReader.SOLR_AUTOSCALING_EVENTS_PATH);
    deleteChildrenRecursively(ZkStateReader.SOLR_AUTOSCALING_TRIGGER_STATE_PATH);
    deleteChildrenRecursively(ZkStateReader.SOLR_AUTOSCALING_NODE_LOST_PATH);
    deleteChildrenRecursively(ZkStateReader.SOLR_AUTOSCALING_NODE_ADDED_PATH);
    
    finished = new CountDownLatch(1);
    started = new CountDownLatch(1);
    listenerCreated = new CountDownLatch(1);
    listenerEvents = new HashMap<>();
    listenerEventLatch = new CountDownLatch(0);
    
    waitForSeconds = 3 + random().nextInt(5);
  }

