  @Before
  public void setupTest() throws Exception {

    waitForSeconds = 1 + random().nextInt(3);
    triggerFiredCount.set(0);
    triggerFiredLatch = new CountDownLatch(1);
    listenerEvents.clear();
    while (cluster.getClusterStateProvider().getLiveNodes().size() < NUM_NODES) {
      // perhaps a test stopped a node but didn't start it back
      // lets start a node
      cluster.simAddNode();
    }
  }

