    /**
     * Shutdown the serving instance
     * @throws IOException 
     */
    protected void shutdown() throws IOException {
      zooKeeperServer.shutdown();
      zooKeeperServer.getZKDatabase().close();
      waitForServerDown(getZkHost() + ":" + getPort(), 5000);
      cnxnFactory.shutdown();
    }

