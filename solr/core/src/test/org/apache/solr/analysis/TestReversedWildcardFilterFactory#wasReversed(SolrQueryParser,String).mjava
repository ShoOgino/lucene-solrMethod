  /** fragile assert: depends on our implementation, but cleanest way to check for now */ 
  private boolean wasReversed(SolrQueryParser qp, String query) throws Exception {
    Query q = qp.parse(query);
    if (!(q instanceof AutomatonQuery)) {
      return false;
    }
    LightAutomaton automaton = ((AutomatonQuery) q).getLightAutomaton();
    String prefix = SpecialOperations.getCommonPrefix(BasicOperations.determinize(automaton));
    return prefix.length() > 0 && prefix.charAt(0) == '\u0001';
  }

