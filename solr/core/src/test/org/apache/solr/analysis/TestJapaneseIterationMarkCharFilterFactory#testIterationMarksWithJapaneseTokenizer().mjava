  public void testIterationMarksWithJapaneseTokenizer() throws IOException {
    JapaneseTokenizerFactory tokenizerFactory = new JapaneseTokenizerFactory();
    Map<String, String> tokenizerArgs = Collections.emptyMap();
    tokenizerFactory.init(tokenizerArgs);
    tokenizerFactory.inform(new SolrResourceLoader(null, null));

    JapaneseIterationMarkCharFilterFactory filterFactory = new JapaneseIterationMarkCharFilterFactory();
    Map<String, String> filterArgs = Collections.emptyMap();
    filterFactory.init(filterArgs);

    CharStream filter = filterFactory.create(
        CharReader.get(new StringReader("時々馬鹿々々しいところゞゝゝミスヾ"))
    );
    TokenStream tokenStream = tokenizerFactory.create(filter);
    assertTokenStreamContents(tokenStream, new String[]{"時時", "馬鹿馬鹿しい", "ところどころ", "ミ", "スズ"});
  }

