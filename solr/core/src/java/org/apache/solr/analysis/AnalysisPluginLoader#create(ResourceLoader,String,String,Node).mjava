  @Override
  protected S create(ResourceLoader loader, String name, String className, Node node) throws Exception {
    S instance = null;
    Matcher m = legacyPattern.matcher(className);
    if (m.matches()) {
      try {
        instance = createSPI(m.group(4));
      } catch (IllegalArgumentException ex) { 
        // ok
      }
    }
    
    if (instance != null) {
      // necessary because SolrResourceLoader manages its own list of 'awaiting ResourceLoaderAware'
      className = instance.getClass().getName();
    }
    
    return super.create(loader, name, className, node);
  }

