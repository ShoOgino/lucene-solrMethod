  /*
   * Read custom rules from a file, and create a RuleBasedCollator
   * The file cannot support comments, as # might be in the rules!
   */
  private Collator createFromRules(String fileName, ResourceLoader loader) {
    InputStream input = null;
    try {
     input = loader.openResource(fileName);
     String rules = IOUtils.toString(input, "UTF-8");
     return new RuleBasedCollator(rules);
    } catch (IOException e) {
      // io error
      throw new InitializationException("IOException thrown while loading rules", e);
    } catch (ParseException e) {
      // invalid rules
      throw new InitializationException("ParseException thrown while parsing rules", e);
    } finally {
      IOUtils.closeQuietly(input);
    }
  }

