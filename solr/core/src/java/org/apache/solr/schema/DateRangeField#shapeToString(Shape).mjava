  @Override
  public String shapeToString(Shape shape) {
    if (shape instanceof UnitNRShape) {
      UnitNRShape unitShape = (UnitNRShape) shape;
      if (unitShape.getLevel() == tree.getMaxLevels()) {
        //fully precise date. We can be fully compatible with TrieDateField.
        Date date = tree.toCalendar(unitShape).getTime();
        return DateFormatUtil.formatExternal(date);
      }
    }
    return shape.toString();//range shape
  }

