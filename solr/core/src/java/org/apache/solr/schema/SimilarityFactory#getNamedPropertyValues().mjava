  /** Returns a serializable description of this similarity(factory) */
  public SimpleOrderedMap<Object> getNamedPropertyValues() {
    String className = getClass().getName();
    if (className.startsWith("org.apache.solr.schema.IndexSchema$")) {
      // If this class is just a no-params wrapper around a similarity class, use the similarity class
      className = getSimilarity().getClass().getName();
    } else {
      // Only shorten factory names
      if (className.startsWith(SOLR_SIMILARITIES_PACKAGE + ".")) {
        className = className.replace(SOLR_SIMILARITIES_PACKAGE, "solr");
      }
    }
    SimpleOrderedMap<Object> props = new SimpleOrderedMap<Object>();
    props.add(CLASS_NAME, className);
    if (null != params) {
      Iterator<String> iter = params.getParameterNamesIterator();
      while (iter.hasNext()) {
        String key = iter.next();
        props.add(key, params.get(key));
      }
    }
    return props;
  }

