  public Query getRangeQuery(QParser parser, SchemaField field, final CurrencyValue p1, final CurrencyValue p2, final boolean minInclusive, final boolean maxInclusive) {
    String currencyCode = p1.getCurrencyCode();
    final CurrencyValueSource vs = new CurrencyValueSource(field, currencyCode, parser);

    return new SolrConstantScoreQuery(new ValueSourceRangeFilter(vs,
            p1.getAmount() + "", p2.getAmount() + "", minInclusive, maxInclusive));
  }

