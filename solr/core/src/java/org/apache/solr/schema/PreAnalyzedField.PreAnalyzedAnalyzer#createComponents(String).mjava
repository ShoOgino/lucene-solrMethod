    @Override
    protected TokenStreamComponents createComponents(String fieldName) {
      final PreAnalyzedTokenizer tokenizer = new PreAnalyzedTokenizer(parser);
      return new TokenStreamComponents(tokenizer) {
        @Override
        protected void setReader(final Reader reader) {
          super.setReader(reader);
          try {
            tokenizer.decodeInput(reader);
          } catch (IOException e) {
            // save this exception for reporting when reset() is called
            tokenizer.setReaderConsumptionException(e);
          }
        }
      };
    }

