  private List<PluginInfo> prepareCloudPlugins(PluginInfo[] pluginInfos, String group, String className,
                                                      Map<String, String> defaultAttributes,
                                                      Map<String, Object> defaultInitArgs,
                                                      PluginInfo defaultPlugin) {
    List<PluginInfo> result = new ArrayList<>();
    if (pluginInfos == null) {
      pluginInfos = new PluginInfo[0];
    }
    for (PluginInfo info : pluginInfos) {
      String groupAttr = info.attributes.get("group");
      if (!group.equals(groupAttr)) {
        continue;
      }
      info = preparePlugin(info, className, defaultAttributes, defaultInitArgs);
      if (info != null) {
        result.add(info);
      }
    }
    if (result.isEmpty() && defaultPlugin != null) {
      defaultPlugin = preparePlugin(defaultPlugin, className, defaultAttributes, defaultInitArgs);
      if (defaultPlugin != null) {
        result.add(defaultPlugin);
      }
    }
    return result;
  }

