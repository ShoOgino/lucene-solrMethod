  @Override
  public void process(WatchedEvent event) {
    try {
      processStateChange();
    } catch (InterruptedException e) {
      // Restore the interrupted status
      Thread.currentThread().interrupt();
      return;
    } catch (Exception e) {
      log.warn("Error processing state change", e);
    } 
  }

