  @Override
  public List<String> listData(String path, Watcher watcher) throws NoSuchElementException, IOException {
    Node n;
    List<String> res;
    multiLock.lock();
    try {
      n = traverse(path, false, CreateMode.PERSISTENT);
      if (n == null) {
        throw new NoSuchElementException(path);
      }
      res = new ArrayList<>(n.children.keySet());
      Collections.sort(res);
    } finally {
      multiLock.unlock();
    }
    if (watcher != null) {
      n.dataWatches.add(watcher);
      n.childrenWatches.add(watcher);
    }
    return res;
  }

