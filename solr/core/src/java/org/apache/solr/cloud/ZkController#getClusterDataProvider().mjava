  public ClusterDataProvider getClusterDataProvider() {
    if (clusterDataProvider != null) {
      return clusterDataProvider;
    }
    synchronized(this) {
      if (clusterDataProvider != null) {
        return clusterDataProvider;
      }
      cloudSolrClient = new CloudSolrClient.Builder()
          .withClusterStateProvider(new ZkClientClusterStateProvider(zkStateReader))
          .build();
      clusterDataProvider = new SolrClientDataProvider(new ZkDistributedQueueFactory(zkClient), cloudSolrClient);
    }
    return clusterDataProvider;
  }

