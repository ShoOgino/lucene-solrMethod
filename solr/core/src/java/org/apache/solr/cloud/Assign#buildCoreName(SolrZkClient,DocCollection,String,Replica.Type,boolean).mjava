  public static String buildCoreName(SolrZkClient zkClient, DocCollection collection, String shard, Replica.Type type, boolean newCollection) {
    Slice slice = collection.getSlice(shard);
    int defaultValue = defaultCounterValue(collection, newCollection);
    int replicaNum = incAndGetId(zkClient, collection.getName(), defaultValue);
    String coreName = buildCoreName(collection.getName(), shard, type, replicaNum);
    while (existCoreName(coreName, slice)) {
      replicaNum = incAndGetId(zkClient, collection.getName(), defaultValue);
      coreName = buildCoreName(collection.getName(), shard, type, replicaNum);
    }
    return coreName;
  }

