  /**
   * Closes the underlying ZooKeeper client.
   */
  public void close() {
    try {
      String nodePath = ZkStateReader.LIVE_NODES_ZKNODE + "/" + nodeName;
      // we don't retry if there is a problem - count on ephem timeout
      zkClient.delete(nodePath, -1, false);
    } catch (KeeperException.NoNodeException e) {
      // fine
    } catch (InterruptedException e) {
      Thread.currentThread().interrupt();
    } catch (KeeperException e) {
      SolrException.log(log, "Error trying to remove our ephem live node", e);
    }
    
    for (ElectionContext context : electionContexts.values()) {
      context.close();
    }
    
    try {
      overseer.close();
    } catch(Throwable t) {
      log.error("Error closing overseer", t);
    }
    zkClient.close();
  }

