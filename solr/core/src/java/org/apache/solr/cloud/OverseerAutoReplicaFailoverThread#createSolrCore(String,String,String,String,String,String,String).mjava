  private boolean createSolrCore(final String collection,
      final String createUrl, final String dataDir, final String ulogDir,
      final String coreNodeName, final String coreName, final String shardId) {

    try (HttpSolrClient client = new HttpSolrClient.Builder(createUrl)
        .withConnectionTimeout(30000)
        .withSocketTimeout(60000)
        .build()) {
      log.debug("create url={}", createUrl);
      Create createCmd = new Create();
      createCmd.setCollection(collection);
      createCmd.setCoreNodeName(coreNodeName);
      // TODO: how do we ensure unique coreName
      // for now, the collections API will use unique names
      createCmd.setShardId(shardId);
      createCmd.setCoreName(coreName);
      createCmd.setDataDir(dataDir);
      createCmd.setUlogDir(ulogDir.substring(0, ulogDir.length() - "/tlog".length()));
      client.request(createCmd);
    } catch (Exception e) {
      SolrException.log(log, "Exception trying to create new replica on " + createUrl, e);
      return false;
    }
    return true;
  }

