  private AutoScalingConfig handleRemovePolicy(SolrQueryRequest req, SolrQueryResponse rsp, CommandOperation op,
                                               AutoScalingConfig currentConfig) throws KeeperException, InterruptedException, IOException {
    String policyName = (String) op.getVal("");

    if (op.hasError()) return currentConfig;

    Map<String, List<Clause>> policies = currentConfig.getPolicy().getPolicies();
    if (policies == null || !policies.containsKey(policyName)) {
      op.addError("No policy exists with name: " + policyName);
      return currentConfig;
    }

    container.getZkController().getZkStateReader().getClusterState().forEachCollection(coll -> {
      if (policyName.equals(coll.getPolicyName()))
        op.addError(StrUtils.formatString("policy : {0} is being used by collection {1}", policyName, coll.getName()));
    });
    if (op.hasError()) return currentConfig;
    policies = new HashMap<>(policies);
    policies.remove(policyName);
    Policy p = currentConfig.getPolicy().withPolicies(policies);
    currentConfig = currentConfig.withPolicy(p);
    return currentConfig;
  }

