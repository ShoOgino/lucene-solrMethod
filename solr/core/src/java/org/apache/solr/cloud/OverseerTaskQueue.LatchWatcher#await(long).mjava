    public void await(long timeoutMs) throws InterruptedException {
      assert timeoutMs > 0;
      long timeoutNanos = TimeUnit.MILLISECONDS.toNanos(timeoutMs);
      lock.lock();
      try {
        while (this.event == null) {
          if (timeoutNanos <= 0) {
            return;
          }
          timeoutNanos = eventReceived.awaitNanos(timeoutNanos);
        }
      } finally {
        lock.unlock();
      }
    }

