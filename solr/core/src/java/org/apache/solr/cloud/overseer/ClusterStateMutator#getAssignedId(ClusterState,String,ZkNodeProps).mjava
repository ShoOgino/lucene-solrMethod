  /*
       * Return an already assigned id or null if not assigned
       */
  public static String getAssignedId(final ClusterState state, final String nodeName,
                              final ZkNodeProps coreState) {
    Collection<Slice> slices = state.getSlices(coreState.getStr(ZkStateReader.COLLECTION_PROP));
    if (slices != null) {
      for (Slice slice : slices) {
        if (slice.getReplicasMap().get(nodeName) != null) {
          return slice.getName();
        }
      }
    }
    return null;
  }

