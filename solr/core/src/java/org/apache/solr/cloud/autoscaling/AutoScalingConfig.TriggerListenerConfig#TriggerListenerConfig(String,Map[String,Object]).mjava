    public TriggerListenerConfig(String name, Map<String, Object> properties) {
      this.name = name;
      this.properties.putAll(properties);
      trigger = (String)properties.get(AutoScalingParams.TRIGGER);
      List<String> stageNames = getList(AutoScalingParams.STAGE, properties);
      for (String stageName : stageNames) {
        try {
          AutoScaling.EventProcessorStage stage = AutoScaling.EventProcessorStage.valueOf(stageName.toUpperCase(Locale.ROOT));
          stages.add(stage);
        } catch (Exception e) {
          LOG.warn("Invalid stage name '" + name + "' in listener config, skipping: " + properties);
        }
      }
      listenerClass = (String)properties.get(AutoScalingParams.CLASS);
      beforeActions = new HashSet<>(getList(AutoScalingParams.BEFORE_ACTION, properties));
      afterActions = new HashSet<>(getList(AutoScalingParams.AFTER_ACTION, properties));
    }

