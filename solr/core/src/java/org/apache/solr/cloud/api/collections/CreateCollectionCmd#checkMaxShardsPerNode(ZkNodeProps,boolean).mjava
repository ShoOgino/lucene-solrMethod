  public static int checkMaxShardsPerNode(ZkNodeProps message, boolean usePolicyFramework) {
    int maxShardsPerNode = message.getInt(MAX_SHARDS_PER_NODE, 1);
    if (usePolicyFramework && message.getStr(MAX_SHARDS_PER_NODE) != null && maxShardsPerNode > 0) {
      throw new SolrException(ErrorCode.BAD_REQUEST, "'maxShardsPerNode>0' is not supported when autoScaling policies are used");
    }
    if (maxShardsPerNode == -1 || usePolicyFramework) maxShardsPerNode = Integer.MAX_VALUE;

    return maxShardsPerNode;
  }

