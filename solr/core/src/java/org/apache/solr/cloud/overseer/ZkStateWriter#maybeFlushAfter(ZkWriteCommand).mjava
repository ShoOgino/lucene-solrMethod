  /**
   * Logic to decide a flush after processing a ZkWriteCommand
   *
   * @param cmd the ZkWriteCommand instance
   * @return true if a flush to ZK is required, false otherwise
   */
  protected boolean maybeFlushAfter(ZkWriteCommand cmd) {
    if (cmd.collection == null)
      return false;
    lastCollectionName = cmd.name;
    lastStateFormat = cmd.collection.getStateFormat();
    return System.nanoTime() - lastUpdatedTime > MAX_FLUSH_INTERVAL || updates.size() > Overseer.STATE_UPDATE_BATCH_SIZE;
  }

