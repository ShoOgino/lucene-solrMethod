  /**
   * Create a snapshot of all content in this instance.
   */
  public Map<String, Object> getSnapshot() {
    Map<String, Object> snapshot = new LinkedHashMap<>();
    dataMap.forEach((path, vd) -> {
      Map<String, Object> data = new HashMap<>();
      vd.toMap(data);
      snapshot.put(path, data);
    });
    return snapshot;
  }

