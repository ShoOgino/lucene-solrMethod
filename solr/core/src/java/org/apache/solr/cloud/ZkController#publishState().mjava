  private void publishState() {
    final String nodePath = "/node_states/" + getNodeName();

    synchronized (coreStates) {
      try {
        zkClient.setData(nodePath, ZkStateReader.toJSON(coreStates.values()),
            true);
        
      } catch (KeeperException e) {
        throw new ZooKeeperException(SolrException.ErrorCode.SERVER_ERROR,
            "could not publish node state", e);
      } catch (InterruptedException e) {
        // Restore the interrupted status
        Thread.currentThread().interrupt();
        throw new ZooKeeperException(SolrException.ErrorCode.SERVER_ERROR,
            "could not publish node state", e);
      }
    }
  }

