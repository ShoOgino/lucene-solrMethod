  public SnapshotClusterStateProvider(ClusterStateProvider other) throws Exception {
    liveNodes = Collections.unmodifiableSet(new HashSet<>(other.getLiveNodes()));
    ClusterState otherState = other.getClusterState();
    clusterState = new ClusterState(otherState.getZNodeVersion(), liveNodes, otherState.getCollectionsMap());
    clusterProperties = new HashMap<>(other.getClusterProperties());
  }

