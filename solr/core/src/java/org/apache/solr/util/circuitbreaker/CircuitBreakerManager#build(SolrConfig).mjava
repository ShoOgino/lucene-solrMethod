  /**
   * Register default circuit breakers and return a constructed CircuitBreakerManager
   * instance which serves the given circuit breakers.
   *
   * Any default circuit breakers should be registered here.
   */
  public static CircuitBreakerManager build(SolrConfig solrConfig) {
    CircuitBreakerManager circuitBreakerManager = new CircuitBreakerManager(solrConfig.useCircuitBreakers);

    // Install the default circuit breakers
    CircuitBreaker memoryCircuitBreaker = new MemoryCircuitBreaker(solrConfig);
    CircuitBreaker cpuCircuitBreaker = new CPUCircuitBreaker(solrConfig);

    circuitBreakerManager.register(memoryCircuitBreaker);
    circuitBreakerManager.register(cpuCircuitBreaker);

    return circuitBreakerManager;
  }

