  @Override
  public void initializeMetrics(SolrMetricManager manager, String registry, String scope) {
    this.metricsRegistry = manager.registry(registry);
    metricsRegistry.register(SolrMetricManager.mkName("availableConnections", scope),
        (Gauge<Integer>) () -> {
          // this acquires a lock on the connection pool; remove if contention sucks
          return getTotalStats().getAvailable();
        });
    metricsRegistry.register(SolrMetricManager.mkName("leasedConnections", scope),
        (Gauge<Integer>) () -> {
          // this acquires a lock on the connection pool; remove if contention sucks
          return getTotalStats().getLeased();
        });
    metricsRegistry.register(SolrMetricManager.mkName("maxConnections", scope),
        (Gauge<Integer>) () -> {
          // this acquires a lock on the connection pool; remove if contention sucks
          return getTotalStats().getMax();
        });
    metricsRegistry.register(SolrMetricManager.mkName("pendingConnections", scope),
        (Gauge<Integer>) () -> {
          // this acquires a lock on the connection pool; remove if contention sucks
          return getTotalStats().getPending();
        });
  }

