  @Override
  public Snapshot getSnapshot() {
    lockForRegularUsage();
    try {
      return new Snapshot(values.values());
    } finally {
      unlockForRegularUsage();
    }
  }

