    @Override
    public int runTool(CommandLine cli) throws Exception {

      // quiet down the ZK logging for cli tools
      LogManager.getLogger("org.apache.zookeeper").setLevel(Level.ERROR);
      LogManager.getLogger("org.apache.solr.common.cloud").setLevel(Level.WARN);

      String solrUrl = cli.getOptionValue("solrUrl", DEFAULT_SOLR_URL);
      if (!solrUrl.endsWith("/"))
        solrUrl += "/";

      String systemInfoUrl = solrUrl+"admin/info/system";
      CloseableHttpClient httpClient = getHttpClient();

      int result = 0;
      try {
        Map<String,Object> systemInfo = getJson(httpClient, systemInfoUrl, 2);
        if ("solrcloud".equals(systemInfo.get("mode"))) {
          result = deleteCollection(cli);
        } else {
          result = deleteCore(cli, httpClient, solrUrl);
        }
      } finally {
        closeHttpClient(httpClient);
      }

      return result;
    }

