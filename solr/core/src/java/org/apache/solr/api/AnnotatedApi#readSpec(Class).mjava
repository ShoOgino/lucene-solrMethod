  private static SpecProvider readSpec(Class klas) {
    EndPoint endPoint = (EndPoint) klas.getAnnotation(EndPoint.class);
    if (endPoint == null)
      throw new SolrException(SolrException.ErrorCode.SERVER_ERROR, "Invalid class :  " + klas.getName());
    return () -> {
      Map map = new LinkedHashMap();
      List<String> methods = new ArrayList<>();
      for (SolrRequest.METHOD method : endPoint.method()) {
        methods.add(method.name());
      }
      map.put("methods", methods);
      map.put("url", new ValidatingJsonMap(Collections.singletonMap("paths", Arrays.asList(endPoint.path()))));
      Map<String, Object> cmds = new HashMap<>();

      for (Method method : klas.getMethods()) {
        Command command = method.getAnnotation(Command.class);
        if (command != null && !command.name().isEmpty()) {
          cmds.put(command.name(), AnnotatedApi.createSchema(method));
        }
      }
      if (!cmds.isEmpty()) {
        map.put("commands", cmds);
      }
      return new ValidatingJsonMap(map);
    };


  }

