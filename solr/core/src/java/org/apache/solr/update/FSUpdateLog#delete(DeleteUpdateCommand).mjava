  @Override
  public void delete(DeleteUpdateCommand cmd) {
    BytesRef br = cmd.getIndexedId();

    synchronized (this) {
      ensureLog();
      long pos = tlog.writeDelete(cmd);
      LogPtr ptr = new LogPtr(pos);
      map.put(br, ptr);
      // SolrCore.verbose("TLOG: added delete for id " + cmd.id + " to " + tlog + " " + ptr + " map=" + System.identityHashCode(map));
    }
  }

