  protected void copyAndSwitchToNewTlog(CommitUpdateCommand cuc) {
    synchronized (this) {
      if (tlog == null && prevTlog == null && prevMapLog2 == null && logs.isEmpty()) {
        return;
      }
      preCommit(cuc);
      try {
        copyOverOldUpdates(cuc.getVersion(), false);
      } finally {
        postCommit(cuc);
      }
    }
  }

