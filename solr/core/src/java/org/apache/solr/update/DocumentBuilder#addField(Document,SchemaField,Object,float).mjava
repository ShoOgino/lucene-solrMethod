  private static void addField(Document doc, SchemaField field, Object val, float boost) {
    for (StorableField f : field.getType().createFields(field, val, boost)) {
      if (f != null) doc.add((Field) f); // null fields are not added
    }
  }

