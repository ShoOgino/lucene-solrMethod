  private static void addField(Document doc, SchemaField field, Object val, float boost) {
    if (field.isPolyField()) {
      IndexableField[] farr = field.getType().createFields(field, val, boost);
      for (IndexableField f : farr) {
        if (f != null) doc.add(f); // null fields are not added
      }
    } else {
      IndexableField f = field.createField(val, boost);
      if (f != null) doc.add(f);  // null fields are not added
    }
  }

