    public boolean isLeader(UpdateCommand cmd) {
      if ((cmd.getFlags() & (UpdateCommand.REPLAY | UpdateCommand.PEER_SYNC)) != 0) {
        return false;
      }
      if (phase == DistributedUpdateProcessor.DistribPhase.FROMLEADER) {
        return false;
      }
      // if phase==TOLEADER, we can't just assume we are the leader... let the normal logic check.
      boolean x = distribProc.isLeader(cmd);
      // log.info("VERSION: checking if we are leader:" + x);
      return x;
    }

