  private void updateDocument(AddUpdateCommand cmd, IndexWriter writer, Term updateTerm) throws IOException {
    if (cmd.isBlock()) {
      log.debug("updateDocuments({})", cmd);
      writer.updateDocuments(updateTerm, cmd);
    } else {
      Document luceneDocument = cmd.getLuceneDocument(false);
      log.debug("updateDocument({})", cmd);
      writer.updateDocument(updateTerm, luceneDocument);
    }
  }

