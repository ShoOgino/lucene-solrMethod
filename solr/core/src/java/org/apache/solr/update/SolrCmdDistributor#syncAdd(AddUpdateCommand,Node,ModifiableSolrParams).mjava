  /**
   * Synchronous (blocking) add to specified node. Any error returned from node is propagated.
   */
  public void syncAdd(AddUpdateCommand cmd, Node node, ModifiableSolrParams params) throws IOException {
    log.info("SYNCADD on {} : {}", node, cmd.getPrintableId());
    checkResponses(false);
    // flush all pending deletes
    flushDeletes(1);
    // flush all pending adds
    flushAdds(1);
    // finish with the pending requests
    checkResponses(false);

    UpdateRequest ureq = new UpdateRequest();
    ureq.add(cmd.solrDoc, cmd.commitWithin, cmd.overwrite);

    ureq.setParams(params);
    syncRequest(node, ureq);
  }

