  /** Get the properties for a given field.
   *
   * @param field not required to exist in the schema
   */
  protected SimpleOrderedMap<Object> getFieldProperties(SchemaField field) {
    if (null == field) {
      return null;
    }
    SimpleOrderedMap<Object> properties = field.getNamedPropertyValues(showDefaults);
    if ( ! getSchema().getFields().containsKey(field.getName())) {
      String dynamicBase = getSchema().getDynamicPattern(field.getName());
      if ( ! field.getName().equals(dynamicBase)) {
        // Don't add dynamicBase property if it's identical to the field name. 
        properties.add(DYNAMIC_BASE, getSchema().getDynamicPattern(field.getName()));
      }
    }
    if (field == getSchema().getUniqueKeyField()) {
      properties.add(UNIQUE_KEY, true);
    }
    return properties;
  }

