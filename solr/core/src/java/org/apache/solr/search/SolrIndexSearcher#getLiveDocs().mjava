  /** @lucene.internal the type of DocSet returned may change in the future */
  public BitDocSet getLiveDocs() throws IOException {
    // Going through the filter cache will provide thread safety here if we only had getLiveDocs,
    // but the addition of setLiveDocs means we needed to add volatile to "liveDocs".
    if (liveDocs == null) {
      liveDocs = getDocSetBits(matchAllDocsQuery);
    }
    assert liveDocs.size() == numDocs();
    return liveDocs;
  }

