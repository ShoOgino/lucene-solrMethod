  // code to produce docsets for non-docsetproducer queries
  public static DocSet createDocSetGeneric(SolrIndexSearcher searcher, Query query) throws IOException {

    int maxDoc = searcher.getIndexReader().maxDoc();
    DocSetCollector collector = new DocSetCollector((maxDoc >> 6) + 5, maxDoc);

    try {
      searcher.search(query, collector);
    } catch ( ExitableDirectoryReader.ExitingReaderException e) {
      searcher.log.warn("Query: " + query + "; " + e.getMessage());
    }

    return collector.getDocSet();
  }

