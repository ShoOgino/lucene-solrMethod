  private static String getIndexDir(Directory dir) {
    if (dir instanceof FSDirectory) {
      return ((FSDirectory)dir).getDirectory().getAbsolutePath();
    } else if (dir instanceof NRTCachingDirectory) {
      // recurse on the delegate
      return getIndexDir(((NRTCachingDirectory) dir).getDelegate());
    } else {
      log.warn("WARNING: Directory impl does not support setting indexDir: " + dir.getClass().getName());
      return null;
    }
  }

