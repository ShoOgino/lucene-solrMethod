  /** @lucene.internal
   * gets a cached version of the IndexFingerprint for this searcher
   **/
  public IndexFingerprint getIndexFingerprint(long maxVersion) throws IOException {
    IndexFingerprint fingerprint = maxVersionFingerprintCache.get(maxVersion);
    if (fingerprint != null) return fingerprint;
    // possibly expensive, so prevent more than one thread from calculating it for this searcher
    synchronized (maxVersionFingerprintCache) {
      fingerprint = maxVersionFingerprintCache.get(maxVersionFingerprintCache);
      if (fingerprint != null) return fingerprint;
      fingerprint = IndexFingerprint.getFingerprint(this, maxVersion);
      maxVersionFingerprintCache.put(maxVersion, fingerprint);
      return fingerprint;
    }
  }

