  @Override
  public SlotAcc createSlotAcc(FacetContext fcontext, int numDocs, int numSlots) throws IOException {
    ValueSource vs = getArg();

    SchemaField sf = null;

    if (vs instanceof FieldNameValueSource) {
      String field = ((FieldNameValueSource)vs).getFieldName();
      sf = fcontext.qcontext.searcher().getSchema().getField(field);

      vs = sf.getType().getValueSource(sf, null); // temporary implementation to make existing code work
    }

    if (vs instanceof StrFieldSource) {
      if (sf.multiValued() || sf.getType().multiValuedFieldCache()) {
        if (sf.hasDocValues()) {
          // dv
        } else {
          // uif
        }
      } else {
        return new SingleValuedOrdAcc(fcontext, sf, numSlots);
      }
    }

    // numeric functions
    return new ValSlotAcc(vs, fcontext, numSlots);
  }

