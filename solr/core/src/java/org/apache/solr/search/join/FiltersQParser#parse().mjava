  @Override
  public final Query parse() throws SyntaxError {
    Map<Query,Occur> clauses = clauses();
    
    exclude(clauses);
    
    int numClauses = 0;
    BooleanQuery.Builder builder = new BooleanQuery.Builder();
    numClauses += addQuery(builder, clauses);
    numClauses += addFilters(builder, clauses);
    // what about empty query? 
    return numClauses > 0 ? wrapSubordinateClause(builder.build()) : noClausesQuery();
  }

