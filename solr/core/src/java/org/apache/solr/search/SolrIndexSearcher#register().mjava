  /**
   * Register sub-objects such as caches and our own metrics
   */
  public void register() {
    final Map<String,SolrInfoBean> infoRegistry = core.getInfoRegistry();
    // register self
    infoRegistry.put(STATISTICS_KEY, this);
    infoRegistry.put(name, this);
    for (SolrCache cache : cacheList) {
      cache.setState(SolrCache.State.LIVE);
      infoRegistry.put(cache.name(), cache);
    }
    metricManager = core.getCoreContainer().getMetricManager();
    registryName = core.getCoreMetricManager().getRegistryName();
    for (SolrCache cache : cacheList) {
      cache.initializeMetrics(metricManager, registryName, core.getMetricTag(), SolrMetricManager.mkName(cache.name(), STATISTICS_KEY));
    }
    initializeMetrics(metricManager, registryName, core.getMetricTag(), STATISTICS_KEY);
    registerTime = new Date();
  }

