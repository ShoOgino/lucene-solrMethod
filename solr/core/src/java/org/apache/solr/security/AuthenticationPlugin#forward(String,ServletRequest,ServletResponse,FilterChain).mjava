  protected void forward(String user, ServletRequest  req, ServletResponse rsp,
                                    FilterChain chain) throws IOException, ServletException {
    if(user != null) {
      final Principal p = new BasicUserPrincipal(user);
      req = new HttpServletRequestWrapper((HttpServletRequest) req) {
        @Override
        public Principal getUserPrincipal() {
          return p;
        }
      };
    }
    chain.doFilter(req,rsp);
  }

