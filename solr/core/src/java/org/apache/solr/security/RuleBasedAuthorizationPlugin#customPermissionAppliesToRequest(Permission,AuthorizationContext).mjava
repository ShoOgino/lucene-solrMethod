  private boolean customPermissionAppliesToRequest(Permission customPermission, AuthorizationContext context) {
    if (customPermission.method != null && !customPermission.method.contains(context.getHttpMethod())) {
      //this permissions HTTP method does not match this rule. try other rules
      return false;
    }
    if (customPermission.params != null) {
      for (Map.Entry<String, Function<String[], Boolean>> e : customPermission.params.entrySet()) {
        String[] paramVal = context.getParams().getParams(e.getKey());
        if(!e.getValue().apply(paramVal)) return false;
      }
    }

    return true;
  }

