  private RequestType findRequestType() {
    if (ADMIN_PATH_REGEXES.stream().map(Pattern::compile)
            .anyMatch(p -> p.matcher(resource).matches())) return RequestType.ADMIN;
    if (SEARCH_PATH_REGEXES.stream().map(Pattern::compile)
                    .anyMatch(p -> p.matcher(resource).matches())) return RequestType.SEARCH;
    if (INDEXING_PATH_REGEXES.stream().map(Pattern::compile)
                    .anyMatch(p -> p.matcher(resource).matches())) return RequestType.UPDATE;
    if (STREAMING_PATH_REGEXES.stream().map(Pattern::compile)
                    .anyMatch(p -> p.matcher(resource).matches())) return RequestType.STREAMING;
    return RequestType.UNKNOWN;
  }

