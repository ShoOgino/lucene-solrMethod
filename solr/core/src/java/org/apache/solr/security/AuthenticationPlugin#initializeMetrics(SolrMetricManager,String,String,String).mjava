  @Override
  public void initializeMetrics(SolrMetricManager manager, String registryName, String tag, final String scope) {
    this.metricManager = manager;
    this.registryName = registryName;
    // Metrics
    registry = manager.registry(registryName);
    numErrors = manager.meter(this, registryName, "errors", getCategory().toString(), scope);
    requests = manager.counter(this, registryName, "requests", getCategory().toString(), scope);
    numAuthenticated = manager.counter(this, registryName, "authenticated", getCategory().toString(), scope);
    numPassThrough = manager.counter(this, registryName, "passThrough", getCategory().toString(), scope);
    numWrongCredentials = manager.counter(this, registryName, "failWrongCredentials", getCategory().toString(), scope);
    numMissingCredentials = manager.counter(this, registryName, "failMissingCredentials", getCategory().toString(), scope);
    requestTimes = manager.timer(this, registryName, "requestTimes", getCategory().toString(), scope);
    totalTime = manager.counter(this, registryName, "totalTime", getCategory().toString(), scope);
    metricNames.addAll(Arrays.asList("errors", "requests", "authenticated", "passThrough",
        "failWrongCredentials", "failMissingCredentials", "requestTimes", "totalTime"));
  }

