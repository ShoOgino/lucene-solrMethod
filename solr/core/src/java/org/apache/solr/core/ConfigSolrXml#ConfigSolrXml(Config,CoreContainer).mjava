  public ConfigSolrXml(Config config, CoreContainer container)
      throws ParserConfigurationException, IOException, SAXException {
    super(config);
    checkForIllegalConfig();
    
    fillPropMap();
    
    String coreRoot = get(CfgProp.SOLR_COREROOTDIRECTORY, (container == null ? config.getResourceLoader().getInstanceDir() : container.getSolrHome()));
    coreDescriptorMap = solrCoreDiscoverer.discover(container, new File(coreRoot));
  }

