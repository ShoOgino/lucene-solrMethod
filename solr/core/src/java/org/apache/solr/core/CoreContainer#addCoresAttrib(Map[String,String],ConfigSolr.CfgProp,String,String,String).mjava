  //TODO: Obsolete in 5.0 Having to pass prop is a hack to get us to 5.0.
  private void addCoresAttrib(Map<String,String> coresAttribs, ConfigSolr.CfgProp prop,
                              String attribName, String attribValue, String defaultValue) {
    if (cfg == null) {
      coresAttribs.put(attribName, attribValue);
      return;
    }
    
    if (attribValue != null) {
      String origValue = cfg.getOrigProp(prop, null);
      
      if (origValue == null && defaultValue != null && attribValue.equals(defaultValue)) return;

      if (attribValue.equals(PropertiesUtil.substituteProperty(origValue, loader.getCoreProperties()))) {
        coresAttribs.put(attribName, origValue);
      } else {
        coresAttribs.put(attribName, attribValue);
      }
    }
  }

