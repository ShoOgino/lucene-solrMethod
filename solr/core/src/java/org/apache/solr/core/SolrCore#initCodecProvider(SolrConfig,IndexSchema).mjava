  private CodecProvider initCodecProvider(SolrConfig solrConfig, IndexSchema schema) {
    final PluginInfo info = solrConfig.getPluginInfo(CodecProviderFactory.class.getName());
    CodecProvider cp;
    if (info != null) {
      CodecProviderFactory factory = (CodecProviderFactory) schema.getResourceLoader().newInstance(info.className);
      factory.init(info.initArgs);
      cp = factory.create();
    } else {
      // make sure we use the default if nothing is configured
      cp = CodecProvider.getDefault();
    }
    return new SchemaCodecProvider(schema, cp);
  }

