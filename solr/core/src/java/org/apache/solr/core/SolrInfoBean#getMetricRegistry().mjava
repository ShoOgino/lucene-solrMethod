  /**
   * An instance of {@link MetricRegistry} that this component uses for metrics reporting
   * (default is null, which means no registry).
   */
  default MetricRegistry getMetricRegistry() {
    if (this instanceof SolrMetricProducer) {
      SolrMetricsContext context = ((SolrMetricProducer)this).getSolrMetricsContext();
      return context != null ? context.getMetricRegistry() : null;
    }
    return null;
  }

