  public static Map getDeepCopy(Map map, int maxDepth) {
    Map copy = new LinkedHashMap<>();
    for (Object o : map.entrySet()) {
      Map.Entry e = (Map.Entry) o;
      Object v = e.getValue();
      if (v instanceof Map && maxDepth > 0) {
        v = getDeepCopy((Map) v, maxDepth - 1);
      }
      copy.put(e.getKey(), v);
    }
    return copy;
  }

