    public MetricsDirectory(SolrMetricManager metricManager, String registry, Directory in, boolean directoryTotals,
                            boolean directoryDetails) throws IOException {
      super(in);
      this.metricManager = metricManager;
      this.registry = registry;
      this.in = in;
      this.directoryDetails = directoryDetails;
      this.directoryTotals = directoryTotals;
      if (directoryTotals) {
        this.totalReads = metricManager.meter(registry, "reads", SolrInfoMBean.Category.DIRECTORY.toString(), "total");
        this.totalWrites = metricManager.meter(registry, "writes", SolrInfoMBean.Category.DIRECTORY.toString(), "total");
        if (directoryDetails) {
          this.totalReadSizes = metricManager.histogram(registry, "readSizes", SolrInfoMBean.Category.DIRECTORY.toString(), "total");
          this.totalWriteSizes = metricManager.histogram(registry, "writeSizes", SolrInfoMBean.Category.DIRECTORY.toString(), "total");
        } else {
          this.totalReadSizes = null;
          this.totalWriteSizes = null;
        }
      } else {
        this.totalReads = null;
        this.totalWrites = null;
        this.totalReadSizes = null;
        this.totalWriteSizes = null;
      }
    }

