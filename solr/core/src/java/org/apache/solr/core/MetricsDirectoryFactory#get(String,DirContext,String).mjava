  @Override
  public Directory get(String path, DirContext dirContext, String rawLockType) throws IOException {
    Directory dir = in.get(path, dirContext, rawLockType);
    if (dir instanceof MetricsDirectory) {
      return dir;
    } else {
      return new MetricsDirectory(metricManager, registry, dir, directoryTotals, directoryDetails);
    }
  }

