    // core container instantiation
    public CoreContainer initialize() throws FileNotFoundException {
      CoreContainer cores = null;
      String solrHome = SolrResourceLoader.locateSolrHome();
      // ContainerConfigFilename could  could be a properties file
      File fconf = new File(solrHome, "solr.xml");

      log.info("looking for solr config file: " + fconf.getAbsolutePath());
      cores = new CoreContainer(solrHome);

      // first we find zkhost, then we check for solr.xml in zk
      // 1. look for zkhost from sys prop 2. look for zkhost in {solr.home}/solr.properties
      
      // Either we have a config file or not.
      
      if (fconf.exists()) {
        cores.load(solrHome, fconf);
      } else {
        // Back compart support
        log.info("no solr.xml found. using default old-style solr.xml");
        try {
          cores.load(solrHome, new ByteArrayInputStream(ConfigSolrXmlOld.DEF_SOLR_XML.getBytes("UTF-8")), null);
        } catch (Exception e) {
          throw new SolrException(ErrorCode.SERVER_ERROR,
              "CoreContainer.Initialize failed when trying to load default solr.xml file", e);
        }
        cores.configFile = fconf;
      }
      
      return cores;
    }

