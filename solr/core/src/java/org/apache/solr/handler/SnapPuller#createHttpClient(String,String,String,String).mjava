  private static synchronized HttpClient createHttpClient(String connTimeout, String readTimeout, String httpBasicAuthUser, String httpBasicAuthPassword) {
    if (connTimeout == null && readTimeout == null && client != null)  return client;
    final ModifiableSolrParams httpClientParams = new ModifiableSolrParams();
    httpClientParams.set(HttpClientUtil.PROP_CONNECTION_TIMEOUT, connTimeout != null ? connTimeout : "5000");
    httpClientParams.set(HttpClientUtil.PROP_SO_TIMEOUT, readTimeout != null ? readTimeout : "20000");
    httpClientParams.set(HttpClientUtil.PROP_BASIC_AUTH_USER, httpBasicAuthUser);
    httpClientParams.set(HttpClientUtil.PROP_BASIC_AUTH_PASS, httpBasicAuthPassword);
    // Keeping a very high number so that if you have a large number of cores
    // no requests are kept waiting for an idle connection.
    httpClientParams.set(HttpClientUtil.PROP_MAX_CONNECTIONS, 10000);
    httpClientParams.set(HttpClientUtil.PROP_MAX_CONNECTIONS_PER_HOST, 10000);
    HttpClient httpClient = HttpClientUtil.createClient(httpClientParams);
    if (client == null && connTimeout == null && readTimeout == null) client = httpClient;
    return httpClient;
  }

