  private static Collection<ApiCommand> createMapping() {
    Map<ConfigSetMeta, ApiCommand> result = new EnumMap<>(ConfigSetMeta.class);

    for (ConfigSetMeta meta : ConfigSetMeta.values())
      for (ConfigSetOperation op : ConfigSetOperation.values()) {
        if (op.action == meta.action) {
          result.put(meta, new ApiCommand() {
            @Override
            public CollectionApiMapping.CommandMeta meta() {
              return meta;
            }

            @Override
            public void invoke(SolrQueryRequest req, SolrQueryResponse rsp, BaseHandlerApiSupport apiHandler) throws Exception {
              ((ConfigSetsHandlerApi) apiHandler).configSetHandler.invokeAction(req, rsp, op.action);
            }
          });
        }
      }

    for (ConfigSetMeta meta : ConfigSetMeta.values()) {
      if(result.get(meta) == null){
        throw new RuntimeException("No implementation for "+ meta.name());
      }
    }

    return result.values();
  }

