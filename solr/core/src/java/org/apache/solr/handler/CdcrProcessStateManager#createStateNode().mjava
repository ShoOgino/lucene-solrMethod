  private void createStateNode() {
    SolrZkClient zkClient = core.getCoreDescriptor().getCoreContainer().getZkController().getZkClient();
    try {
      if (!zkClient.exists(this.getZnodePath(), true)) {
        if (!zkClient.exists(this.getZnodeBase(), true)) { // Should be a no-op if the node exists
          zkClient.makePath(this.getZnodeBase(), null, CreateMode.PERSISTENT, null, false, true);
        }
        zkClient.create(this.getZnodePath(), DEFAULT_STATE.getBytes(), CreateMode.PERSISTENT, true);
        log.info("Created znode {}", this.getZnodePath());
      }
    } catch (KeeperException.NodeExistsException ne) {
      // Someone got in first and created the node.
    } catch (KeeperException | InterruptedException e) {
      log.warn("Failed to create CDCR process state node", e);
    }
  }

