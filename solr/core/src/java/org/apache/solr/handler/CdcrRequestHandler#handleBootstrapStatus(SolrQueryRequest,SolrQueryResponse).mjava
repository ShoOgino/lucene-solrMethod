  private void handleBootstrapStatus(SolrQueryRequest req, SolrQueryResponse rsp) throws IOException, SolrServerException {
    SolrCoreState coreState = core.getSolrCoreState();
    if (coreState.getCdcrBootstrapRunning()) {
      rsp.add(RESPONSE_STATUS, RUNNING);
      return;
    }

    Future<Boolean> future = coreState.getCdcrBootstrapFuture();
    BootstrapCallable callable = (BootstrapCallable)coreState.getCdcrBootstrapCallable();
    if (future == null) {
      rsp.add(RESPONSE_STATUS, "notfound");
      rsp.add(RESPONSE_MESSAGE, "No bootstrap found in running, completed or failed states");
    } else if (future.isCancelled() || callable.isClosed()) {
      rsp.add(RESPONSE_STATUS, "cancelled");
    } else if (future.isDone()) {
      // could be a normal termination or an exception
      try {
        Boolean result = future.get();
        if (result) {
          rsp.add(RESPONSE_STATUS, COMPLETED);
        } else {
          rsp.add(RESPONSE_STATUS, FAILED);
        }
      } catch (InterruptedException e) {
        // should not happen?
      } catch (ExecutionException e) {
        rsp.add(RESPONSE_STATUS, FAILED);
        rsp.add(RESPONSE, e);
      } catch (CancellationException ce) {
        rsp.add(RESPONSE_STATUS, FAILED);
        rsp.add(RESPONSE_MESSAGE, "Bootstrap was cancelled");
      }
    } else {
      rsp.add(RESPONSE_STATUS, RUNNING);
    }
  }

