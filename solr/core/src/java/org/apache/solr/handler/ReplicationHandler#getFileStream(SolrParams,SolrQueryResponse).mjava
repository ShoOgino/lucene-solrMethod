  /**
   * This method adds an Object of FileStream to the response . The FileStream implements a custom protocol which is
   * understood by SnapPuller.FileFetcher
   *
   * @see org.apache.solr.handler.SnapPuller.LocalFsFileFetcher
   * @see org.apache.solr.handler.SnapPuller.DirectoryFileFetcher
   */
  private void getFileStream(SolrParams solrParams, SolrQueryResponse rsp) {
    ModifiableSolrParams rawParams = new ModifiableSolrParams(solrParams);
    rawParams.set(CommonParams.WT, FILE_STREAM);
    
    String cfileName = solrParams.get(CONF_FILE_SHORT);
    if (cfileName != null) {
      rsp.add(FILE_STREAM, new LocalFsFileStream(solrParams));
    } else {
      rsp.add(FILE_STREAM, new DirectoryFileStream(solrParams));
    }
  }

