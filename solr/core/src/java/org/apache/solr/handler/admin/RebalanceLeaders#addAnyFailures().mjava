  // If for any reason we were supposed to change leadership, that should be recorded in changingLeaders. Any
  // time we verified that the change actually occurred, that entry should have been removed. So report anything
  // left over as a failure.
    private void addAnyFailures() {
    if (pendingOps.size() == 0) {
      return;
    }
    NamedList<Object> fails = (NamedList<Object>) new NamedList<>();
    results.add("failures", fails);

    for (Map.Entry<String, String> ent : pendingOps.entrySet()) {
      log.info("Failed to change leader of shard {} to replica {}", ent.getKey(), ent.getValue());
      NamedList<Object> res = new NamedList<>();
      res.add("status", "failed");
      res.add("msg", String.format(Locale.ROOT, "Could not change leder for slice %s to %s", ent.getKey(), ent.getValue()));
      fails.add(ent.getKey(), res);

    }
  }

