    @Override
    public void newSearcher(SolrIndexSearcher newSearcher,
                            SolrIndexSearcher currentSearcher) {
      long thisCallCount = callCount.incrementAndGet();
      if (isCoreReload && thisCallCount == 1) {
        log.info("Skipping first newSearcher call for suggester " + suggester + " in core reload");
        return;
      } else if (thisCallCount == 1 || (isCoreReload && thisCallCount == 2)) {
        if (buildOnStartup) {
          log.info("buildOnStartup: " + suggester.getName());
          buildSuggesterIndex(newSearcher);
        }
      } else {
        if (buildOnCommit)  {
          log.info("buildOnCommit: " + suggester.getName());
          buildSuggesterIndex(newSearcher);
        } else if (buildOnOptimize) {
          if (newSearcher.getIndexReader().leaves().size() == 1)  {
            log.info("buildOnOptimize: " + suggester.getName());
            buildSuggesterIndex(newSearcher);
          }
        }
      }

    }

