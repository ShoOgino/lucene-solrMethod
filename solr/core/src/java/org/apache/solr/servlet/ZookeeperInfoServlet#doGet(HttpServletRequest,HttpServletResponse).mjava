  @Override
  public void doGet(HttpServletRequest request,
                    HttpServletResponse response)
      throws IOException, ServletException {
    response.setCharacterEncoding("UTF-8");
    response.setContentType("application/json");

    // This attribute is set by the SolrDispatchFilter
    CoreContainer cores = (CoreContainer) request.getAttribute("org.apache.solr.CoreContainer");

    String path = request.getParameter("path");
    String addr = request.getParameter("addr");

    if (addr != null && addr.length() == 0) {
      addr = null;
    }

    String detailS = request.getParameter("detail");
    boolean detail = detailS != null && detailS.equals("true");

    String dumpS = request.getParameter("dump");
    boolean dump = dumpS != null && dumpS.equals("true");

    PrintWriter out = response.getWriter();


    ZKPrinter printer = new ZKPrinter(response, out, cores.getZkController(), addr);
    printer.detail = detail;
    printer.dump = dump;

    try {
      printer.print(path);
    } finally {
      printer.close();
    }
  }

