  private void getSlicesForCollections(ClusterState clusterState,
      Collection<Slice> slices, boolean activeSlices) {
    if (activeSlices) {
      for (String collection : clusterState.getCollections()) {
        final Collection<Slice> activeCollectionSlices = clusterState.getActiveSlices(collection);
        if (activeCollectionSlices != null) {
          slices.addAll(activeCollectionSlices);
        }
      }
    } else {
      for (String collection : clusterState.getCollections()) {
        final Collection<Slice> collectionSlices = clusterState.getSlices(collection);
        if (collectionSlices != null) {
          slices.addAll(collectionSlices);
        }
      }
    }
  }

