  private void init( String context, int port )
  {
    this.context = context;
    server = new Server( port );    
    if (System.getProperty("jetty.testMode") != null) {
      SelectChannelConnector connector = new SelectChannelConnector();
      connector.setPort(port);
      connector.setReuseAddress(true);
      server.setConnectors(new Connector[] { connector });
      server.setSessionIdManager(new HashSessionIdManager(new Random()));
    }
    server.setStopAtShutdown( true );
    
    // Initialize the servlets
    Context root = new Context( server, context, Context.SESSIONS );
    
    // for some reason, there must be a servlet for this to get applied
    root.addServlet( Servlet404.class, "/*" );
    dispatchFilter = root.addFilter( SolrDispatchFilter.class, "*", Handler.REQUEST );
  }

