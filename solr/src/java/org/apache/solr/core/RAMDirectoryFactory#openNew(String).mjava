  /**
   * Non-public for unit-test access only. Do not use directly
   */
  Directory openNew(String path) throws IOException {
    Directory directory;
    File dirFile = new File(path);
    boolean indexExists = dirFile.canRead();
    if (indexExists) {
      Directory dir = super.open(path);
      directory = new RAMDirectory(dir);
    } else {
      directory = new RAMDirectory();
    }
    return directory;
  }

