  private static void addField(Document doc, SchemaField field, String val, float boost) {
    if (field.isPolyField()) {
      Fieldable[] farr = field.getType().createFields(field, val, boost);
      for (Fieldable f : farr) {
        if (f != null) doc.add(f); // null fields are not added
      }
    } else {
      Fieldable f = field.createField(val, boost);
      if (f != null) doc.add(f);  // null fields are not added
    }
  }

