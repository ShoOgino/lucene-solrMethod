  public void testTieredMergePolicyConfig() throws Exception {
    IndexWriterConfig iwc = solrConfig.defaultIndexConfig.toIndexWriterConfig(h.getCore().getSchema());
    MergePolicy mp = iwc.getMergePolicy();
    assertTrue(mp instanceof TieredMergePolicy);
    TieredMergePolicy tieredMP = (TieredMergePolicy) mp;

    // mp-specific setter
    assertEquals(19, tieredMP.getMaxMergeAtOnceExplicit());
    
    // make sure we apply compoundFile and mergeFactor
    assertEquals(false, tieredMP.getUseCompoundFile());
    assertEquals(7, tieredMP.getMaxMergeAtOnce());
    
    // make sure we overrode segmentsPerTier (split from maxMergeAtOnce out of mergeFactor)
    assertEquals(9D, tieredMP.getSegmentsPerTier(), 0.001);
  }

