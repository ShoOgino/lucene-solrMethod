  public static CloudSolrClient getCloudSolrClient(String zkHost, boolean shardLeadersOnly) {
    if (random().nextBoolean()) {
      return new CloudSolrClient(zkHost, shardLeadersOnly);
    }
    
    if (shardLeadersOnly) {
      return new CloudSolrClient.Builder()
          .withZkHost(zkHost)
          .sendUpdatesOnlyToShardLeaders()
          .build();
    }
    return new CloudSolrClient.Builder()
        .withZkHost(zkHost)
        .sendUpdatesToAllReplicasInShard()
        .build();
  }

