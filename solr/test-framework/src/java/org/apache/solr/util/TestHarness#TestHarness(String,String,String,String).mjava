  /**
   * @param coreName to initialize
   * @param dataDir path for index data, will not be cleaned up
   * @param solrConfig solrconfig resource name
   * @param indexSchema schema resource name
   */
  public TestHarness(String coreName, String dataDir, String solrConfig, String indexSchema) {
    try {
      if (coreName == null)
        coreName = ConfigSolrXmlOld.DEFAULT_DEFAULT_CORE_NAME;
      this.coreName = coreName;

      SolrResourceLoader loader = new SolrResourceLoader(SolrResourceLoader.locateSolrHome());
      ConfigSolr config = getTestHarnessConfig(coreName, dataDir, solrConfig, indexSchema);
      container = new CoreContainer(loader, config);
      container.load();

      updater = new UpdateRequestHandler();
      updater.init( null );
    } catch (Exception e) {
      throw new RuntimeException(e);
    }
  }

