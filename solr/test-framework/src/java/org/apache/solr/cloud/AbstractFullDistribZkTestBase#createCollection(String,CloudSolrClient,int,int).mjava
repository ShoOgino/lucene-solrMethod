  protected void createCollection(String collName,
                                  CloudSolrClient client,
                                  int replicationFactor ,
                                  int numShards ) throws Exception {
    int maxShardsPerNode = ((((numShards+1) * replicationFactor) / getCommonCloudSolrClient()
        .getZkStateReader().getClusterState().getLiveNodes().size())) + 1;

    Map<String, Object> props = makeMap(
        ZkStateReader.REPLICATION_FACTOR, replicationFactor,
        ZkStateReader.MAX_SHARDS_PER_NODE, maxShardsPerNode,
        ZkStateReader.REALTIME_REPLICAS, getRealtimeReplicas(),
        NUM_SLICES, numShards);
    Map<String,List<Integer>> collectionInfos = new HashMap<>();
    createCollection(collectionInfos, collName, props, client);
  }

