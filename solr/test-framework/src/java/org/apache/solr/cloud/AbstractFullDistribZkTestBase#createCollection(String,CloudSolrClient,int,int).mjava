  protected void createCollection(String collName,
                                  CloudSolrClient client,
                                  int replicationFactor ,
                                  int numShards ) throws Exception {
    int maxShardsPerNode = ((((numShards+1) * replicationFactor) / getCommonCloudSolrClient()
        .getZkStateReader().getClusterState().getLiveNodes().size())) + 1;
    int numNrtReplicas = useTlogReplicas()?0:replicationFactor;
    int numTlogReplicas = useTlogReplicas()?replicationFactor:0;
    Map<String, Object> props = makeMap(
        ZkStateReader.MAX_SHARDS_PER_NODE, maxShardsPerNode,
        ZkStateReader.NRT_REPLICAS, numNrtReplicas,
        ZkStateReader.TLOG_REPLICAS, numTlogReplicas,
        ZkStateReader.PULL_REPLICAS, getPullReplicaCount(),
        NUM_SLICES, numShards);
    Map<String,List<Integer>> collectionInfos = new HashMap<>();
    createCollection(collectionInfos, collName, props, client);
  }

