  // Helper for bandaid
  private static void checkUniqueDoc(SolrClient client, String collection, String idField, String id, boolean shouldBeThere) throws IOException, SolrServerException {
    TimeOut timeOut = new TimeOut(100, TimeUnit.SECONDS, TimeSource.NANO_TIME);
    final SolrQuery solrQuery = new SolrQuery(idField + ":" + id);

    while (!timeOut.hasTimedOut()) {
      QueryResponse rsp = client.query(collection, solrQuery);
      long found = rsp.getResults().getNumFound();
      if (shouldBeThere && found == 1) {
        return;
      }
      if (shouldBeThere == false && found == 0) {
        return;
      }
      log.warn("Solr11035BandAid should have succeeded in checkUniqueDoc, shouldBeThere == {}, numFound = {}. Will try again after 250 ms sleep", shouldBeThere, found);
      try {
        Thread.sleep(250);
      } catch (InterruptedException e) {
        return; // just bail
      }
    }

  }

