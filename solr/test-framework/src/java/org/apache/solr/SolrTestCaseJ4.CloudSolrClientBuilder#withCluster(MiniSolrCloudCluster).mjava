    /** Randomly chooses the cluster state provider -- either ZK based or HTTP. */
    public CloudSolrClient.Builder withCluster(MiniSolrCloudCluster cluster) {
      if (random().nextBoolean()) {
        return withZkHost(cluster.getZkServer().getZkAddress());
      } else {
        return withSolrUrl(cluster.getRandomJetty(random()).getBaseUrl().toString());
      }
    }

