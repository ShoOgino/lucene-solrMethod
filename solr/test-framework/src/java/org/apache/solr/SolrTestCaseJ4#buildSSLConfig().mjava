  private static SSLTestConfig buildSSLConfig() {
    // test has been disabled
    if (RandomizedContext.current().getTargetClass().isAnnotationPresent(SuppressSSL.class)) {
      return new SSLTestConfig();
    }
    
    // we don't choose ssl that often because of SOLR-5776
    final boolean trySsl = random().nextInt(10) < 2;
    boolean trySslClientAuth = random().nextInt(10) < 2;
    if (Constants.MAC_OS_X) {
      trySslClientAuth = false;
    }
    
    log.info("Randomized ssl ({}) and clientAuth ({})", trySsl,
        trySslClientAuth);
    
    return new SSLTestConfig(trySsl, trySslClientAuth);
  }

