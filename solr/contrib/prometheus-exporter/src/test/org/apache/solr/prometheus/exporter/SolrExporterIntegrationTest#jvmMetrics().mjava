  @Test
  public void jvmMetrics() throws Exception {
    Map<String, Double> jvmMetrics = metricsWithName(
        getAllMetrics(), "solr_metrics_jvm_threads");

    // Include all thread states + plus overall count + number of daemon threads + number of deadlocked threads
    assertEquals(NUM_NODES * (Thread.State.values().length + 3),
        jvmMetrics.size());
  }

