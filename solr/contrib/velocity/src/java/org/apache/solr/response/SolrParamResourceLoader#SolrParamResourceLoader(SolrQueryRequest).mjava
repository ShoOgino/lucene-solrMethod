  public SolrParamResourceLoader(SolrQueryRequest request) {
    super();

    // TODO: Consider using content streams, but need a template name associated with each stream
    // for now, a custom param convention of template.<name>=<template body> is a nice example
    // of per-request overrides of templates

    org.apache.solr.common.params.SolrParams params = request.getParams();
    Iterator<String> names = params.getParameterNamesIterator();
    while (names.hasNext()) {
      String name = names.next();
      
      if (name.startsWith(TEMPLATE_PARAM_PREFIX)) {
        templates.put(name.substring(TEMPLATE_PARAM_PREFIX.length()) + VelocityResponseWriter.TEMPLATE_EXTENSION,params.get(name));
      }
    }
  }

