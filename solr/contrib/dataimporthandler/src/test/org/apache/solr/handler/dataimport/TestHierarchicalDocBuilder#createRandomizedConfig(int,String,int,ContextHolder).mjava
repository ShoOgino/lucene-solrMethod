  /**
   * Creates randomized configuration of a specified depth. Simple configuration example:
   * 
   * <pre>
   * 
   * &lt;dataConfig>
   *   <dataSource type="MockDataSource" />
   *   &lt;document>
   *     &lt;entity name="parent" query="SELECT * FROM parent">
   *       &lt;field column="id" />
   *       &lt;field column="desc" />
   *       &lt;field column="type_s" />
   *       &lt;entity child="true" name="parentChild0" query="select * from parentChild0 where parentChild0_parent_id='${parent.id}'">
   *         &lt;field column="id" />
   *         &lt;field column="desc" />
   *         &lt;field column="type_s" />
   *         &lt;entity child="true" name="parentChild0Child0" query="select * from parentChild0Child0 where parentChild0Child0_parent_id='${parentChild0.id}'">
   *           &lt;field column="id" />
   *           &lt;field column="desc" />
   *           &lt;field column="type_s" />
   *         &lt;/entity>
   *         &lt;entity child="true" name="parentChild0Child1" query="select * from parentChild0Child1 where parentChild0Child1_parent_id='${parentChild0.id}'">
   *           &lt;field column="id" />
   *           &lt;field column="desc" />
   *           &lt;field column="type_s" />
   *         &lt;/entity>
   *       &lt;/entity>
   *       &lt;entity child="true" name="parentChild1" query="select * from parentChild1 where parentChild1_parent_id='${parent.id}'">
   *         &lt;field column="id" />
   *         &lt;field column="desc" />
   *         &lt;field column="type_s" />
   *         &lt;entity child="true" name="parentChild1Child0" query="select * from parentChild1Child0 where parentChild1Child0_parent_id='${parentChild1.id}'">
   *           &lt;field column="id" />
   *           &lt;field column="desc" />
   *           &lt;field column="type_s" />
   *         &lt;/entity>
   *         &lt;entity child="true" name="parentChild1Child1" query="select * from parentChild1Child1 where parentChild1Child1_parent_id='${parentChild1.id}'">
   *           &lt;field column="id" />
   *           &lt;field column="desc" />
   *           &lt;field column="type_s" />
   *         &lt;/entity>
   *       &lt;/entity>
   *     &lt;/entity>
   *   &lt;/document>
   * &lt;/dataConfig>
   * 
   * </pre>
   * 
   * Internally configures MockDataSource.
   **/
  private String createRandomizedConfig(int depth, String parentType, int parentsNum, ContextHolder holder) {
    List<Hierarchy> parentData = createMockedIterator(parentType, "SELECT * FROM " + parentType, parentsNum, holder);
    
    holder.hierarchies = parentData;
    
    String children = createChildren(parentType, 0, depth, parentData, holder);
    
    String rootFields = createFieldsList(FIELD_ID, "desc", "type_s");
    String rootEntity = MessageFormat.format(rootEntityTemplate, parentType, "SELECT * FROM " + parentType, rootFields, children);

    String config = MessageFormat.format(dataConfigTemplate, rootEntity);
    return config;
  }

