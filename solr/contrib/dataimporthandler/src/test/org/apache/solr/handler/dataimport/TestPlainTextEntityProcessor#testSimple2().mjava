  @Test
  public void testSimple2() throws IOException {
    DataImporter di = new DataImporter();
    MockDataSource.setIterator("select id, name, blob_field from lw_table4", Collections.singletonList(Utils.makeMap("blob_field",new BlobImpl(DS.s.getBytes(UTF_8)) ) ).iterator());

    String dc =

        " <dataConfig>" +
            "<dataSource name=\"ds1\" type=\"MockDataSource\"/>\n" +
        " <!-- dataSource for FieldReaderDataSource -->\n" +
        " <dataSource dataField=\"root.blob_field\" name=\"fr\" type=\"FieldReaderDataSource\"/>\n" +
        "\n" +
        " <document name=\"items\">\n" +
        "   <entity dataSource=\"ds1\" name=\"root\" pk=\"id\"  query=\"select id, name, blob_field from lw_table4\" transformer=\"TemplateTransformer\">\n" +
        "           <field column=\"id\" name=\"id\"/>\n" +
        "\n" +
        "        <entity dataField=\"root.blob_field\" dataSource=\"fr\" format=\"text\" name=\"n1\" processor=\"PlainTextEntityProcessor\" url=\"blob_field\">\n" +
        "                       <field column=\"plainText\" name=\"plainText\"/>\n" +
        "           </entity>\n" +
        "\n" +
        "   </entity>\n" +
        " </document>\n" +
        "</dataConfig>";
    System.out.println(dc);
    di.loadAndInit(dc);
    redirectTempProperties(di);

    TestDocBuilder.SolrWriterImpl sw = new TestDocBuilder.SolrWriterImpl();
    RequestInfo rp = new RequestInfo(null, createMap("command", "full-import"), null);
    di.runCmd(rp, sw);
    assertEquals(DS.s, sw.docs.get(0).getFieldValue("plainText"));
  }

