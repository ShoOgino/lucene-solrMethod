  @BeforeClass
  public static void createTempSolrHomeAndCore() throws Exception {
    tmpSolrHome = createTempDir().toFile().getAbsolutePath();
    FileUtils.copyDirectory(getFile("dih/solr"), new File(tmpSolrHome).getAbsoluteFile());
    initCore("dataimport-solrconfig.xml", "dataimport-schema.xml", 
             new File(tmpSolrHome).getAbsolutePath());
    
    // See SOLR-2551
    String configDir = h.getCore().getResourceLoader().getConfigDir();
    String filePath = configDir;
    if (configDir != null && !configDir.endsWith(File.separator))
      filePath += File.separator;
    filePath += "dataimport.properties";
    f = new File(filePath);
    // execute the test only if we are able to set file to read only mode
    assumeTrue("No dataimport.properties file", f.exists() || f.createNewFile());
    assumeTrue("dataimport.properties can't be set read only", f.setReadOnly());
    assumeFalse("dataimport.properties is still writable even though " + 
                "marked readonly - test running as superuser?", f.canWrite());
  }

