  /**
   * Helper for creating a Context instance. Useful for testing Transformers
   */
  @SuppressWarnings("unchecked")
  public static TestContext getContext(EntityProcessorWrapper parent,
                                   VariableResolver resolver, @SuppressWarnings({"rawtypes"})DataSource parentDataSource,
                                   String currProcess, final List<Map<String, String>> entityFields,
                                   final Map<String, String> entityAttrs) {
    if (resolver == null) resolver = new VariableResolver();
    final Context delegate = new ContextImpl(parent, resolver,
            parentDataSource, currProcess,
        new HashMap<>(), null, null);
    return new TestContext(entityAttrs, delegate, entityFields, parent == null);
  }

