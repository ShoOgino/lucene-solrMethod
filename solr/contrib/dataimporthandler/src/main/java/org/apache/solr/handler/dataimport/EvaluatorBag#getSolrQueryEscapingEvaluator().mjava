  /**
   * <p/>Returns an <code>Evaluator</code> instance meant to be used for escaping reserved characters in Solr
   * queries</p>
   *
   * @return an <code>Evaluator</code> instance capable of escaping reserved characters in solr queries.
   *
   * @see org.apache.solr.client.solrj.util.ClientUtils#escapeQueryChars(String)
   */
  public static Evaluator getSolrQueryEscapingEvaluator() {
    return new Evaluator() {
      public String evaluate(String expression, Context context) {
        List l = parseParams(expression, context.getVariableResolver());
        if (l.size() != 1) {
          throw new DataImportHandlerException(SEVERE, "'escapeQueryChars' must have at least one parameter ");
        }
        String s = l.get(0).toString();
        return ClientUtils.escapeQueryChars(s);
      }
    };
  }

