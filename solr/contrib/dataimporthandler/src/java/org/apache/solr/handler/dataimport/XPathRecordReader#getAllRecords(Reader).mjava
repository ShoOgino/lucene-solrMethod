  /** 
   * Uses {@link #streamRecords streamRecords} to parse the XML source but with
   * a handler that collects all the emitted records into a single List which 
   * is returned upon completion.
   *
   * @param r the stream reader
   * @return results a List of emitted records
   */
  public List<Map<String, Object>> getAllRecords(Reader r) {
    final List<Map<String, Object>> results = new ArrayList<>();
    streamRecords(r, new Handler() {
      @Override
      public void handle(Map<String, Object> record, String s) {
        results.add(record);
      }
    });
    return results;
  }

