  private Map<String,EntityField> gatherAllFields(DataImporter di, Entity e) {
    Map<String,EntityField> fields = new HashMap<String,EntityField>();
    if (e.getFields() != null) {
      for (EntityField f : e.getFields()) {
        fields.put(f.getName(), f);
      }
    }
    for (Entity e1 : e.getChildren()) {
      fields.putAll(gatherAllFields(di, e1));
    }
    return fields;
  }

