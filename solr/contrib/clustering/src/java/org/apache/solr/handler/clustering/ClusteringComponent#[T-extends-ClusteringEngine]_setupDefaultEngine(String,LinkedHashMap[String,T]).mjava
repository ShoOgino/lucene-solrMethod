  /**
   * Setup the default clustering engine.
   * @see "https://issues.apache.org/jira/browse/SOLR-5219"
   */
  private static <T extends ClusteringEngine> void setupDefaultEngine(String type, LinkedHashMap<String,T> map) {
    // If there's already a default algorithm, leave it as is.
    if (map.containsKey(ClusteringEngine.DEFAULT_ENGINE_NAME)) {
      return;
    }
  
    // If there's no default algorithm, and there are any algorithms available, 
    // the first definition becomes the default algorithm.
    if (!map.isEmpty()) {
      Entry<String,T> first = map.entrySet().iterator().next();
      map.put(ClusteringEngine.DEFAULT_ENGINE_NAME, first.getValue());
      log.info("Default engine for " + type + ": " + first.getKey());
    }
  }

