  @BeforeClass
  public static void beforeClass() throws Exception {
    initCore("solrconfig.xml", "schema.xml", "clustering/solr");
    numberOfDocs = 0;
    for (String[] doc : DOCUMENTS) {
      assertNull(h.validateUpdate(adoc("id", Integer.toString(numberOfDocs), "url", doc[0], "title", doc[1], "snippet", doc[2])));
      numberOfDocs++;
    }
    
    // Add a multi-valued snippet
    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();
    multiValuedSnippet.addField("id", numberOfDocs++);
    multiValuedSnippet.addField("title", "Title");
    multiValuedSnippet.addField("url", "URL");
    multiValuedSnippet.addField("snippet", "First value of multi field. Some more text. And still more.");
    multiValuedSnippet.addField("snippet", "Second value of multi field. Some more text. And still more.");
    multiValuedSnippet.addField("snippet", "Third value of multi field. Some more text. And still more.");
    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));

    assertNull(h.validateUpdate(commit()));
  }

