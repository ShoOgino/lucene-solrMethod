  @BeforeClass
  public static void beforeClass() throws Exception {
    initCore("solrconfig.xml", "schema.xml", "clustering/solr");
    numberOfDocs = 0;
    for (String[] doc : DOCUMENTS) {
      assertNull(h.validateUpdate(adoc("id", Integer.toString(numberOfDocs), "url", doc[0], "title", doc[1], "snippet", doc[2])));
      numberOfDocs++;
    }
    
    // Add a multi-valued snippet
    final SolrInputDocument multiValuedSnippet = new SolrInputDocument();
    multiValuedSnippet.addField("id", numberOfDocs++);
    multiValuedSnippet.addField("title", "Title");
    multiValuedSnippet.addField("url", "URL");
    multiValuedSnippet.addField("snippet", "First value of multi field. Some more text. And still more.");
    multiValuedSnippet.addField("snippet", "Second value of multi field. Some more text. And still more.");
    multiValuedSnippet.addField("snippet", "Third value of multi field. Some more text. And still more.");
    assertNull(h.validateUpdate(adoc(multiValuedSnippet)));

    // Add a document with multi-field title and snippet
    final SolrInputDocument multiFieldDoc = new SolrInputDocument();
    multiFieldDoc.addField("id", numberOfDocs++);
    multiFieldDoc.addField("title", "Title field");
    multiFieldDoc.addField("heading", "Heading field");
    multiFieldDoc.addField("url", "URL");
    multiFieldDoc.addField("snippet", "Snippet field: this is the contents of the snippet field.");
    multiFieldDoc.addField("body", "Body field: this is the contents of the body field that will get clustered together with snippet.");
    assertNull(h.validateUpdate(adoc(multiFieldDoc)));
    
    assertNull(h.validateUpdate(commit()));
  }

