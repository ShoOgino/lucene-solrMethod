  @Test
  public void testInjected() throws Exception{
    MiniSolrCloudCluster cluster = new SolrCloudTestCase.Builder(1, createTempDir())
        .addConfig("config", TEST_PATH().resolve("collection1").resolve("conf"))
        .withSolrXml(getFile("solr/solr.xml").toPath())
        .build();
    CollectionAdminRequest.setClusterProperty(ZkStateReader.SAMPLE_PERCENTAGE, "100.0")
        .process(cluster.getSolrClient());
    try {
      TimeOut timeOut = new TimeOut(2, TimeUnit.MINUTES, TimeSource.NANO_TIME);
      timeOut.waitFor("Waiting for GlobalTracer is registered", () -> GlobalTracer.getTracer() instanceof io.jaegertracing.internal.JaegerTracer);
    } finally {
      cluster.shutdown();
    }

  }

