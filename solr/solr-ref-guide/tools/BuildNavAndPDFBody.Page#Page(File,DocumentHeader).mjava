    public Page(File file, DocumentHeader header) {
      this.file = file;
      this.title = header.getDocumentTitle().getMain();
      
      // TODO: do error checking if attribute metadata we care about is missing
      Map<String,Object> attrs = header.getAttributes();
      this.shortname = (String) attrs.get("page-shortname");
      this.permalink = (String) attrs.get("page-permalink");

      // TODO: SOLR-11531: we should eliminate these attributes and not depend on them in jekyll, ...
      // ...but for now at least be sure they are consistent with the filename
      if (! file.getName().equals(shortname + ".adoc") ) {
        throw new RuntimeException(file + " has a mismatched shortname: " + shortname);
      }
      if (! permalink.equals(shortname + ".html") ) {
        throw new RuntimeException(file + " has a mismatched permalink: " + permalink);
      }

      
      if (attrs.containsKey("page-children")) {
        String kidsString = ((String) attrs.get("page-children")).trim();
        this.kidShortnames = Collections.<String>unmodifiableList
          (Arrays.asList(kidsString.split(",\\s+")));
        this.mutableKids = new ArrayList<Page>(kidShortnames.size());
      } else {
        this.kidShortnames = Collections.<String>emptyList();
        this.mutableKids = Collections.<Page>emptyList();
      }
      this.kids = Collections.<Page>unmodifiableList(mutableKids);
    }

