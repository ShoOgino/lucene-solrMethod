  /**
   * Search an index with facets.
   * 
   * @param indexDir
   *            Directory of the search index.
   * @param taxoDir
   *            Directory of the taxonomy index.
   * @throws Exception
   *             on error (no detailed exception handling here for sample
   *             simplicity
   * @return facet results
   */
  public static List<FacetResult> searchWithFacets(Directory indexDir,
      Directory taxoDir, FacetIndexingParams iParams) throws Exception {
    
    // prepare index reader and taxonomy.
    IndexReader indexReader = IndexReader.open(indexDir);
    TaxonomyReader taxo = new DirectoryTaxonomyReader(taxoDir);
    
    // Get results
    List<FacetResult> results = searchWithFacets(indexReader, taxo, iParams);
    
    // we're done, close the index reader and the taxonomy.
    indexReader.close();
    taxo.close();
    return results;
  }

