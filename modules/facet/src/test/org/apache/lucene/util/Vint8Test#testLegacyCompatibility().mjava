  /**
   * Tests algorithm.
   */
  @Test
  public void testLegacyCompatibility() throws IOException {
    /* To generate the encoded test values:
    byte[] byteArray = new byte[256];
    int position = 0, expectedSize = 0;
    for (int j = 0; j < testValues.length; j++) {
      position += Vint8.encode(testValues[j], byteArray, position);
      expectedSize += bytesNeededTestValues[j];
    }
    assertEquals(expectedSize, position);
    Vint8.Position pos = new Vint8.Position();
    for (int j = 0; j < expectedSize; j++) {
      System.out.print(byteArray[j] + ", ");
    }
    System.out.flush();
    pos.pos = 0;
    */
    Vint8.Position pos = new Vint8.Position();
    for (int j = 0; j < testValues.length; j++) {
      assertEquals(testValues[j], Vint8.decode(encodedTestValues, pos));
    }
  }

