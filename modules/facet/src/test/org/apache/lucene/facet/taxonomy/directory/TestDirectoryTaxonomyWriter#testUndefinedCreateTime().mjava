  @Test
  public void testUndefinedCreateTime() throws Exception {
    // tests that if the taxonomy index doesn't have the INDEX_CREATE_TIME
    // property (supports pre-3.6 indexes), all still works.
    Directory dir = newDirectory();
    
    // create an empty index first, so that DirTaxoWriter initializes createTime to null.
    new IndexWriter(dir, new IndexWriterConfig(TEST_VERSION_CURRENT, null)).close();
    
    DirectoryTaxonomyWriter taxoWriter = new DirectoryTaxonomyWriter(dir, OpenMode.CREATE_OR_APPEND, new NoOpCache());
    // we cannot commit null keys/values, this ensures that if DirTW.createTime is null, we can still commit.
    taxoWriter.close();
    
    DirectoryTaxonomyReader taxoReader = new DirectoryTaxonomyReader(dir);
    taxoReader.refresh();
    taxoReader.close();
    
    dir.close();
  }

