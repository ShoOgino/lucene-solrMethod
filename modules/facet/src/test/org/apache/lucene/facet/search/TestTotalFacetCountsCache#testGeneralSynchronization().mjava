  /**
   * Run many instances of {@link MultiCLSearcher} in parallel, results should
   * be sane. Each instance has a random delay for reading bytes, to ensure
   * that threads finish in different order than started.
   */
  @Test
  public void testGeneralSynchronization() throws Exception {
    int[] numThreads = new int[] { 2, 3, 5, 8 };
    int[] sleepMillis = new int[] { -1, 1, 20, 33 };
    int[] cacheSize = new int[] { 0,1,2,3,5 };
    for (int size : cacheSize) {
      for (int sleep : sleepMillis) {
        for (int nThreads : numThreads) {
          doTestGeneralSynchronization(nThreads, sleep, size);
        }
      }
    }
  }

