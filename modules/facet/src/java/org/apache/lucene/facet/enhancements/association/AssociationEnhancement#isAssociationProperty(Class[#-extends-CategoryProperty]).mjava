  /**
   * For a given class which extends a CategoryProperty, answers whether it is
   * an instance of AssociationProperty (AP) or not. <br>
   * This method is a cheaper replacement for a call to
   * <code>instanceof</code>. It has two HashSets - one for classes which are
   * an extension to AP and one for the classes which are not. Whenever a
   * property class is introduced:
   * <ul>
   * <li>if it is known as a property class extending AP (contained in the
   * validHashSet)- returns true</li>
   * <li>if it is known as a property class NOT extending AP - returns false</li>
   * <li>
   * If it was not matched against both sets, it calls 'instanceof' to find
   * out if it extends AP, puts it in the matching Set and returning true or
   * false accordingly</li>
   *</ul>
   * 
   * NOTE: 'instanceof' is only called once per a Class (not instance) of a
   * property. And as there are few properties (currently 4 concrete
   * implementations) the two sets would be rather small
   */
  public static boolean isAssociationProperty(Class<? extends CategoryProperty> clazz) {
    if (ASSOCIATION_PROPERTY_CLASSES.contains(clazz)) {
      return true;
    }
    
    if (NON_ASSOCIATION_PROPERTY_CLASSES.contains(clazz)) {
      return false;
    }
    
    if (AssociationProperty.class.isAssignableFrom(clazz)) {
      ASSOCIATION_PROPERTY_CLASSES.add(clazz);
      return true;
    }
    
    NON_ASSOCIATION_PROPERTY_CLASSES.add(clazz);
    return false;
  }

