  /**
   * Set up a new index in RAM with three test phrases and the supplied Analyzer.
   *
   * @param analyzer the analyzer to use
   * @return an indexSearcher on the test index.
   * @throws Exception if an error occurs with index writer or searcher
   */
  public IndexSearcher setUpSearcher(Analyzer analyzer) throws Exception {
    Directory dir = new RAMDirectory();
    IndexWriter writer = new IndexWriter(dir, new IndexWriterConfig(TEST_VERSION_CURRENT, analyzer));

    Document doc;
    doc = new Document();
    doc.add(new Field("content", TextField.TYPE_STORED, "please divide this sentence into shingles"));
    writer.addDocument(doc);

    doc = new Document();
    doc.add(new Field("content", TextField.TYPE_STORED, "just another test sentence"));
    writer.addDocument(doc);

    doc = new Document();
    doc.add(new Field("content", TextField.TYPE_STORED, "a sentence which contains no test"));
    writer.addDocument(doc);

    writer.close();

    return new IndexSearcher(dir, true);
  }

