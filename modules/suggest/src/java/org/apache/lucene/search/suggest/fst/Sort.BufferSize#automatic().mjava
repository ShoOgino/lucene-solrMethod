    /** 
     * Approximately half of the currently available free heap, but no less
     * than {@link #MIN_BUFFER_SIZE_MB}.
     */
    public static BufferSize automatic() {
      long freeHeap = Runtime.getRuntime().freeMemory();
      return new BufferSize(Math.min(MIN_BUFFER_SIZE_MB * MB, freeHeap / 2));
    }

