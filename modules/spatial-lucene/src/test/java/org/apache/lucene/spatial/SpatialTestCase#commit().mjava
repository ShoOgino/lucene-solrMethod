  protected void commit() throws IOException {
    indexWriter.commit();
    if (indexReader == null) {
      indexReader = DirectoryReader.open(directory);
    } else {
      indexReader = DirectoryReader.openIfChanged(indexReader);
    }
    indexSearcher = newSearcher(indexReader);
  }

