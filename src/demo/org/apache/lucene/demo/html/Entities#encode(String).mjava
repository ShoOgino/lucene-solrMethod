  public static final String encode(String s) {
    int length = s.length();
    StringBuffer buffer = new StringBuffer(length * 2);
    for (int i = 0; i < length; i++) {
      int j = s.charAt(i);
      if (j < 0x100 && encoder[j] != null) {
	buffer.append(encoder[j]);		  // have a named encoding
	buffer.append(';');
      } else if (j < 0x80) {
	buffer.append((char) j);			  // use ASCII value
      } else {
	buffer.append("&#");			  // use numeric encoding
	buffer.append(j).append(';');
      }
    }
    return buffer.toString();
  }

