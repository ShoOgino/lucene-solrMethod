  /** Tests that two queries have an expected order of documents,
   * and that the two queries have the same score values.
   */
  public static void checkHitsQuery(
        Query query,
        Hits hits1,
        Hits hits2,
        int[] results,
        TestCase testCase)
          throws IOException {

    checkDocIds("hits1", results, hits1, testCase);
    checkDocIds("hits2", results, hits2, testCase);
    
    final float scoreTolerance = 1.0e-7f;
    for (int i = 0; i < results.length; i++) {
      if (Math.abs(hits1.score(i) -  hits2.score(i)) > scoreTolerance) {
        TestCase.fail("Hit " + i + ", doc nrs " + hits1.id(i) + " and " + hits2.id(i)
                      + "\nunequal scores: " + hits1.score(i)
                      + "\n           and: " + hits2.score(i)
                      + "\nfor query:" + query.toString());
      }
    }
  }

