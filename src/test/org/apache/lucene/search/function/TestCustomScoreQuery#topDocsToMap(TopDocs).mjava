  // since custom scoring modifies the order of docs, map results 
  // by doc ids so that we can later compare/verify them 
  private HashMap<Integer,Float> topDocsToMap(TopDocs td) {
    HashMap<Integer,Float> h = new HashMap<Integer,Float>(); 
    for (int i=0; i<td.totalHits; i++) {
      h.put(Integer.valueOf(td.scoreDocs[i].doc), Float.valueOf(td.scoreDocs[i].score));
    }
    return h;
  }

