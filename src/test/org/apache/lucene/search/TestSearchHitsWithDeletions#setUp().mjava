  public void setUp() throws Exception {
    super.setUp();
    // Create an index writer.
    directory = new RAMDirectory();
    IndexWriter writer = new IndexWriter(directory, new WhitespaceAnalyzer(), true, IndexWriter.MaxFieldLength.LIMITED);
    for (int i=0; i<N; i++) {
      writer.addDocument(createDocument(i));
    }
    writer.optimize();
    writer.close();
  }

