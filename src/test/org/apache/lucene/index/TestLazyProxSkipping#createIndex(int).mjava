    private void createIndex(int numHits) throws IOException {
        int numDocs = 500;
        
        Directory directory = new RAMDirectory();
        IndexWriter writer = new IndexWriter(directory, new WhitespaceAnalyzer(), true);
        
        for (int i = 0; i < numDocs; i++) {
            Document doc = new Document();
            String content;
            if (i % (numDocs / numHits) == 0) {
                // add a document that matches the query "term1 term2"
                content = this.term1 + " " + this.term2;
            } else if (i % 15 == 0) {
                // add a document that only contains term1
                content = this.term1 + " " + this.term1;
            } else {
                // add a document that contains term2 but not term 1
                content = this.term3 + " " + this.term2;
            }

            doc.add(new Field(this.field, content, Field.Store.YES, Field.Index.TOKENIZED));
            writer.addDocument(doc);
        }
        
        // make sure the index has only a single segment
        writer.optimize();
        writer.close();
        
        // the index is a single segment, thus IndexReader.open() returns an instance of SegmentReader
        SegmentReader reader = (SegmentReader) IndexReader.open(directory);

        // we decorate the proxStream with a wrapper class that allows to count the number of calls of seek()
        reader.proxStream = new SeeksCountingStream(reader.proxStream);
        
        this.searcher = new IndexSearcher(reader);        
    }

