  protected void setUp() throws Exception {
    dir = new MockRAMDirectory();
    //		dir=FSDirectory.getDirectory("/indexes/testDeletionPolicy");
    //		String[] files = dir.list();
    //		for (String string : files) {
    //			dir.deleteFile(string);
    //		}
		
    //Build index, of records 1 to 100, committing after each batch of 10
    IndexDeletionPolicy sdp=new KeepAllDeletionPolicy();
    IndexWriter w=new IndexWriter(dir,new WhitespaceAnalyzer(),sdp,MaxFieldLength.UNLIMITED);
    int firstRecordIdInThisTransaction=1;
    for(int currentRecordId=1;currentRecordId<=100;currentRecordId++) {
      Document doc=new Document();
      doc.add(new Field(FIELD_RECORD_ID,""+currentRecordId,Field.Store.YES,Field.Index.ANALYZED));
      w.addDocument(doc);
			
      if (currentRecordId%10 == 0) {
        String userData="records 1-"+currentRecordId;
        w.commit(userData);
      }
    }

    w.close();
  }

