  public static void checkNorms(IndexReader reader) throws IOException {
        // test omit norms
    for (int i=0; i<DocHelper.fields.length; i++) {
      Field f = DocHelper.fields[i];
      if (f.isIndexed()) {
        assertEquals(reader.hasNorms(f.name()), !f.getOmitNorms());
        assertEquals(reader.hasNorms(f.name()), !DocHelper.noNorms.containsKey(f.name()));
        if (!reader.hasNorms(f.name())) {
          // test for fake norms of 1.0
          byte [] norms = reader.norms(f.name());
          assertEquals(norms.length,reader.maxDoc());
          for (int j=0; j<reader.maxDoc(); j++) {
            assertEquals(norms[j], DefaultSimilarity.encodeNorm(1.0f));
          }
          norms = new byte[reader.maxDoc()];
          reader.norms(f.name(),norms, 0);
          for (int j=0; j<reader.maxDoc(); j++) {
            assertEquals(norms[j], DefaultSimilarity.encodeNorm(1.0f));
          }
        }
      }
    }
  }

