  public void testMixedOldApiConsumer() throws Exception {
    // WhitespaceTokenizer is using incrementToken() API:
    TokenStream stream = new WhitespaceTokenizer(new StringReader("foo bar moo maeh"));
    
    Token foo = new Token();
    foo = stream.next(foo);
    Token bar = stream.next();
    assertEquals("foo", foo.term());
    assertEquals("bar", bar.term());
    
    Token moo = stream.next(foo);
    assertEquals("moo", moo.term());
    assertEquals("private 'bar' term should still be valid", "bar", bar.term());
    
    // and now we also use incrementToken()... (very bad, but should work)
    TermAttribute termAtt = stream.getAttribute(TermAttribute.class);
    assertTrue(stream.incrementToken());
    assertEquals("maeh", termAtt.term());    
    assertEquals("private 'bar' term should still be valid", "bar", bar.term());    
  }

