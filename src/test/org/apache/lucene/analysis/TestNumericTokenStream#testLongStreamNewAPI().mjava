  public void testLongStreamNewAPI() throws Exception {
    final NumericTokenStream stream=new NumericTokenStream(precisionStep).setLongValue(lvalue);
    stream.setUseNewAPI(true);
    // use getAttribute to test if attributes really exist, if not an IAE will be throwed
    final TermAttribute termAtt = (TermAttribute) stream.getAttribute(TermAttribute.class);
    for (int shift=0; shift<64; shift+=precisionStep) {
      assertTrue("New token is available", stream.incrementToken());
      assertEquals("Term is correctly encoded", NumericUtils.longToPrefixCoded(lvalue, shift), termAtt.term());
    }
    assertFalse("No more tokens available", stream.incrementToken());
  }

