    // Verify: setting custom lock factory class (as system property) works:
    // Verify: FSDirectory does basic locking correctly
    public void testLockClassProperty() throws IOException {
        String indexDirName = "index.TestLockFactory3";

        System.setProperty("org.apache.lucene.store.FSDirectoryLockFactoryClass",
                           "org.apache.lucene.store.NoLockFactory");

        IndexWriter writer = new IndexWriter(indexDirName, new WhitespaceAnalyzer(), true);

        assertTrue("FSDirectory did not use correct LockFactory: got " + writer.getDirectory().getLockFactory(),
                   NoLockFactory.class.isInstance(writer.getDirectory().getLockFactory()));

        // Put back to the correct default for subsequent tests:
        // System.clearProperty("org.apache.lucene.store.FSDirectoryLockFactoryClass");
        System.setProperty("org.apache.lucene.store.FSDirectoryLockFactoryClass", "");

        writer.close();
        // Cleanup
        rmDir(indexDirName);
    }

