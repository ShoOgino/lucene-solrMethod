  public void testStopAndGo() throws Exception 
  {  
    Set<String> words = new HashSet<String>();
    words.add( "aaa" );
    words.add( "bbb" );
    
    String input = "aaa BBB ccc ddd EEE";
    Map<String,String> args = new HashMap<String, String>();

    
    // Test Stopwords
    KeepWordFilterFactory factory = new KeepWordFilterFactory();
    args.put( "ignoreCase", "true" );
    factory.init( args );
    factory.inform( solrConfig.getResourceLoader() );
    factory.setWords( words );
    assertTrue(factory.isIgnoreCase());
    TokenStream stream = factory.create(new WhitespaceTokenizer(new StringReader(input)));
    assertTokenStreamContents(stream, new String[] { "aaa", "BBB" });
    
    // Test Stopwords (ignoreCase via the setter instead)
    factory = new KeepWordFilterFactory();
    args = new HashMap<String, String>();
    factory.init( args );
    factory.inform( solrConfig.getResourceLoader() );
    factory.setIgnoreCase(true);
    factory.setWords( words );
    assertTrue(factory.isIgnoreCase());
    stream = factory.create(new WhitespaceTokenizer(new StringReader(input)));
    assertTokenStreamContents(stream, new String[] { "aaa", "BBB" });
    
    // Now force case
    args = new HashMap<String, String>();
    args.put( "ignoreCase", "false" );
    factory.init( args );
    factory.inform( solrConfig.getResourceLoader() );
    assertFalse(factory.isIgnoreCase());
    stream = factory.create(new WhitespaceTokenizer(new StringReader(input)));
    assertTokenStreamContents(stream, new String[] { "aaa" });
  }

