  public void doTestIteratorEqual(DocIdSet a, DocIdSet b) throws IOException {
    DocIdSetIterator ia = a.iterator();
    DocIdSetIterator ib = b.iterator();

    // test for next() equivalence
    for(;;) {
      boolean nexta = ia.next();
      boolean nextb = ib.next();
      assertEquals(nexta, nextb);
      if (!nexta) break;
      assertEquals(ia.doc(), ib.doc());

    }

    for (int i=0; i<10; i++) {
      // test random skipTo() and next()
      ia = a.iterator();
      ib = b.iterator();
      int doc = -1;
      for (;;) {
        boolean nexta,nextb;
        if (rand.nextBoolean()) {
          nexta = ia.next();
          nextb = ib.next();
        } else {
          int target = doc + rand.nextInt(10) + 1;  // keep in mind future edge cases like probing (increase if necessary)
          nexta = ia.skipTo(target);
          nextb = ib.skipTo(target);
        }

        assertEquals(nexta, nextb);        
        if (!nexta) break;
        doc = ia.doc();
        assertEquals(doc, ib.doc());
      }
    }
  }

