  /**
   * Handlers must be initalized before calling this function.  As soon as this is
   * called, the handler can immediatly accept requests.
   * 
   * This call is thread safe.
   * 
   * @return the previous handler at the given path or null
   */
  public SolrRequestHandler register( String handlerName, SolrRequestHandler handler ) {
    if( handler == null ) {
      return handlers.remove( handlerName );
    }
    SolrRequestHandler old = handlers.put(handlerName, handler);
    if (handlerName != null && handlerName != "") {
      if (handler instanceof SolrInfoMBean) {
        SolrInfoRegistry.getRegistry().put(handlerName, (SolrInfoMBean)handler);
      }
    }
    return old;
  }

