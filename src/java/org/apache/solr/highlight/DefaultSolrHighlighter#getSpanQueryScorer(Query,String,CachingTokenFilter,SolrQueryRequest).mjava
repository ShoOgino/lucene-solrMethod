  /**
   * Return a SpanScorer suitable for this Query and field.
   * @param query The current query
   * @param tokenStream document text CachingTokenStream
   * @param fieldName The name of the field
   * @param request The SolrQueryRequest
   * @throws IOException 
   */
  private SpanScorer getSpanQueryScorer(Query query, String fieldName, CachingTokenFilter tokenStream, SolrQueryRequest request) throws IOException {
    boolean reqFieldMatch = request.getParams().getFieldBool(fieldName, HighlightParams.FIELD_MATCH, false);
    Boolean highlightMultiTerm = request.getParams().getBool(HighlightParams.HIGHLIGHT_MULTI_TERM);
    if(highlightMultiTerm == null) {
      highlightMultiTerm = false;
    }

    if (reqFieldMatch) {
      return new SpanScorer(query, fieldName, tokenStream, highlightMultiTerm);
    }
    else {
      return new SpanScorer(query, null, tokenStream, highlightMultiTerm);
    }
  }

