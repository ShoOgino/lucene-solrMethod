  /** Recursively wrap an IndexReader in SolrIndexReader instances.
   * @param in  the reader to wrap
   * @param parent the parent, if any (null if none)
   * @param base the docid offset in the parent (0 if top level)
   */
  public SolrIndexReader(IndexReader in, SolrIndexReader parent, int base) {
    super(in);
    assert(!(in instanceof SolrIndexReader));
    this.parent = parent;
    this.base = base;
    IndexReader subs[] = in.getSequentialSubReaders();
    subReaders = subs == null ? null : new SolrIndexReader[subs.length];
    if (subs != null) {
      int b=0;
      for (int i=0; i<subReaders.length; i++) {
        subReaders[i] = new SolrIndexReader(subs[i], this, b);
        b += subReaders[i].maxDoc();
      }
    }
  }

