  /**Register a listener for postcommit/optimize
   * @param snapshoot do a snapshoot
   * @param getCommit get a commitpoint also
   * @return an instance of the eventlistener
   */

  private SolrEventListener getEventListener(final boolean snapshoot, final boolean getCommit) {
    return new SolrEventListener() {
      public void init(NamedList args) {/*no op*/ }

      public void postCommit() {
        if(getCommit){
          indexCommitPoint = core.getDeletionPolicy().getLatestCommit();
        }
        if (snapshoot) {
          try {
            SnapShooter snapShooter = new SnapShooter(core);
            snapShooter.createSnapAsync(core.getDeletionPolicy().getLatestCommit().getFileNames());
          } catch (Exception e) {
            LOG.error("Exception while snapshooting", e);
          }
        }
      }

      public void newSearcher(SolrIndexSearcher newSearcher, SolrIndexSearcher currentSearcher) { /*no op*/}
    };
  }

