  @Override
  public final Token next(Token in) throws IOException {
    if( save != null ) {
      Token temp = save;
      save = null;
      return temp;
    }
    
    Token t = input.next(in);
    if( t != null ) {
      String value = new String(t.termBuffer(), 0, t.termLength());
      try {
        value = encoder.encode(value).toString();
      } 
      catch (Exception ignored) {} // just use the direct text
      //Token m = new Token(value, t.startOffset(), t.endOffset(), name );
      if( inject ) {
        save = (Token) t.clone();
        save.setPositionIncrement(0);
        save.setTermBuffer(value.toCharArray(), 0, value.length());
      } else {
        t.setTermBuffer(value.toCharArray(), 0, value.length());
      }
    }
    return t;
  }

