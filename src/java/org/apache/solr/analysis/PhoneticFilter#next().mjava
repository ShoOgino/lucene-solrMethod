  @Override
  public final Token next() throws IOException {
    if( save != null ) {
      Token temp = save;
      save = null;
      return temp;
    }
    
    Token t = input.next();
    if( t != null ) {
      String value = t.termText();
      try {
        value = encoder.encode(t.termText()).toString();
      } 
      catch (Exception ignored) {} // just use the direct text

      Token m = new Token(value, t.startOffset(), t.endOffset(), name );
      if( inject ) {
        m.setPositionIncrement(0);
        save = m;
      }
      else {
        // replace the token rather then add it too the stream
        return m;
      }
    }
    return t;
  }

