  /**
   * @param dataDirectory path for index data, will not be cleaned up
   * @param confFile solrconfig filename
   * @param schemaFile schema filename
   */
  public TestHarness(String dataDirectory,
                     String confFile,
                     String schemaFile) {
    try {
      // set some system properties for use by tests
      System.setProperty("solr.test.sys.prop1", "propone");
      System.setProperty("solr.test.sys.prop2", "proptwo");

      SolrConfig.initConfig(confFile);
      core = new SolrCore(dataDirectory, new IndexSchema(schemaFile));
      builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
      
      updater = new XmlUpdateRequestHandler();
      updater.init( null );
    } catch (Exception e) {
      throw new RuntimeException(e);
    }
  }

