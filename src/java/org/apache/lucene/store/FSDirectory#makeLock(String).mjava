  /**
   * Constructs a {@link Lock} with the specified name.
   * If JDK 1.1 is used the lock file is not really made.
   * If system property <I>disableLocks</I> has the value of 'true'
   * the lock will not be created.  Assigning this property any other value
   * will <B>not</B> prevent creation of locks.
   * <BR>
   * This is useful for using Lucene on read-only medium, such as CD-ROM.
   *
   * @param name the name of the lock file
   * @return an instance of <code>Lock</code> holding the lock
   */
  public final Lock makeLock(String name) {
    final File lockFile = new File(directory, name);
    return new Lock() {
	public boolean obtain() throws IOException {
          if (Constants.JAVA_1_1)
	      return true;    // locks disabled in jdk 1.1
	  if (DISABLE_LOCKS)
	      return true;
          return lockFile.createNewFile();
	}
	public void release() {
          if (Constants.JAVA_1_1)
	      return;         // locks disabled in jdk 1.1
	  lockFile.delete();
	}
	public String toString() {
	  return "Lock@" + lockFile;
	}
      };
  }

