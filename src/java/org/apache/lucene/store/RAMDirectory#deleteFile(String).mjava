  /** Removes an existing file in the directory.
   * @throws IOException if the file does not exist
   */
  @Override
  public synchronized void deleteFile(String name) throws IOException {
    ensureOpen();
    RAMFile file = fileMap.get(name);
    if (file!=null) {
        fileMap.remove(name);
        file.directory = null;
        sizeInBytes.addAndGet(-file.sizeInBytes);
    } else
      throw new FileNotFoundException(name);
  }

