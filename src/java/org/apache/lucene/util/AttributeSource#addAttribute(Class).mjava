  /**
   * The caller must pass in a Class&lt;? extends Attribute&gt; value.
   * This method first checks if an instance of that class is 
   * already in this AttributeSource and returns it. Otherwise a
   * new instance is created, added to this AttributeSource and returned. 
   */
  public Attribute addAttribute(Class attClass) {
    Attribute att = (Attribute) attributes.get(attClass);
    if (att == null) {
      try {
        att = (Attribute) attClass.newInstance();
      } catch (InstantiationException e) {
        throw new IllegalArgumentException("Could not instantiate class " + attClass);
      } catch (IllegalAccessException e) {
        throw new IllegalArgumentException("Could not instantiate class " + attClass);      
      }
      
      attributes.put(attClass, att);
    }
    return att;
  }

