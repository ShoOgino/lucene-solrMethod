  /**
   * The caller must pass in a Class&lt;? extends Attribute&gt; value.
   * This method first checks if an instance of that class is 
   * already in this AttributeSource and returns it. Otherwise a
   * new instance is created, added to this AttributeSource and returned. 
   * <p>Signature for Java 1.5: <code>public &lt;T extends Attribute&gt; T addAttribute(Class&lt;T&gt;)</code>
   */
  public Attribute addAttribute(Class attClass) {
    final Attribute att = (Attribute) attributes.get(attClass);
    if (att == null) {
      final AttributeImpl attImpl = this.factory.createAttributeInstance(attClass);
      addAttributeImpl(attImpl);
      return attImpl;
    } else {
      return att;
    }
  }

