  private int nextChar() throws IOException {
    nextCharCounter++;
    if (buffer != null && !buffer.isEmpty()) {
      return ((Character)buffer.removeFirst()).charValue();
    }
    return input.read();
  }

