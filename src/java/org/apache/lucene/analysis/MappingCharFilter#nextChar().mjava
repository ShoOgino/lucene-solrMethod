  private int nextChar() throws IOException {
    nextCharCounter++;
    if (buffer != null && !buffer.isEmpty()) {
      return buffer.removeFirst().charValue();
    }
    return input.read();
  }

