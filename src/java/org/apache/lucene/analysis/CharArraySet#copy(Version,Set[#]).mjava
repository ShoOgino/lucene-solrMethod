  /**
   * Returns a copy of the given set as a {@link CharArraySet}. If the given set
   * is a {@link CharArraySet} the ignoreCase property will be preserved.
   * 
   * @param matchVersion
   *          compatibility match version see <a href="#version">Version
   *          note</a> above for details.
   * @param set
   *          a set to copy
   * @return a copy of the given set as a {@link CharArraySet}. If the given set
   *         is a {@link CharArraySet} the ignoreCase property will be
   *         preserved.
   */
  public static CharArraySet copy(Version matchVersion, Set<?> set) {
    if (set == null)
      throw new NullPointerException("Given set is null");
    if(set == EMPTY_SET)
      return EMPTY_SET;
    final boolean ignoreCase = set instanceof CharArraySet ? ((CharArraySet) set).ignoreCase
        : false;
    return new CharArraySet(matchVersion, set, ignoreCase);
  }

