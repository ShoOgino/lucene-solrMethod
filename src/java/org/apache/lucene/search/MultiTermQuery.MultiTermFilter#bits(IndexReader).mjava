    public BitSet bits(IndexReader reader) throws IOException {
      final BitSet bitSet = new BitSet(reader.maxDoc());
      new TermGenerator() {
        public void handleDoc(int doc) {
          bitSet.set(doc);
        }
      }.generate(reader);
      return bitSet;
    }

