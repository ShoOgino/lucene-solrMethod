  /** Scores and collects all matching documents.
   * @param collector The collector to which all matching documents are passed through.
   * <br>When this method is used the {@link #explain(int)} method should not be used.
   */
  public void score(Collector collector) throws IOException {
    if (allowDocsOutOfOrder && requiredScorers.size() == 0
            && prohibitedScorers.size() < 32) {
      new BooleanScorer(getSimilarity(), minNrShouldMatch, optionalScorers,
          prohibitedScorers).score(collector);
    } else {
      if (countingSumScorer == null) {
        initCountingSumScorer();
      }
      collector.setScorer(this);
      int doc;
      while ((doc = countingSumScorer.nextDoc()) != NO_MORE_DOCS) {
        collector.collect(doc);
      }
    }
  }

