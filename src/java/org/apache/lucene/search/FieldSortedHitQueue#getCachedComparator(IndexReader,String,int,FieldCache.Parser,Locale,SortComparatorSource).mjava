  static ScoreDocComparator getCachedComparator (IndexReader reader, String field, int type, FieldCache.Parser parser, Locale locale, SortComparatorSource factory)
  throws IOException {
    if (type == SortField.DOC) return ScoreDocComparator.INDEXORDER;
    if (type == SortField.SCORE) return ScoreDocComparator.RELEVANCE;
    FieldCacheImpl.Entry entry = (factory != null)
      ? new FieldCacheImpl.Entry (field, factory)
      : ( (parser != null)
		? new FieldCacheImpl.Entry (field, type, parser)
		: new FieldCacheImpl.Entry (field, type, locale)
	  );
    return (ScoreDocComparator)Comparators.get(reader, entry);
  }

