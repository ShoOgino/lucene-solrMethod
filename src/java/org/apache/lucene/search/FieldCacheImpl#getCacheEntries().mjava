  public CacheEntry[] getCacheEntries() {
    List result = new ArrayList(17);
    Iterator outerKeys = caches.keySet().iterator();
    while (outerKeys.hasNext()) {
      Class cacheType = (Class)outerKeys.next();
      Cache cache = (Cache)caches.get(cacheType);
      Iterator innerKeys = cache.readerCache.keySet().iterator();
      while (innerKeys.hasNext()) {
        // we've now materialized a hard ref
        Object readerKey = innerKeys.next();
        // innerKeys was backed by WeakHashMap, sanity check
        // that it wasn't GCed before we made hard ref
        if (null != readerKey && cache.readerCache.containsKey(readerKey)) {
          Map innerCache = ((Map)cache.readerCache.get(readerKey));
          Iterator entrySetIterator = innerCache.entrySet().iterator();
          while (entrySetIterator.hasNext()) {
            Map.Entry mapEntry = (Map.Entry) entrySetIterator.next();
            Entry entry = (Entry) mapEntry.getKey();
            result.add(new CacheEntryImpl(readerKey, entry.field,
                                          cacheType, entry.custom,
                                          mapEntry.getValue()));
          }
        }
      }
    }
    return (CacheEntry[]) result.toArray(new CacheEntry[result.size()]);
  }

