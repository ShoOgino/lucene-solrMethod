  TermScorer(TermDocs td, byte[] n, float w) throws IOException {
    termDocs = td;
    norms = n;
    weight = w;

    for (int i = 0; i < SCORE_CACHE_SIZE; i++)
      scoreCache[i] = Similarity.tf(i) * weight;

    pointerMax = termDocs.read(docs, freqs);	  // fill buffers

    if (pointerMax != 0)
      doc = docs[0];
    else {
      termDocs.close();				  // close stream
      doc = Integer.MAX_VALUE;			  // set to sentinel value
    }
  }

