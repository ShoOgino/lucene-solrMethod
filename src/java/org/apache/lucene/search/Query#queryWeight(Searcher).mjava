  /**
   * Expert: Constructs and initializes a {@link QueryWeight} for a top-level
   * query.
   */
  public QueryWeight queryWeight(Searcher searcher) throws IOException {
    Query query = searcher.rewrite(this);
    QueryWeight weight = query.createQueryWeight(searcher);
    float sum = weight.sumOfSquaredWeights();
    float norm = getSimilarity(searcher).queryNorm(sum);
    weight.normalize(norm);
    return weight;
  }

