  protected void doClose() throws IOException {
    IOException ioe = null;
    // close the reader, record exception
    try {
      super.doClose();
    } catch (IOException e) {
      ioe = e;
    }
    // close the directory, record exception
    if (ref.decRef() == 0) {
      try {
        in.directory().close();
      } catch (IOException e) {
        if (ioe == null) ioe = e;
      }
    }
    // throw the first exception
    if (ioe != null) throw ioe;
  }

