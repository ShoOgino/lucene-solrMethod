  /**
   * Returns true iff this segment stores filed norms in a single .nrm file.
   */
  private boolean withNrm () throws IOException {
    if (withNrm == -1) {
      return false;
    } 
    if (withNrm == 1) {
      return true;
    }
    Directory d = dir;
    try {
      if (getUseCompoundFile()) {
        d = new CompoundFileReader(dir, name + ".cfs");
      }
      boolean res = d.fileExists(name + "." + IndexFileNames.NORMS_EXTENSION);
      withNrm = (byte) (res ? 1 : -1); // avoid more file tests like this 
      return res;
    } finally {
      if (d!=dir && d!=null) {
        d.close();
      }
      
    }
  }

