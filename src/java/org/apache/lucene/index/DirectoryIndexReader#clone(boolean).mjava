  public final synchronized IndexReader clone(boolean openReadOnly) throws CorruptIndexException, IOException {

    final SegmentInfos clonedInfos;
    if (segmentInfos != null) {
      clonedInfos = (SegmentInfos) segmentInfos.clone();
    } else {
      clonedInfos = null;
    }
    DirectoryIndexReader newReader = doReopen(clonedInfos, true, openReadOnly);
    
    if (this != newReader) {
      newReader.init(directory, clonedInfos, closeDirectory, openReadOnly);
      newReader.deletionPolicy = deletionPolicy;
    }
    newReader.writer = writer;
    // If we're cloning a non-readOnly reader, move the
    // writeLock (if there is one) to the new reader:
    if (!openReadOnly && writeLock != null) {
      // In near real-time search, reader is always readonly
      assert writer == null;
      newReader.writeLock = writeLock;
      writeLock = null;
      hasChanges = false;
    }
    
    return newReader;
  }

