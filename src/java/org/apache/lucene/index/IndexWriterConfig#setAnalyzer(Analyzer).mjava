  /**
   * Sets the default {@link Analyzer} to be used when indexing documents. The
   * default {@link WhitespaceAnalyzer} is set for convenience (e.g. for test
   * purposes or when the analyzer used does not make a difference) and it's
   * recommended to override the default setting if you care about the tokens
   * that end up in your index.
   * <p>
   * <b>NOTE:</b> the analyzer cannot be null. If <code>null</code> is passed,
   * the analyzer will be set to the default.
   */
  public IndexWriterConfig setAnalyzer(Analyzer analyzer) {
    this.analyzer = analyzer == null ? new WhitespaceAnalyzer(matchVersion) : analyzer;
    return this;
  }

