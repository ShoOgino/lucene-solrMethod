  /** Flushes all changes to an index, closes all associated files, and closes
    the directory that the index is stored in. */
  public synchronized void close() throws IOException {
    flushRamSegments();
    ramDirectory.close();
    writeLock.release();                          // release write lock
    writeLock = null;
    directory.close();
  }

