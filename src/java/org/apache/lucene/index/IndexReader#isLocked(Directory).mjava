  /**
   * Returns <code>true</code> iff the index in the named directory is
   * currently locked.
   * @param directory the directory to check for a lock
   * @throws IOException if there is a problem with accessing the index
   */
    public static boolean isLocked(Directory directory) throws IOException {
      return
        directory.makeLock("IndexWriter.WRITE_LOCK_NAME").isLocked() ||
        directory.makeLock("IndexWriter.COMMIT_LOCK_NAME").isLocked();

    }

