    /** Test whether the text for current Posting p equals
     *  current tokenText. */
    boolean postingEquals(final String tokenString, final char[] tokenText,
                          final int tokenTextLen, final int tokenTextOffset) {

      final char[] text = charPool.buffers[p.textStart >> CHAR_BLOCK_SHIFT];
      assert text != null;
      int pos = p.textStart & CHAR_BLOCK_MASK;

      if (tokenText == null) {
        // Compare to String
        for(int i=0;i<tokenTextLen;i++)
          if (tokenString.charAt(i) != text[pos++])
            return false;
        return text[pos] == 0xffff;
      } else {
        int tokenPos = tokenTextOffset;
        final int stopAt = tokenTextLen+tokenPos;
        for(;tokenPos<stopAt;pos++,tokenPos++)
          if (tokenText[tokenPos] != text[pos])
            return false;
        return 0xffff == text[pos];
      }
    }

