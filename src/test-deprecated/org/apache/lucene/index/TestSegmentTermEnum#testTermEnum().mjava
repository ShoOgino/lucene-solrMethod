  public void testTermEnum()
  {
    IndexWriter writer = null;

    try {
      writer  = new IndexWriter(dir, new WhitespaceAnalyzer(), true);

      // add 100 documents with term : aaa
      // add 100 documents with terms: aaa bbb
      // Therefore, term 'aaa' has document frequency of 200 and term 'bbb' 100
      for (int i = 0; i < 100; i++) {
        addDoc(writer, "aaa");
        addDoc(writer, "aaa bbb");
      }

      writer.close();
    }
    catch (IOException e) {
      e.printStackTrace();
    }

    try {
      // verify document frequency of terms in an unoptimized index
      verifyDocFreq();

      // merge segments by optimizing the index
      writer = new IndexWriter(dir, new WhitespaceAnalyzer(), false);
      writer.optimize();
      writer.close();

      // verify document frequency of terms in an optimized index
      verifyDocFreq();
    }
    catch (IOException e2) {
      e2.printStackTrace();
    }
  }

