  /**
   * Returns a DocIdSet that provides the documents which should be permitted or prohibited in search results.
   */
  //@Override
  public DocIdSet getDocIdSet(IndexReader reader) throws IOException {
    if (min.compareTo(max) > 0) {
      // shortcut: if min>max, no docs will match!
      lastNumberOfTerms=0;
      return EMPTY_DOCIDSET;
    } else {
      final OpenBitSet bits = new OpenBitSet(reader.maxDoc());
      final TermDocs termDocs = reader.termDocs();
      try {
        lastNumberOfTerms=splitRange(
          reader,termDocs,bits,
          min,trieVariant.TRIE_CODED_NUMERIC_MIN.equals(min),
          max,trieVariant.TRIE_CODED_NUMERIC_MAX.equals(max)
        );
      } finally {
        termDocs.close();
      }
      return bits;
    }
  }

