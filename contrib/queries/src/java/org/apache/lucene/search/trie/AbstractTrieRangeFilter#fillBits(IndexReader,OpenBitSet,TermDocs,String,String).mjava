  void fillBits(
    final IndexReader reader,
    final OpenBitSet bits, final TermDocs termDocs,
    final String lowerTerm, final String upperTerm
  ) throws IOException {
    final int len=lowerTerm.length();
    assert upperTerm.length()==len;
    
    // find the docs
    final TermEnum enumerator = reader.terms(new Term(field, lowerTerm));
    try {
      do {
        final Term term = enumerator.term();
        if (term!=null && term.field()==field) {
          // break out when upperTerm reached or length of term is different
          final String t=term.text();
          if (len!=t.length() || t.compareTo(upperTerm)>0) break;
          // we have a good term, find the docs
          lastNumberOfTerms++;
          termDocs.seek(enumerator);
          while (termDocs.next()) bits.set(termDocs.doc());
        } else break;
      } while (enumerator.next());
    } finally {
      enumerator.close();
    }
  }

