  /**
   * <p/> Returns an <code>Evaluator</code> instance meant to be used for escaping values in SQL queries. </p> <p/> It
   * escapes the value of the given expression by replacing all occurrences of single-quotes by two single-quotes and
   * similarily for double-quotes </p>
   *
   * @return an <code>Evaluator</code> instance capable of SQL-escaping expressions.
   */
  public static Evaluator getSqlEscapingEvaluator() {
    return new Evaluator() {
      public String evaluate(String expression, Context context) {
        List l = parseParams(expression, context.getVariableResolver());
        if (l.size() != 1) {
          throw new DataImportHandlerException(SEVERE, "'escapeSql' must have at least one parameter ");
        }
        String s = l.get(0).toString();
        return s.replaceAll("'", "''").replaceAll("\"", "\"\"");
      }
    };
  }

