	public NamedList cluster(Query query, DocList docList, SolrParams solrParams) {
		try {
			// Prepare attributes for Carrot2 clustering call
			Map<String, Object> attributes = new HashMap<String, Object>();
			List<Document> documents = getDocuments(docList, core, query, solrParams);
			attributes.put(AttributeNames.DOCUMENTS, documents);
			attributes.put(AttributeNames.QUERY, query.toString());
			
			// Pass extra overriding attributes from the request, if any
			extractCarrotAttributes(solrParams, attributes);

			// Perform clustering and convert to named list
			return clustersToNamedList(controller.process(attributes,
					clusteringAlgorithmClass).getClusters(), solrParams);
		} catch (Exception e) {
			log.error("Carrot2 clustering failed", e);
			throw new RuntimeException(e);
		}
	}

