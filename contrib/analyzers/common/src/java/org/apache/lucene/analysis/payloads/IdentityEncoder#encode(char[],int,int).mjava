  public Payload encode(char[] buffer, int offset, int length) {
    //what's the most efficient way to get a byte [] from a char[] array
    //Do we have to go through String?
    String tmp = new String(buffer, offset, length);
    Payload result = null;//Can we avoid allocating by knowing where using the new API?
    try {
      result = new Payload(tmp.getBytes(charsetName));
    } catch (UnsupportedEncodingException e) {
      //should never hit this, since we get the name from the Charset
    }

    return result;
  }

