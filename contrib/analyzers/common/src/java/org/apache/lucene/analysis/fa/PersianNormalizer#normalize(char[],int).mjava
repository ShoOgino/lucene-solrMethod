  /**
   * Normalize an input buffer of Persian text
   * 
   * @param s input buffer
   * @param len length of input buffer
   * @return length of input buffer after normalization
   */
  public int normalize(char s[], int len) {

    for (int i = 0; i < len; i++) {
      if (s[i] == FARSI_YEH || s[i] == YEH_BARREE)
        s[i] = YEH;

      if (s[i] == KEHEH)
        s[i] = KAF;

      if (s[i] == HEH_YEH || s[i] == HEH_GOAL)
        s[i] = HEH;

      if (s[i] == HAMZA_ABOVE) { // necessary for HEH + HAMZA
        len = delete(s, i, len);
        i--;
      }
    }

    return len;
  }

