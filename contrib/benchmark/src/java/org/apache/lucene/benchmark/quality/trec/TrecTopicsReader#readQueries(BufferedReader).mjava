  /**
   * Read quality queries from trec format topics file.
   * @param reader where queries are read from.
   * @return the result quality queries.
   * @throws IOException if cannot read the queries.
   */
  public QualityQuery[] readQueries(BufferedReader reader) throws IOException {
    ArrayList res = new ArrayList();
    StringBuffer sb;
    try {
      while (null!=(sb=read(reader,"<top>",null,false,false))) {
        HashMap fields = new HashMap();
        // id
        sb = read(reader,"<num>",null,true,false);
        int k = sb.indexOf(":");
        String id = sb.substring(k+1).trim();
        // title
        sb = read(reader,"<title>",null,true,false);
        k = sb.indexOf(">");
        String title = sb.substring(k+1).trim();
        // description
        sb = read(reader,"<desc>",null,false,false);
        sb = read(reader,"<narr>",null,false,true);
        String descripion = sb.toString().trim();
        // we got a topic!
        fields.put("title",title);
        fields.put("description",descripion);
        QualityQuery topic = new QualityQuery(id,fields);
        res.add(topic);
        // skip narrative, get to end of doc
        read(reader,"</top>",null,false,false);
      }
    } finally {
      reader.close();
    }
    // sort result array (by ID) 
    QualityQuery qq[] = (QualityQuery[]) res.toArray(new QualityQuery[0]);
    Arrays.sort(qq);
    return qq;
  }

