  private Filter[] getChainWithOldFilters(Filter[] chain) {
    Filter[] oldFilters = new Filter[chain.length];
    for (int i = 0; i < chain.length; i++) {
      final Filter f = chain[i];
    // create old BitSet-based Filter as wrapper
      oldFilters[i] = new Filter() {
        /** @deprecated */
        public BitSet bits(IndexReader reader) throws IOException {
          BitSet bits = new BitSet(reader.maxDoc());
          DocIdSetIterator it = f.getDocIdSet(reader).iterator();  
          int doc;
          while((doc = it.nextDoc()) != DocIdSetIterator.NO_MORE_DOCS) {
            bits.set(doc);
          }
          return bits;
        }
      };
    }
    return oldFilters;
  }

