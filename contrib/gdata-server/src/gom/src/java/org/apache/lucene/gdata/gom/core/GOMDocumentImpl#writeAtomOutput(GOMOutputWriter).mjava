	/**
	 * @see org.apache.lucene.gdata.gom.GOMDocument#writeAtomOutput(org.apache.lucene.gdata.gom.writer.GOMOutputWriter)
	 */
	public void writeAtomOutput(GOMOutputWriter aStreamWriter)
			throws XMLStreamException {
		try {
			aStreamWriter.writeStartDocument(
					this.charEncoding == null ? DEFAULT_ENCODING
							: this.charEncoding,
					this.version == null ? DEFAULT_VERSION : this.version);
			if (this.root != null)
				this.root.writeAtomOutput(aStreamWriter);
			aStreamWriter.writeEndDocument();
			aStreamWriter.flush();
		} finally {
			aStreamWriter.close();
		}

	}

