    /**
     * 
     * Sends a response for an update, insert or delete request. This method
     * must not invoked in a case of an error performing the requeste action. If
     * the specified response format is ATOM the default namespace will be set
     * to ATOM.
     * 
     * @param entry -
     *            the modified / created entry to send
     * @param profile -
     *            the entries extension profile
     * @throws IOException -
     *             if an I/O exception accures, often caused by an already
     *             closed Writer or OutputStream
     */
    public void sendResponse(BaseEntry entry, ExtensionProfile profile)
            throws IOException {
        if (entry == null)
            throw new IllegalArgumentException("entry must not be null");
        if (profile == null)
            throw new IllegalArgumentException(
                    "extension profil must not be null");
        DateTime time = entry.getUpdated();
        if (time != null)
            setLastModifiedHeader(time.getValue());
        XmlWriter writer = createWriter();
        if (this.outputFormat.equals(OutputFormat.ATOM))
            entry.generateAtom(writer, profile);
        else
            entry.generateRss(writer, profile);
        writer.close();
        
    }

